/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/index"],{

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fmauriceholda%2FDesktop%2FCoding%2Fnaga-codex-ai-chess-final%20(1)%2Fpages%2Findex.tsx&page=%2F!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fmauriceholda%2FDesktop%2FCoding%2Fnaga-codex-ai-chess-final%20(1)%2Fpages%2Findex.tsx&page=%2F! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return __webpack_require__(/*! ./pages/index.tsx */ \"./pages/index.tsx\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWNsaWVudC1wYWdlcy1sb2FkZXIuanM/YWJzb2x1dGVQYWdlUGF0aD0lMkZVc2VycyUyRm1hdXJpY2Vob2xkYSUyRkRlc2t0b3AlMkZDb2RpbmclMkZuYWdhLWNvZGV4LWFpLWNoZXNzLWZpbmFsJTIwKDEpJTJGcGFnZXMlMkZpbmRleC50c3gmcGFnZT0lMkYhIiwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFPLENBQUMsNENBQW1CO0FBQzFDO0FBQ0E7QUFDQSxPQUFPLElBQVU7QUFDakIsTUFBTSxVQUFVO0FBQ2hCO0FBQ0EsT0FBTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLz81MzlhIl0sInNvdXJjZXNDb250ZW50IjpbIlxuICAgICh3aW5kb3cuX19ORVhUX1AgPSB3aW5kb3cuX19ORVhUX1AgfHwgW10pLnB1c2goW1xuICAgICAgXCIvXCIsXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZXF1aXJlKFwiLi9wYWdlcy9pbmRleC50c3hcIik7XG4gICAgICB9XG4gICAgXSk7XG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Ll9fTkVYVF9QLnB1c2goW1wiL1wiXSlcbiAgICAgIH0pO1xuICAgIH1cbiAgIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fmauriceholda%2FDesktop%2FCoding%2Fnaga-codex-ai-chess-final%20(1)%2Fpages%2Findex.tsx&page=%2F!\n"));

/***/ }),

/***/ "./components/Board.tsx":
/*!******************************!*\
  !*** ./components/Board.tsx ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Square__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Square */ \"./components/Square.tsx\");\n\n\n\nconst Board = (param)=>{\n    let { boardState, onSquareClick, playerColor } = param;\n    const displayBoard = playerColor === \"white\" ? boardState : [\n        ...boardState\n    ].reverse().map((row)=>[\n            ...row\n        ].reverse());\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"inline-grid grid-cols-8 border-2 sm:border-4 border-slate-600\",\n        children: displayBoard.map((row, rowIndex)=>row.map((squareData, colIndex)=>{\n                const isDark = (rowIndex + colIndex) % 2 !== 0;\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Square__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    squareData: squareData,\n                    onSquareClick: onSquareClick,\n                    isDark: isDark\n                }, squareData.id, false, {\n                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/Board.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 13\n                }, undefined);\n            }))\n    }, void 0, false, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/Board.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, undefined);\n};\n_c = Board;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Board);\nvar _c;\n$RefreshReg$(_c, \"Board\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0JvYXJkLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBCO0FBRUk7QUFROUIsTUFBTUUsUUFBOEI7UUFBQyxFQUFFQyxVQUFVLEVBQUVDLGFBQWEsRUFBRUMsV0FBVyxFQUFFO0lBQzdFLE1BQU1DLGVBQWVELGdCQUFnQixVQUFVRixhQUFhO1dBQUlBO0tBQVcsQ0FBQ0ksT0FBTyxHQUFHQyxHQUFHLENBQUNDLENBQUFBLE1BQU87ZUFBSUE7U0FBSSxDQUFDRixPQUFPO0lBRWpILHFCQUNFLDhEQUFDRztRQUFJQyxXQUFVO2tCQUNaTCxhQUFhRSxHQUFHLENBQUMsQ0FBQ0MsS0FBS0csV0FDdEJILElBQUlELEdBQUcsQ0FBQyxDQUFDSyxZQUFZQztnQkFDbkIsTUFBTUMsU0FBUyxDQUFDSCxXQUFXRSxRQUFPLElBQUssTUFBTTtnQkFDN0MscUJBQ0UsOERBQUNiLCtDQUFNQTtvQkFFTFksWUFBWUE7b0JBQ1pULGVBQWVBO29CQUNmVyxRQUFRQTttQkFISEYsV0FBV0csRUFBRTs7Ozs7WUFNeEI7Ozs7OztBQUlSO0tBcEJNZDtBQXNCTiwrREFBZUEsS0FBS0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0JvYXJkLnRzeD84YTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCb2FyZFN0YXRlIGFzIEZ1bGxCb2FyZFN0YXRlLCBTcXVhcmVJZCB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IFNxdWFyZSBmcm9tICcuL1NxdWFyZSc7XG5cbmludGVyZmFjZSBCb2FyZFByb3BzIHtcbiAgYm9hcmRTdGF0ZTogRnVsbEJvYXJkU3RhdGU7XG4gIG9uU3F1YXJlQ2xpY2s6IChzcXVhcmVJZDogU3F1YXJlSWQpID0+IHZvaWQ7XG4gIHBsYXllckNvbG9yOiAnd2hpdGUnIHwgJ2JsYWNrJzsgLy8gVG8gb3JpZW50IHRoZSBib2FyZFxufVxuXG5jb25zdCBCb2FyZDogUmVhY3QuRkM8Qm9hcmRQcm9wcz4gPSAoeyBib2FyZFN0YXRlLCBvblNxdWFyZUNsaWNrLCBwbGF5ZXJDb2xvciB9KSA9PiB7XG4gIGNvbnN0IGRpc3BsYXlCb2FyZCA9IHBsYXllckNvbG9yID09PSAnd2hpdGUnID8gYm9hcmRTdGF0ZSA6IFsuLi5ib2FyZFN0YXRlXS5yZXZlcnNlKCkubWFwKHJvdyA9PiBbLi4ucm93XS5yZXZlcnNlKCkpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtZ3JpZCBncmlkLWNvbHMtOCBib3JkZXItMiBzbTpib3JkZXItNCBib3JkZXItc2xhdGUtNjAwXCI+XG4gICAgICB7ZGlzcGxheUJvYXJkLm1hcCgocm93LCByb3dJbmRleCkgPT5cbiAgICAgICAgcm93Lm1hcCgoc3F1YXJlRGF0YSwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBpc0RhcmsgPSAocm93SW5kZXggKyBjb2xJbmRleCkgJSAyICE9PSAwO1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U3F1YXJlXG4gICAgICAgICAgICAgIGtleT17c3F1YXJlRGF0YS5pZH1cbiAgICAgICAgICAgICAgc3F1YXJlRGF0YT17c3F1YXJlRGF0YX1cbiAgICAgICAgICAgICAgb25TcXVhcmVDbGljaz17b25TcXVhcmVDbGlja31cbiAgICAgICAgICAgICAgaXNEYXJrPXtpc0Rhcmt9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQm9hcmQ7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJTcXVhcmUiLCJCb2FyZCIsImJvYXJkU3RhdGUiLCJvblNxdWFyZUNsaWNrIiwicGxheWVyQ29sb3IiLCJkaXNwbGF5Qm9hcmQiLCJyZXZlcnNlIiwibWFwIiwicm93IiwiZGl2IiwiY2xhc3NOYW1lIiwicm93SW5kZXgiLCJzcXVhcmVEYXRhIiwiY29sSW5kZXgiLCJpc0RhcmsiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Board.tsx\n"));

/***/ }),

/***/ "./components/CookieBanner.tsx":
/*!*************************************!*\
  !*** ./components/CookieBanner.tsx ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/link */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst CookieBanner = (param)=>{\n    let { onAccept, onDecline } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed bottom-0 left-0 right-0 bg-slate-900 text-slate-200 p-4 shadow-lg z-50 flex flex-col sm:flex-row justify-between items-center\",\n        role: \"region\",\n        \"aria-label\": \"Cookie Consent Banner\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-sm mb-3 sm:mb-0 sm:mr-4\",\n                children: [\n                    'We use cookies to enhance your experience. By clicking \"Accept\", you agree to our use of cookies.',\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_2___default()), {\n                        href: \"/cookie\",\n                        legacyBehavior: true,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                            className: \"text-emerald-400 hover:text-emerald-300 underline ml-2 focus:outline-none focus:ring-1 focus:ring-emerald-500 rounded\",\n                            \"aria-label\": \"Learn more about our cookie policy\",\n                            children: \"Learn More\"\n                        }, void 0, false, {\n                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                            lineNumber: 20,\n                            columnNumber: 13\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                        lineNumber: 19,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                lineNumber: 17,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-shrink-0 flex gap-x-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onAccept,\n                        className: \"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-75 transition-colors\",\n                        \"aria-label\": \"Accept cookies\",\n                        children: \"Accept\"\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                        lineNumber: 29,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onDecline,\n                        className: \"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-slate-200 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-opacity-75 transition-colors\",\n                        \"aria-label\": \"Decline cookies\",\n                        children: \"Decline\"\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                        lineNumber: 36,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n                lineNumber: 28,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/CookieBanner.tsx\",\n        lineNumber: 12,\n        columnNumber: 5\n    }, undefined);\n};\n_c = CookieBanner;\n/* harmony default export */ __webpack_exports__[\"default\"] = (CookieBanner);\nvar _c;\n$RefreshReg$(_c, \"CookieBanner\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0Nvb2tpZUJhbm5lci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEI7QUFDRztBQVE3QixNQUFNRSxlQUE0QztRQUFDLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFO0lBQ3hFLHFCQUNFLDhEQUFDQztRQUNDQyxXQUFVO1FBQ1ZDLE1BQUs7UUFDTEMsY0FBVzs7MEJBRVgsOERBQUNDO2dCQUFFSCxXQUFVOztvQkFBK0I7a0NBRTFDLDhEQUFDTCxrREFBSUE7d0JBQUNTLE1BQUs7d0JBQVVDLGNBQWM7a0NBQy9CLDRFQUFDQzs0QkFDR04sV0FBVTs0QkFDVkUsY0FBVztzQ0FDZDs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBS1AsOERBQUNIO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ087d0JBQ0NDLFNBQVNYO3dCQUNURyxXQUFVO3dCQUNWRSxjQUFXO2tDQUNaOzs7Ozs7a0NBR0QsOERBQUNLO3dCQUNDQyxTQUFTVjt3QkFDVEUsV0FBVTt3QkFDVkUsY0FBVztrQ0FDWjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTVQ7S0FwQ01OO0FBc0NOLCtEQUFlQSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvQ29va2llQmFubmVyLnRzeD9iNjEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xuXG5pbnRlcmZhY2UgQ29va2llQmFubmVyUHJvcHMge1xuICBvbkFjY2VwdDogKCkgPT4gdm9pZDtcbiAgb25EZWNsaW5lOiAoKSA9PiB2b2lkO1xuICBvbkxlYXJuTW9yZT86ICgpID0+IHZvaWQ7IC8vIEtlcHQgZm9yIHR5cGUgY29uc2lzdGVuY3ksIGJ1dCBMaW5rIGlzIHByZWZlcnJlZFxufVxuXG5jb25zdCBDb29raWVCYW5uZXI6IFJlYWN0LkZDPENvb2tpZUJhbm5lclByb3BzPiA9ICh7IG9uQWNjZXB0LCBvbkRlY2xpbmUgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgXG4gICAgICBjbGFzc05hbWU9XCJmaXhlZCBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCBiZy1zbGF0ZS05MDAgdGV4dC1zbGF0ZS0yMDAgcC00IHNoYWRvdy1sZyB6LTUwIGZsZXggZmxleC1jb2wgc206ZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiXG4gICAgICByb2xlPVwicmVnaW9uXCJcbiAgICAgIGFyaWEtbGFiZWw9XCJDb29raWUgQ29uc2VudCBCYW5uZXJcIlxuICAgID5cbiAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gbWItMyBzbTptYi0wIHNtOm1yLTRcIj5cbiAgICAgICAgV2UgdXNlIGNvb2tpZXMgdG8gZW5oYW5jZSB5b3VyIGV4cGVyaWVuY2UuIEJ5IGNsaWNraW5nIFwiQWNjZXB0XCIsIHlvdSBhZ3JlZSB0byBvdXIgdXNlIG9mIGNvb2tpZXMuXG4gICAgICAgIDxMaW5rIGhyZWY9XCIvY29va2llXCIgbGVnYWN5QmVoYXZpb3I+XG4gICAgICAgICAgICA8YSBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWVtZXJhbGQtNDAwIGhvdmVyOnRleHQtZW1lcmFsZC0zMDAgdW5kZXJsaW5lIG1sLTIgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLWVtZXJhbGQtNTAwIHJvdW5kZWRcIlxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJMZWFybiBtb3JlIGFib3V0IG91ciBjb29raWUgcG9saWN5XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBMZWFybiBNb3JlXG4gICAgICAgICAgICA8L2E+XG4gICAgICAgIDwvTGluaz5cbiAgICAgIDwvcD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC1zaHJpbmstMCBmbGV4IGdhcC14LTJcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e29uQWNjZXB0fVxuICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1lbWVyYWxkLTYwMCBob3ZlcjpiZy1lbWVyYWxkLTcwMCB0ZXh0LXdoaXRlIHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC01MDAgZm9jdXM6cmluZy1vcGFjaXR5LTc1IHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICBhcmlhLWxhYmVsPVwiQWNjZXB0IGNvb2tpZXNcIlxuICAgICAgICA+XG4gICAgICAgICAgQWNjZXB0XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17b25EZWNsaW5lfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1zbGF0ZS02MDAgaG92ZXI6Ymctc2xhdGUtNzAwIHRleHQtc2xhdGUtMjAwIHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2xhdGUtNTAwIGZvY3VzOnJpbmctb3BhY2l0eS03NSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgYXJpYS1sYWJlbD1cIkRlY2xpbmUgY29va2llc1wiXG4gICAgICAgID5cbiAgICAgICAgICBEZWNsaW5lXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb29raWVCYW5uZXI7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJMaW5rIiwiQ29va2llQmFubmVyIiwib25BY2NlcHQiLCJvbkRlY2xpbmUiLCJkaXYiLCJjbGFzc05hbWUiLCJyb2xlIiwiYXJpYS1sYWJlbCIsInAiLCJocmVmIiwibGVnYWN5QmVoYXZpb3IiLCJhIiwiYnV0dG9uIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/CookieBanner.tsx\n"));

/***/ }),

/***/ "./components/GameControls.tsx":
/*!*************************************!*\
  !*** ./components/GameControls.tsx ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst GameControls = (param)=>{\n    let { difficulty, onDifficultyChange, onResetGame, isGameInProgress } = param;\n    const difficulties = [\n        1,\n        2,\n        3,\n        4\n    ];\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-4 bg-slate-700 rounded-lg shadow-md space-y-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        htmlFor: \"difficulty\",\n                        className: \"block text-sm font-medium text-slate-300 mb-1\",\n                        children: \"AI Difficulty:\"\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                        lineNumber: 17,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        id: \"difficulty\",\n                        value: difficulty,\n                        onChange: (e)=>onDifficultyChange(Number(e.target.value)),\n                        className: \"w-full p-2 bg-slate-600 border border-slate-500 rounded-md text-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500\",\n                        disabled: isGameInProgress,\n                        children: difficulties.map((level)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: level,\n                                children: [\n                                    \"Level \",\n                                    level,\n                                    \" \",\n                                    level === 1 ? \"(Beginner)\" : level === 2 ? \"(Easy)\" : level === 3 ? \"(Medium)\" : \"(Hard)\"\n                                ]\n                            }, level, true, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                                lineNumber: 28,\n                                columnNumber: 13\n                            }, undefined))\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                        lineNumber: 20,\n                        columnNumber: 9\n                    }, undefined),\n                    isGameInProgress && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-xs text-slate-400 mt-1\",\n                        children: \"Difficulty cannot be changed mid-game. Reset to change.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                        lineNumber: 33,\n                        columnNumber: 30\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                lineNumber: 16,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: onResetGame,\n                className: \"w-full py-2 px-4 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-md shadow focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-50 transition-colors\",\n                children: isGameInProgress ? \"Reset Game\" : \"Start New Game\"\n            }, void 0, false, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n                lineNumber: 36,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/GameControls.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, undefined);\n};\n_c = GameControls;\n/* harmony default export */ __webpack_exports__[\"default\"] = (GameControls);\nvar _c;\n$RefreshReg$(_c, \"GameControls\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0dhbWVDb250cm9scy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBVTFCLE1BQU1DLGVBQTRDO1FBQUMsRUFBRUMsVUFBVSxFQUFFQyxrQkFBa0IsRUFBRUMsV0FBVyxFQUFFQyxnQkFBZ0IsRUFBRTtJQUNsSCxNQUFNQyxlQUE2QjtRQUFDO1FBQUc7UUFBRztRQUFHO0tBQUU7SUFFL0MscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDRDs7a0NBQ0MsOERBQUNFO3dCQUFNQyxTQUFRO3dCQUFhRixXQUFVO2tDQUFnRDs7Ozs7O2tDQUd0Riw4REFBQ0c7d0JBQ0NDLElBQUc7d0JBQ0hDLE9BQU9YO3dCQUNQWSxVQUFVLENBQUNDLElBQU1aLG1CQUFtQmEsT0FBT0QsRUFBRUUsTUFBTSxDQUFDSixLQUFLO3dCQUN6REwsV0FBVTt3QkFDVlUsVUFBVWI7a0NBRVRDLGFBQWFhLEdBQUcsQ0FBQyxDQUFDQyxzQkFDakIsOERBQUNDO2dDQUFtQlIsT0FBT087O29DQUFPO29DQUN6QkE7b0NBQU07b0NBQUVBLFVBQVUsSUFBSSxlQUFlQSxVQUFVLElBQUksV0FBV0EsVUFBVSxJQUFJLGFBQWE7OytCQURyRkE7Ozs7Ozs7Ozs7b0JBS2hCZixrQ0FBb0IsOERBQUNpQjt3QkFBRWQsV0FBVTtrQ0FBOEI7Ozs7Ozs7Ozs7OzswQkFHbEUsOERBQUNlO2dCQUNDQyxTQUFTcEI7Z0JBQ1RJLFdBQVU7MEJBRVRILG1CQUFtQixlQUFlOzs7Ozs7Ozs7Ozs7QUFJM0M7S0FqQ01KO0FBbUNOLCtEQUFlQSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvR2FtZUNvbnRyb2xzLnRzeD83ZTZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEaWZmaWN1bHR5IH0gZnJvbSAnQC90eXBlcyc7XG5cbmludGVyZmFjZSBHYW1lQ29udHJvbHNQcm9wcyB7XG4gIGRpZmZpY3VsdHk6IERpZmZpY3VsdHk7XG4gIG9uRGlmZmljdWx0eUNoYW5nZTogKGxldmVsOiBEaWZmaWN1bHR5KSA9PiB2b2lkO1xuICBvblJlc2V0R2FtZTogKCkgPT4gdm9pZDtcbiAgaXNHYW1lSW5Qcm9ncmVzczogYm9vbGVhbjtcbn1cblxuY29uc3QgR2FtZUNvbnRyb2xzOiBSZWFjdC5GQzxHYW1lQ29udHJvbHNQcm9wcz4gPSAoeyBkaWZmaWN1bHR5LCBvbkRpZmZpY3VsdHlDaGFuZ2UsIG9uUmVzZXRHYW1lLCBpc0dhbWVJblByb2dyZXNzIH0pID0+IHtcbiAgY29uc3QgZGlmZmljdWx0aWVzOiBEaWZmaWN1bHR5W10gPSBbMSwgMiwgMywgNF07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1zbGF0ZS03MDAgcm91bmRlZC1sZyBzaGFkb3ctbWQgc3BhY2UteS00XCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cImRpZmZpY3VsdHlcIiBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtMzAwIG1iLTFcIj5cbiAgICAgICAgICBBSSBEaWZmaWN1bHR5OlxuICAgICAgICA8L2xhYmVsPlxuICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgaWQ9XCJkaWZmaWN1bHR5XCJcbiAgICAgICAgICB2YWx1ZT17ZGlmZmljdWx0eX1cbiAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uRGlmZmljdWx0eUNoYW5nZShOdW1iZXIoZS50YXJnZXQudmFsdWUpIGFzIERpZmZpY3VsdHkpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBwLTIgYmctc2xhdGUtNjAwIGJvcmRlciBib3JkZXItc2xhdGUtNTAwIHJvdW5kZWQtbWQgdGV4dC13aGl0ZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1lbWVyYWxkLTUwMCBmb2N1czpib3JkZXItZW1lcmFsZC01MDBcIlxuICAgICAgICAgIGRpc2FibGVkPXtpc0dhbWVJblByb2dyZXNzfVxuICAgICAgICA+XG4gICAgICAgICAge2RpZmZpY3VsdGllcy5tYXAoKGxldmVsKSA9PiAoXG4gICAgICAgICAgICA8b3B0aW9uIGtleT17bGV2ZWx9IHZhbHVlPXtsZXZlbH0+XG4gICAgICAgICAgICAgIExldmVsIHtsZXZlbH0ge2xldmVsID09PSAxID8gJyhCZWdpbm5lciknIDogbGV2ZWwgPT09IDIgPyAnKEVhc3kpJyA6IGxldmVsID09PSAzID8gJyhNZWRpdW0pJyA6ICcoSGFyZCknfVxuICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgKSl9XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgICB7aXNHYW1lSW5Qcm9ncmVzcyAmJiA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNDAwIG10LTFcIj5EaWZmaWN1bHR5IGNhbm5vdCBiZSBjaGFuZ2VkIG1pZC1nYW1lLiBSZXNldCB0byBjaGFuZ2UuPC9wPn1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9e29uUmVzZXRHYW1lfVxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHktMiBweC00IGJnLWVtZXJhbGQtNjAwIGhvdmVyOmJnLWVtZXJhbGQtNzAwIHRleHQtd2hpdGUgZm9udC1zZW1pYm9sZCByb3VuZGVkLW1kIHNoYWRvdyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC01MDAgZm9jdXM6cmluZy1vcGFjaXR5LTUwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgID5cbiAgICAgICAge2lzR2FtZUluUHJvZ3Jlc3MgPyAnUmVzZXQgR2FtZScgOiAnU3RhcnQgTmV3IEdhbWUnfVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lQ29udHJvbHM7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJHYW1lQ29udHJvbHMiLCJkaWZmaWN1bHR5Iiwib25EaWZmaWN1bHR5Q2hhbmdlIiwib25SZXNldEdhbWUiLCJpc0dhbWVJblByb2dyZXNzIiwiZGlmZmljdWx0aWVzIiwiZGl2IiwiY2xhc3NOYW1lIiwibGFiZWwiLCJodG1sRm9yIiwic2VsZWN0IiwiaWQiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsIk51bWJlciIsInRhcmdldCIsImRpc2FibGVkIiwibWFwIiwibGV2ZWwiLCJvcHRpb24iLCJwIiwiYnV0dG9uIiwib25DbGljayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/GameControls.tsx\n"));

/***/ }),

/***/ "./components/PieceDisplay.tsx":
/*!*************************************!*\
  !*** ./components/PieceDisplay.tsx ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/constants */ \"./constants.ts\");\n\n\n\nconst PieceDisplay = (param)=>{\n    let { piece, sizeClass = \"text-4xl\" } = param;\n    const unicodeChar = _constants__WEBPACK_IMPORTED_MODULE_2__.PIECE_UNICODE[piece.color][piece.type];\n    const colorClass = piece.color === \"white\" ? \"text-white\" : \"text-neutral-800\";\n    const shadowAndFilterClass = piece.color === \"white\" ? \"filter drop-shadow-[0_1px_1px_rgba(0,0,0,0.7)]\" : \"\";\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n        className: \"\".concat(sizeClass, \" \").concat(colorClass, \" \").concat(shadowAndFilterClass, \" select-none\"),\n        style: {\n            textRendering: \"optimizeLegibility\"\n        },\n        children: unicodeChar\n    }, void 0, false, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PieceDisplay.tsx\",\n        lineNumber: 16,\n        columnNumber: 5\n    }, undefined);\n};\n_c = PieceDisplay;\n/* harmony default export */ __webpack_exports__[\"default\"] = (PieceDisplay);\nvar _c;\n$RefreshReg$(_c, \"PieceDisplay\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1BpZWNlRGlzcGxheS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUVrQjtBQU81QyxNQUFNRSxlQUE0QztRQUFDLEVBQUVDLEtBQUssRUFBRUMsWUFBWSxVQUFVLEVBQUU7SUFDbEYsTUFBTUMsY0FBY0oscURBQWEsQ0FBQ0UsTUFBTUcsS0FBSyxDQUFDLENBQUNILE1BQU1JLElBQUksQ0FBQztJQUMxRCxNQUFNQyxhQUFhTCxNQUFNRyxLQUFLLEtBQUssVUFBVSxlQUFlO0lBQzVELE1BQU1HLHVCQUF1Qk4sTUFBTUcsS0FBSyxLQUFLLFVBQVUsbURBQW1EO0lBRTFHLHFCQUNFLDhEQUFDSTtRQUNDQyxXQUFXLEdBQWdCSCxPQUFiSixXQUFVLEtBQWlCSyxPQUFkRCxZQUFXLEtBQXdCLE9BQXJCQyxzQkFBcUI7UUFDOURHLE9BQU87WUFBRUMsZUFBZTtRQUFxQjtrQkFFNUNSOzs7Ozs7QUFHUDtLQWJNSDtBQWVOLCtEQUFlQSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvUGllY2VEaXNwbGF5LnRzeD80ZDI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQaWVjZSB9IGZyb20gJ0AvdHlwZXMnOyBcbmltcG9ydCB7IFBJRUNFX1VOSUNPREUgfSBmcm9tICdAL2NvbnN0YW50cyc7XG5cbmludGVyZmFjZSBQaWVjZURpc3BsYXlQcm9wcyB7XG4gIHBpZWNlOiBQaWVjZTtcbiAgc2l6ZUNsYXNzPzogc3RyaW5nOyBcbn1cblxuY29uc3QgUGllY2VEaXNwbGF5OiBSZWFjdC5GQzxQaWVjZURpc3BsYXlQcm9wcz4gPSAoeyBwaWVjZSwgc2l6ZUNsYXNzID0gJ3RleHQtNHhsJyB9KSA9PiB7XG4gIGNvbnN0IHVuaWNvZGVDaGFyID0gUElFQ0VfVU5JQ09ERVtwaWVjZS5jb2xvcl1bcGllY2UudHlwZV07XG4gIGNvbnN0IGNvbG9yQ2xhc3MgPSBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/ICd0ZXh0LXdoaXRlJyA6ICd0ZXh0LW5ldXRyYWwtODAwJztcbiAgY29uc3Qgc2hhZG93QW5kRmlsdGVyQ2xhc3MgPSBwaWVjZS5jb2xvciA9PT0gJ3doaXRlJyA/ICdmaWx0ZXIgZHJvcC1zaGFkb3ctWzBfMXB4XzFweF9yZ2JhKDAsMCwwLDAuNyldJyA6ICcnO1xuXG4gIHJldHVybiAoXG4gICAgPHNwYW4gXG4gICAgICBjbGFzc05hbWU9e2Ake3NpemVDbGFzc30gJHtjb2xvckNsYXNzfSAke3NoYWRvd0FuZEZpbHRlckNsYXNzfSBzZWxlY3Qtbm9uZWB9XG4gICAgICBzdHlsZT17eyB0ZXh0UmVuZGVyaW5nOiAnb3B0aW1pemVMZWdpYmlsaXR5JyB9fVxuICAgID5cbiAgICAgIHt1bmljb2RlQ2hhcn1cbiAgICA8L3NwYW4+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQaWVjZURpc3BsYXk7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJQSUVDRV9VTklDT0RFIiwiUGllY2VEaXNwbGF5IiwicGllY2UiLCJzaXplQ2xhc3MiLCJ1bmljb2RlQ2hhciIsImNvbG9yIiwidHlwZSIsImNvbG9yQ2xhc3MiLCJzaGFkb3dBbmRGaWx0ZXJDbGFzcyIsInNwYW4iLCJjbGFzc05hbWUiLCJzdHlsZSIsInRleHRSZW5kZXJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/PieceDisplay.tsx\n"));

/***/ }),

/***/ "./components/PromotionModal.tsx":
/*!***************************************!*\
  !*** ./components/PromotionModal.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/constants */ \"./constants.ts\");\n/* harmony import */ var _PieceDisplay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PieceDisplay */ \"./components/PieceDisplay.tsx\");\n\n\n\n\nconst PromotionModal = (param)=>{\n    let { playerColor, onPromote } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-slate-700 p-6 rounded-lg shadow-xl w-full max-w-xs sm:max-w-sm\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                    className: \"text-xl font-semibold text-white mb-4 text-center\",\n                    children: \"Promote Pawn To:\"\n                }, void 0, false, {\n                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-around space-x-2 sm:space-x-3\",\n                    children: _constants__WEBPACK_IMPORTED_MODULE_2__.PROMOTION_PIECES.map((type)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>onPromote(type),\n                            className: \"p-2 sm:p-3 bg-slate-600 hover:bg-emerald-600 rounded-md focus:outline-none focus:ring-2 focus:ring-emerald-500\",\n                            \"aria-label\": \"Promote to \".concat(type),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PieceDisplay__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                piece: {\n                                    type,\n                                    color: playerColor\n                                },\n                                sizeClass: \"text-4xl sm:text-5xl\"\n                            }, void 0, false, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n                                lineNumber: 25,\n                                columnNumber: 15\n                            }, undefined)\n                        }, type, false, {\n                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n                            lineNumber: 19,\n                            columnNumber: 13\n                        }, undefined))\n                }, void 0, false, {\n                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n                    lineNumber: 17,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n            lineNumber: 15,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/PromotionModal.tsx\",\n        lineNumber: 14,\n        columnNumber: 5\n    }, undefined);\n};\n_c = PromotionModal;\n/* harmony default export */ __webpack_exports__[\"default\"] = (PromotionModal);\nvar _c;\n$RefreshReg$(_c, \"PromotionModal\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1Byb21vdGlvbk1vZGFsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEwQjtBQUVxQjtBQUNMO0FBUTFDLE1BQU1HLGlCQUFnRDtRQUFDLEVBQUVDLFdBQVcsRUFBRUMsU0FBUyxFQUFFO0lBQy9FLHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVO2tCQUNiLDRFQUFDRDtZQUFJQyxXQUFVOzs4QkFDYiw4REFBQ0M7b0JBQUdELFdBQVU7OEJBQW9EOzs7Ozs7OEJBQ2xFLDhEQUFDRDtvQkFBSUMsV0FBVTs4QkFDWk4sd0RBQWdCQSxDQUFDUSxHQUFHLENBQUMsQ0FBQ0MscUJBQ3JCLDhEQUFDQzs0QkFFQ0MsU0FBUyxJQUFNUCxVQUFVSzs0QkFDekJILFdBQVU7NEJBQ1ZNLGNBQVksY0FBbUIsT0FBTEg7c0NBRTFCLDRFQUFDUixxREFBWUE7Z0NBQUNZLE9BQU87b0NBQUVKO29DQUFNSyxPQUFPWDtnQ0FBWTtnQ0FBR1ksV0FBVTs7Ozs7OzJCQUx4RE47Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVluQjtLQXBCTVA7QUFzQk4sK0RBQWVBLGNBQWNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9Qcm9tb3Rpb25Nb2RhbC50c3g/NDBkOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUGllY2VUeXBlLCBQaWVjZUNvbG9yIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBQUk9NT1RJT05fUElFQ0VTIH0gZnJvbSAnQC9jb25zdGFudHMnO1xuaW1wb3J0IFBpZWNlRGlzcGxheSBmcm9tICcuL1BpZWNlRGlzcGxheSc7XG5cblxuaW50ZXJmYWNlIFByb21vdGlvbk1vZGFsUHJvcHMge1xuICBwbGF5ZXJDb2xvcjogUGllY2VDb2xvcjtcbiAgb25Qcm9tb3RlOiAocGllY2VUeXBlOiBQaWVjZVR5cGUpID0+IHZvaWQ7XG59XG5cbmNvbnN0IFByb21vdGlvbk1vZGFsOiBSZWFjdC5GQzxQcm9tb3Rpb25Nb2RhbFByb3BzPiA9ICh7IHBsYXllckNvbG9yLCBvblByb21vdGUgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTc1IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNTAgcC00XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXNsYXRlLTcwMCBwLTYgcm91bmRlZC1sZyBzaGFkb3cteGwgdy1mdWxsIG1heC13LXhzIHNtOm1heC13LXNtXCI+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgdGV4dC13aGl0ZSBtYi00IHRleHQtY2VudGVyXCI+UHJvbW90ZSBQYXduIFRvOjwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWFyb3VuZCBzcGFjZS14LTIgc206c3BhY2UteC0zXCI+XG4gICAgICAgICAge1BST01PVElPTl9QSUVDRVMubWFwKCh0eXBlKSA9PiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIGtleT17dHlwZX1cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25Qcm9tb3RlKHR5cGUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgc206cC0zIGJnLXNsYXRlLTYwMCBob3ZlcjpiZy1lbWVyYWxkLTYwMCByb3VuZGVkLW1kIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1lbWVyYWxkLTUwMFwiXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e2BQcm9tb3RlIHRvICR7dHlwZX1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8UGllY2VEaXNwbGF5IHBpZWNlPXt7IHR5cGUsIGNvbG9yOiBwbGF5ZXJDb2xvciB9fSBzaXplQ2xhc3M9XCJ0ZXh0LTR4bCBzbTp0ZXh0LTV4bFwiIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByb21vdGlvbk1vZGFsO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiUFJPTU9USU9OX1BJRUNFUyIsIlBpZWNlRGlzcGxheSIsIlByb21vdGlvbk1vZGFsIiwicGxheWVyQ29sb3IiLCJvblByb21vdGUiLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsIm1hcCIsInR5cGUiLCJidXR0b24iLCJvbkNsaWNrIiwiYXJpYS1sYWJlbCIsInBpZWNlIiwiY29sb3IiLCJzaXplQ2xhc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/PromotionModal.tsx\n"));

/***/ }),

/***/ "./components/Square.tsx":
/*!*******************************!*\
  !*** ./components/Square.tsx ***!
  \*******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _PieceDisplay__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PieceDisplay */ \"./components/PieceDisplay.tsx\");\n\n\n\nconst Square = (param)=>{\n    let { squareData, onSquareClick, isDark } = param;\n    const { id, piece, isSelected, isValidMove, isCheck } = squareData;\n    let bgColor = isDark ? \"bg-emerald-700\" : \"bg-emerald-100\";\n    if (isSelected) {\n        bgColor = \"bg-yellow-400\";\n    } else if (isCheck && piece && piece.type === \"KING\") {\n        bgColor = \"bg-red-500\";\n    } else if (isValidMove) {\n        if (piece) {\n            bgColor = \"bg-red-400\";\n        }\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-20 lg:h-20 flex items-center justify-center cursor-pointer transition-colors duration-150 \".concat(bgColor),\n        onClick: ()=>onSquareClick(id),\n        title: id,\n        children: piece && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PieceDisplay__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n            piece: piece,\n            sizeClass: \"text-xl sm:text-3xl md:text-4xl lg:text-5xl\"\n        }, void 0, false, {\n            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/Square.tsx\",\n            lineNumber: 32,\n            columnNumber: 17\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/Square.tsx\",\n        lineNumber: 27,\n        columnNumber: 5\n    }, undefined);\n};\n_c = Square;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Square);\nvar _c;\n$RefreshReg$(_c, \"Square\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1NxdWFyZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQjtBQUVnQjtBQVExQyxNQUFNRSxTQUFnQztRQUFDLEVBQUVDLFVBQVUsRUFBRUMsYUFBYSxFQUFFQyxNQUFNLEVBQUU7SUFDMUUsTUFBTSxFQUFFQyxFQUFFLEVBQUVDLEtBQUssRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUVDLE9BQU8sRUFBRSxHQUFHUDtJQUV4RCxJQUFJUSxVQUFVTixTQUFTLG1CQUFtQjtJQUUxQyxJQUFJRyxZQUFZO1FBQ2RHLFVBQVU7SUFDWixPQUFPLElBQUlELFdBQVdILFNBQVNBLE1BQU1LLElBQUksS0FBSyxRQUFRO1FBQ3BERCxVQUFVO0lBQ1osT0FBTyxJQUFJRixhQUFhO1FBQ3RCLElBQUlGLE9BQU87WUFDUEksVUFBVTtRQUNkO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ0U7UUFDQ0MsV0FBVyw0SUFBb0osT0FBUkg7UUFDdkpJLFNBQVMsSUFBTVgsY0FBY0U7UUFDN0JVLE9BQU9WO2tCQUVOQyx1QkFBUyw4REFBQ04scURBQVlBO1lBQUNNLE9BQU9BO1lBQU9VLFdBQVU7Ozs7Ozs7Ozs7O0FBR3REO0tBeEJNZjtBQTBCTiwrREFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL1NxdWFyZS50c3g/ODIzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3F1YXJlU3RhdGUgfSBmcm9tICdAL3R5cGVzJzsgXG5pbXBvcnQgUGllY2VEaXNwbGF5IGZyb20gJy4vUGllY2VEaXNwbGF5JztcblxuaW50ZXJmYWNlIFNxdWFyZVByb3BzIHtcbiAgc3F1YXJlRGF0YTogU3F1YXJlU3RhdGU7XG4gIG9uU3F1YXJlQ2xpY2s6IChzcXVhcmVJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBpc0Rhcms6IGJvb2xlYW47XG59XG5cbmNvbnN0IFNxdWFyZTogUmVhY3QuRkM8U3F1YXJlUHJvcHM+ID0gKHsgc3F1YXJlRGF0YSwgb25TcXVhcmVDbGljaywgaXNEYXJrIH0pID0+IHtcbiAgY29uc3QgeyBpZCwgcGllY2UsIGlzU2VsZWN0ZWQsIGlzVmFsaWRNb3ZlLCBpc0NoZWNrIH0gPSBzcXVhcmVEYXRhO1xuXG4gIGxldCBiZ0NvbG9yID0gaXNEYXJrID8gJ2JnLWVtZXJhbGQtNzAwJyA6ICdiZy1lbWVyYWxkLTEwMCc7IFxuXG4gIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgYmdDb2xvciA9ICdiZy15ZWxsb3ctNDAwJzsgXG4gIH0gZWxzZSBpZiAoaXNDaGVjayAmJiBwaWVjZSAmJiBwaWVjZS50eXBlID09PSAnS0lORycpIHtcbiAgICBiZ0NvbG9yID0gJ2JnLXJlZC01MDAnOyBcbiAgfSBlbHNlIGlmIChpc1ZhbGlkTW92ZSkge1xuICAgIGlmIChwaWVjZSkgeyBcbiAgICAgICAgYmdDb2xvciA9ICdiZy1yZWQtNDAwJzsgXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17YHctMTAgaC0xMCBzbTp3LTE0IHNtOmgtMTQgbWQ6dy0xNiBtZDpoLTE2IGxnOnctMjAgbGc6aC0yMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlciB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0xNTAgJHtiZ0NvbG9yfWB9XG4gICAgICBvbkNsaWNrPXsoKSA9PiBvblNxdWFyZUNsaWNrKGlkKX1cbiAgICAgIHRpdGxlPXtpZH1cbiAgICA+XG4gICAgICB7cGllY2UgJiYgPFBpZWNlRGlzcGxheSBwaWVjZT17cGllY2V9IHNpemVDbGFzcz1cInRleHQteGwgc206dGV4dC0zeGwgbWQ6dGV4dC00eGwgbGc6dGV4dC01eGxcIiAvPn1cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNxdWFyZTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIlBpZWNlRGlzcGxheSIsIlNxdWFyZSIsInNxdWFyZURhdGEiLCJvblNxdWFyZUNsaWNrIiwiaXNEYXJrIiwiaWQiLCJwaWVjZSIsImlzU2VsZWN0ZWQiLCJpc1ZhbGlkTW92ZSIsImlzQ2hlY2siLCJiZ0NvbG9yIiwidHlwZSIsImRpdiIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJ0aXRsZSIsInNpemVDbGFzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Square.tsx\n"));

/***/ }),

/***/ "./components/StatusBar.tsx":
/*!**********************************!*\
  !*** ./components/StatusBar.tsx ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst StatusBar = (param)=>{\n    let { message } = param;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-3 bg-slate-700 rounded-lg shadow-md text-center\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n            className: \"text-lg font-semibold text-slate-100\",\n            children: message\n        }, void 0, false, {\n            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/StatusBar.tsx\",\n            lineNumber: 10,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/components/StatusBar.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, undefined);\n};\n_c = StatusBar;\n/* harmony default export */ __webpack_exports__[\"default\"] = (StatusBar);\nvar _c;\n$RefreshReg$(_c, \"StatusBar\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL1N0YXR1c0Jhci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBCO0FBTTFCLE1BQU1DLFlBQXNDO1FBQUMsRUFBRUMsT0FBTyxFQUFFO0lBQ3RELHFCQUNFLDhEQUFDQztRQUFJQyxXQUFVO2tCQUNiLDRFQUFDQztZQUFFRCxXQUFVO3NCQUF3Q0Y7Ozs7Ozs7Ozs7O0FBRzNEO0tBTk1EO0FBUU4sK0RBQWVBLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9TdGF0dXNCYXIudHN4P2FhMDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFN0YXR1c0JhclByb3BzIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5jb25zdCBTdGF0dXNCYXI6IFJlYWN0LkZDPFN0YXR1c0JhclByb3BzPiA9ICh7IG1lc3NhZ2UgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicC0zIGJnLXNsYXRlLTcwMCByb3VuZGVkLWxnIHNoYWRvdy1tZCB0ZXh0LWNlbnRlclwiPlxuICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtMTAwXCI+e21lc3NhZ2V9PC9wPlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3RhdHVzQmFyO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiU3RhdHVzQmFyIiwibWVzc2FnZSIsImRpdiIsImNsYXNzTmFtZSIsInAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/StatusBar.tsx\n"));

/***/ }),

/***/ "./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BOARD_COLS: function() { return /* binding */ BOARD_COLS; },\n/* harmony export */   BOARD_ROWS: function() { return /* binding */ BOARD_ROWS; },\n/* harmony export */   COLUMN_NAMES: function() { return /* binding */ COLUMN_NAMES; },\n/* harmony export */   DEFAULT_DIFFICULTY: function() { return /* binding */ DEFAULT_DIFFICULTY; },\n/* harmony export */   INITIAL_KING_POSITION: function() { return /* binding */ INITIAL_KING_POSITION; },\n/* harmony export */   INITIAL_ROOK_POSITIONS: function() { return /* binding */ INITIAL_ROOK_POSITIONS; },\n/* harmony export */   PIECE_UNICODE: function() { return /* binding */ PIECE_UNICODE; },\n/* harmony export */   PROMOTION_PIECES: function() { return /* binding */ PROMOTION_PIECES; }\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./types.ts\");\n\nconst PIECE_UNICODE = {\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE]: {\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING]: \"♔\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN]: \"♕\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK]: \"♖\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP]: \"♗\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT]: \"♘\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN]: \"♙\"\n    },\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK]: {\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING]: \"♚\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN]: \"♛\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK]: \"♜\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP]: \"♝\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT]: \"♞\",\n        [_types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN]: \"♟\"\n    }\n};\nconst INITIAL_ROOK_POSITIONS = {\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE]: {\n        queenSide: \"a1\",\n        kingSide: \"h1\"\n    },\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK]: {\n        queenSide: \"a8\",\n        kingSide: \"h8\"\n    }\n};\nconst INITIAL_KING_POSITION = {\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE]: \"e1\",\n    [_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK]: \"e8\"\n};\nconst BOARD_ROWS = 8;\nconst BOARD_COLS = 8;\nconst COLUMN_NAMES = [\n    \"a\",\n    \"b\",\n    \"c\",\n    \"d\",\n    \"e\",\n    \"f\",\n    \"g\",\n    \"h\"\n];\nconst PROMOTION_PIECES = [\n    _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN,\n    _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK,\n    _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP,\n    _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT\n];\nconst DEFAULT_DIFFICULTY = 2;\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb25zdGFudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW1FO0FBRTVELE1BQU1FLGdCQUErRDtJQUMxRSxDQUFDRCw4Q0FBVUEsQ0FBQ0UsS0FBSyxDQUFDLEVBQUU7UUFDbEIsQ0FBQ0gsNkNBQVNBLENBQUNJLElBQUksQ0FBQyxFQUFFO1FBQ2xCLENBQUNKLDZDQUFTQSxDQUFDSyxLQUFLLENBQUMsRUFBRTtRQUNuQixDQUFDTCw2Q0FBU0EsQ0FBQ00sSUFBSSxDQUFDLEVBQUU7UUFDbEIsQ0FBQ04sNkNBQVNBLENBQUNPLE1BQU0sQ0FBQyxFQUFFO1FBQ3BCLENBQUNQLDZDQUFTQSxDQUFDUSxNQUFNLENBQUMsRUFBRTtRQUNwQixDQUFDUiw2Q0FBU0EsQ0FBQ1MsSUFBSSxDQUFDLEVBQUU7SUFDcEI7SUFDQSxDQUFDUiw4Q0FBVUEsQ0FBQ1MsS0FBSyxDQUFDLEVBQUU7UUFDbEIsQ0FBQ1YsNkNBQVNBLENBQUNJLElBQUksQ0FBQyxFQUFFO1FBQ2xCLENBQUNKLDZDQUFTQSxDQUFDSyxLQUFLLENBQUMsRUFBRTtRQUNuQixDQUFDTCw2Q0FBU0EsQ0FBQ00sSUFBSSxDQUFDLEVBQUU7UUFDbEIsQ0FBQ04sNkNBQVNBLENBQUNPLE1BQU0sQ0FBQyxFQUFFO1FBQ3BCLENBQUNQLDZDQUFTQSxDQUFDUSxNQUFNLENBQUMsRUFBRTtRQUNwQixDQUFDUiw2Q0FBU0EsQ0FBQ1MsSUFBSSxDQUFDLEVBQUU7SUFDcEI7QUFDRixFQUFFO0FBRUssTUFBTUUseUJBQXVGO0lBQ2xHLENBQUNWLDhDQUFVQSxDQUFDRSxLQUFLLENBQUMsRUFBRTtRQUFFUyxXQUFXO1FBQU1DLFVBQVU7SUFBSztJQUN0RCxDQUFDWiw4Q0FBVUEsQ0FBQ1MsS0FBSyxDQUFDLEVBQUU7UUFBRUUsV0FBVztRQUFNQyxVQUFVO0lBQUs7QUFDeEQsRUFBRTtBQUVLLE1BQU1DLHdCQUFvRDtJQUMvRCxDQUFDYiw4Q0FBVUEsQ0FBQ0UsS0FBSyxDQUFDLEVBQUU7SUFDcEIsQ0FBQ0YsOENBQVVBLENBQUNTLEtBQUssQ0FBQyxFQUFFO0FBQ3RCLEVBQUU7QUFFSyxNQUFNSyxhQUFhLEVBQUU7QUFDckIsTUFBTUMsYUFBYSxFQUFFO0FBRXJCLE1BQU1DLGVBQWU7SUFBQztJQUFLO0lBQUs7SUFBSztJQUFLO0lBQUs7SUFBSztJQUFLO0NBQUksQ0FBQztBQUU5RCxNQUFNQyxtQkFBZ0M7SUFDM0NsQiw2Q0FBU0EsQ0FBQ0ssS0FBSztJQUNmTCw2Q0FBU0EsQ0FBQ00sSUFBSTtJQUNkTiw2Q0FBU0EsQ0FBQ08sTUFBTTtJQUNoQlAsNkNBQVNBLENBQUNRLE1BQU07Q0FDakIsQ0FBQztBQUVLLE1BQU1XLHFCQUFpQyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbnN0YW50cy50cz9kZDRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpZWNlVHlwZSwgUGllY2VDb2xvciwgUGllY2UsIERpZmZpY3VsdHkgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IFBJRUNFX1VOSUNPREU6IFJlY29yZDxQaWVjZUNvbG9yLCBSZWNvcmQ8UGllY2VUeXBlLCBzdHJpbmc+PiA9IHtcbiAgW1BpZWNlQ29sb3IuV0hJVEVdOiB7XG4gICAgW1BpZWNlVHlwZS5LSU5HXTogJ+KZlCcsXG4gICAgW1BpZWNlVHlwZS5RVUVFTl06ICfimZUnLFxuICAgIFtQaWVjZVR5cGUuUk9PS106ICfimZYnLFxuICAgIFtQaWVjZVR5cGUuQklTSE9QXTogJ+KZlycsXG4gICAgW1BpZWNlVHlwZS5LTklHSFRdOiAn4pmYJyxcbiAgICBbUGllY2VUeXBlLlBBV05dOiAn4pmZJyxcbiAgfSxcbiAgW1BpZWNlQ29sb3IuQkxBQ0tdOiB7XG4gICAgW1BpZWNlVHlwZS5LSU5HXTogJ+KZmicsXG4gICAgW1BpZWNlVHlwZS5RVUVFTl06ICfimZsnLFxuICAgIFtQaWVjZVR5cGUuUk9PS106ICfimZwnLFxuICAgIFtQaWVjZVR5cGUuQklTSE9QXTogJ+KZnScsXG4gICAgW1BpZWNlVHlwZS5LTklHSFRdOiAn4pmeJyxcbiAgICBbUGllY2VUeXBlLlBBV05dOiAn4pmfJywgLy8gQ2hhbmdlZCBmcm9tIOKZn++4jiB0byDimZ8gZm9yIHdpZGVyIGNvbXBhdGliaWxpdHlcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBJTklUSUFMX1JPT0tfUE9TSVRJT05TOiBSZWNvcmQ8UGllY2VDb2xvciwgUmVjb3JkPCdxdWVlblNpZGUnIHwgJ2tpbmdTaWRlJywgc3RyaW5nPj4gPSB7XG4gIFtQaWVjZUNvbG9yLldISVRFXTogeyBxdWVlblNpZGU6ICdhMScsIGtpbmdTaWRlOiAnaDEnIH0sXG4gIFtQaWVjZUNvbG9yLkJMQUNLXTogeyBxdWVlblNpZGU6ICdhOCcsIGtpbmdTaWRlOiAnaDgnIH0sXG59O1xuXG5leHBvcnQgY29uc3QgSU5JVElBTF9LSU5HX1BPU0lUSU9OOiBSZWNvcmQ8UGllY2VDb2xvciwgc3RyaW5nPiA9IHtcbiAgW1BpZWNlQ29sb3IuV0hJVEVdOiAnZTEnLFxuICBbUGllY2VDb2xvci5CTEFDS106ICdlOCcsXG59O1xuXG5leHBvcnQgY29uc3QgQk9BUkRfUk9XUyA9IDg7XG5leHBvcnQgY29uc3QgQk9BUkRfQ09MUyA9IDg7XG5cbmV4cG9ydCBjb25zdCBDT0xVTU5fTkFNRVMgPSBbJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCddO1xuXG5leHBvcnQgY29uc3QgUFJPTU9USU9OX1BJRUNFUzogUGllY2VUeXBlW10gPSBbXG4gIFBpZWNlVHlwZS5RVUVFTixcbiAgUGllY2VUeXBlLlJPT0ssXG4gIFBpZWNlVHlwZS5CSVNIT1AsXG4gIFBpZWNlVHlwZS5LTklHSFQsXG5dO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9ESUZGSUNVTFRZOiBEaWZmaWN1bHR5ID0gMjsiXSwibmFtZXMiOlsiUGllY2VUeXBlIiwiUGllY2VDb2xvciIsIlBJRUNFX1VOSUNPREUiLCJXSElURSIsIktJTkciLCJRVUVFTiIsIlJPT0siLCJCSVNIT1AiLCJLTklHSFQiLCJQQVdOIiwiQkxBQ0siLCJJTklUSUFMX1JPT0tfUE9TSVRJT05TIiwicXVlZW5TaWRlIiwia2luZ1NpZGUiLCJJTklUSUFMX0tJTkdfUE9TSVRJT04iLCJCT0FSRF9ST1dTIiwiQk9BUkRfQ09MUyIsIkNPTFVNTl9OQU1FUyIsIlBST01PVElPTl9QSUVDRVMiLCJERUZBVUxUX0RJRkZJQ1VMVFkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./constants.ts\n"));

/***/ }),

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/router-reducer-types.js":
/*!********************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/router-reducer-types.js ***!
  \********************************************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n0 && (0);\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    ACTION_FAST_REFRESH: function() {\n        return ACTION_FAST_REFRESH;\n    },\n    ACTION_NAVIGATE: function() {\n        return ACTION_NAVIGATE;\n    },\n    ACTION_PREFETCH: function() {\n        return ACTION_PREFETCH;\n    },\n    ACTION_REFRESH: function() {\n        return ACTION_REFRESH;\n    },\n    ACTION_RESTORE: function() {\n        return ACTION_RESTORE;\n    },\n    ACTION_SERVER_ACTION: function() {\n        return ACTION_SERVER_ACTION;\n    },\n    ACTION_SERVER_PATCH: function() {\n        return ACTION_SERVER_PATCH;\n    },\n    PrefetchCacheEntryStatus: function() {\n        return PrefetchCacheEntryStatus;\n    },\n    PrefetchKind: function() {\n        return PrefetchKind;\n    },\n    isThenable: function() {\n        return isThenable;\n    }\n});\nconst ACTION_REFRESH = \"refresh\";\nconst ACTION_NAVIGATE = \"navigate\";\nconst ACTION_RESTORE = \"restore\";\nconst ACTION_SERVER_PATCH = \"server-patch\";\nconst ACTION_PREFETCH = \"prefetch\";\nconst ACTION_FAST_REFRESH = \"fast-refresh\";\nconst ACTION_SERVER_ACTION = \"server-action\";\nvar PrefetchKind;\n(function(PrefetchKind) {\n    PrefetchKind[\"AUTO\"] = \"auto\";\n    PrefetchKind[\"FULL\"] = \"full\";\n    PrefetchKind[\"TEMPORARY\"] = \"temporary\";\n})(PrefetchKind || (PrefetchKind = {}));\nvar PrefetchCacheEntryStatus;\n(function(PrefetchCacheEntryStatus) {\n    PrefetchCacheEntryStatus[\"fresh\"] = \"fresh\";\n    PrefetchCacheEntryStatus[\"reusable\"] = \"reusable\";\n    PrefetchCacheEntryStatus[\"expired\"] = \"expired\";\n    PrefetchCacheEntryStatus[\"stale\"] = \"stale\";\n})(PrefetchCacheEntryStatus || (PrefetchCacheEntryStatus = {}));\nfunction isThenable(value) {\n    // TODO: We don't gain anything from this abstraction. It's unsound, and only\n    // makes sense in the specific places where we use it. So it's better to keep\n    // the type coercion inline, instead of leaking this to other places in\n    // the codebase.\n    return value && (typeof value === \"object\" || typeof value === \"function\") && typeof value.then === \"function\";\n}\nif ((typeof exports.default === \"function\" || typeof exports.default === \"object\" && exports.default !== null) && typeof exports.default.__esModule === \"undefined\") {\n    Object.defineProperty(exports.default, \"__esModule\", {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=router-reducer-types.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JvdXRlci1yZWR1Y2VyL3JvdXRlci1yZWR1Y2VyLXR5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztJQVlhQSxxQkFBbUI7ZUFBbkJBOztJQUpBQyxpQkFBZTtlQUFmQTs7SUFHQUMsaUJBQWU7ZUFBZkE7O0lBSkFDLGdCQUFjO2VBQWRBOztJQUVBQyxnQkFBYztlQUFkQTs7SUFJQUMsc0JBQW9CO2VBQXBCQTs7SUFIQUMscUJBQW1CO2VBQW5CQTs7Ozs7Ozs7SUF1UUdDLFlBQVU7ZUFBVkE7OztBQTFRVCxNQUFNSixpQkFBaUI7QUFDdkIsTUFBTUYsa0JBQWtCO0FBQ3hCLE1BQU1HLGlCQUFpQjtBQUN2QixNQUFNRSxzQkFBc0I7QUFDNUIsTUFBTUosa0JBQWtCO0FBQ3hCLE1BQU1GLHNCQUFzQjtBQUM1QixNQUFNSyx1QkFBdUI7O1VBdUl4QkcsWUFBQUE7Ozs7R0FBQUEsZ0JBQUFBLENBQUFBLGVBQUFBLENBQUFBLENBQUFBOztVQThEQUMsd0JBQUFBOzs7OztHQUFBQSw0QkFBQUEsQ0FBQUEsMkJBQUFBLENBQUFBLENBQUFBO0FBK0RMLFNBQVNGLFdBQVdHLEtBQVU7SUFDbkMsNkVBQTZFO0lBQzdFLDZFQUE2RTtJQUM3RSx1RUFBdUU7SUFDdkUsZ0JBQWdCO0lBQ2hCLE9BQ0VBLFNBQ0MsUUFBT0EsVUFBVSxZQUFZLE9BQU9BLFVBQVUsZUFDL0MsT0FBT0EsTUFBTUMsSUFBSSxLQUFLO0FBRTFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi8uLi9zcmMvY2xpZW50L2NvbXBvbmVudHMvcm91dGVyLXJlZHVjZXIvcm91dGVyLXJlZHVjZXItdHlwZXMudHM/ZWYxYyJdLCJuYW1lcyI6WyJBQ1RJT05fRkFTVF9SRUZSRVNIIiwiQUNUSU9OX05BVklHQVRFIiwiQUNUSU9OX1BSRUZFVENIIiwiQUNUSU9OX1JFRlJFU0giLCJBQ1RJT05fUkVTVE9SRSIsIkFDVElPTl9TRVJWRVJfQUNUSU9OIiwiQUNUSU9OX1NFUlZFUl9QQVRDSCIsImlzVGhlbmFibGUiLCJQcmVmZXRjaEtpbmQiLCJQcmVmZXRjaENhY2hlRW50cnlTdGF0dXMiLCJ2YWx1ZSIsInRoZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/router-reducer-types.js\n"));

/***/ }),

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/get-domain-locale.js":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/get-domain-locale.js ***!
  \***************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"getDomainLocale\", ({\n    enumerable: true,\n    get: function() {\n        return getDomainLocale;\n    }\n}));\nconst _normalizetrailingslash = __webpack_require__(/*! ./normalize-trailing-slash */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/normalize-trailing-slash.js\");\nconst basePath =  false || \"\";\nfunction getDomainLocale(path, locale, locales, domainLocales) {\n    if (false) {} else {\n        return false;\n    }\n}\nif ((typeof exports.default === \"function\" || typeof exports.default === \"object\" && exports.default !== null) && typeof exports.default.__esModule === \"undefined\") {\n    Object.defineProperty(exports.default, \"__esModule\", {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=get-domain-locale.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9nZXQtZG9tYWluLWxvY2FsZS5qcyIsIm1hcHBpbmdzIjoiOzs7O21EQU9nQkE7OztlQUFBQTs7O29EQUoyQjtBQUUzQyxNQUFNQyxXQUFXQyxNQUFtQyxJQUFlO0FBRTVELFNBQVNGLGdCQUNkSyxJQUFZLEVBQ1pDLE1BQXVCLEVBQ3ZCQyxPQUFrQixFQUNsQkMsYUFBOEI7SUFFOUIsSUFBSU4sS0FBK0IsRUFBRSxFQWdCckMsTUFBTztRQUNMLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi9zcmMvY2xpZW50L2dldC1kb21haW4tbG9jYWxlLnRzPzFkNGUiXSwibmFtZXMiOlsiZ2V0RG9tYWluTG9jYWxlIiwiYmFzZVBhdGgiLCJwcm9jZXNzIiwiZW52IiwiX19ORVhUX1JPVVRFUl9CQVNFUEFUSCIsInBhdGgiLCJsb2NhbGUiLCJsb2NhbGVzIiwiZG9tYWluTG9jYWxlcyIsIl9fTkVYVF9JMThOX1NVUFBPUlQiLCJub3JtYWxpemVMb2NhbGVQYXRoIiwicmVxdWlyZSIsImRldGVjdERvbWFpbkxvY2FsZSIsInRhcmdldCIsImRldGVjdGVkTG9jYWxlIiwiZG9tYWluIiwidW5kZWZpbmVkIiwicHJvdG8iLCJodHRwIiwiZmluYWxMb2NhbGUiLCJkZWZhdWx0TG9jYWxlIiwibm9ybWFsaXplUGF0aFRyYWlsaW5nU2xhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/get-domain-locale.js\n"));

/***/ }),

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.js":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.js ***!
  \**************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/* __next_internal_client_entry_do_not_use__  cjs */ \nvar _s = $RefreshSig$();\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"default\", ({\n    enumerable: true,\n    get: function() {\n        return _default;\n    }\n}));\nconst _interop_require_default = __webpack_require__(/*! @swc/helpers/_/_interop_require_default */ \"./node_modules/.pnpm/@swc+helpers@0.5.5/node_modules/@swc/helpers/esm/_interop_require_default.js\");\nconst _jsxruntime = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js\");\nconst _react = /*#__PURE__*/ _interop_require_default._(__webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\"));\nconst _resolvehref = __webpack_require__(/*! ./resolve-href */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/resolve-href.js\");\nconst _islocalurl = __webpack_require__(/*! ../shared/lib/router/utils/is-local-url */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/is-local-url.js\");\nconst _formaturl = __webpack_require__(/*! ../shared/lib/router/utils/format-url */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/format-url.js\");\nconst _utils = __webpack_require__(/*! ../shared/lib/utils */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/utils.js\");\nconst _addlocale = __webpack_require__(/*! ./add-locale */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/add-locale.js\");\nconst _routercontextsharedruntime = __webpack_require__(/*! ../shared/lib/router-context.shared-runtime */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router-context.shared-runtime.js\");\nconst _approutercontextsharedruntime = __webpack_require__(/*! ../shared/lib/app-router-context.shared-runtime */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.js\");\nconst _useintersection = __webpack_require__(/*! ./use-intersection */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/use-intersection.js\");\nconst _getdomainlocale = __webpack_require__(/*! ./get-domain-locale */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/get-domain-locale.js\");\nconst _addbasepath = __webpack_require__(/*! ./add-base-path */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/add-base-path.js\");\nconst _routerreducertypes = __webpack_require__(/*! ./components/router-reducer/router-reducer-types */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/router-reducer-types.js\");\nconst prefetched = new Set();\nfunction prefetch(router, href, as, options, appOptions, isAppRouter) {\n    if (false) {}\n    // app-router supports external urls out of the box so it shouldn't short-circuit here as support for e.g. `replace` is added in the app-router.\n    if (!isAppRouter && !(0, _islocalurl.isLocalURL)(href)) {\n        return;\n    }\n    // We should only dedupe requests when experimental.optimisticClientCache is\n    // disabled.\n    if (!options.bypassPrefetchedCheck) {\n        const locale = typeof options.locale !== \"undefined\" ? options.locale : \"locale\" in router ? router.locale : undefined;\n        const prefetchedKey = href + \"%\" + as + \"%\" + locale;\n        // If we've already fetched the key, then don't prefetch it again!\n        if (prefetched.has(prefetchedKey)) {\n            return;\n        }\n        // Mark this URL as prefetched.\n        prefetched.add(prefetchedKey);\n    }\n    const doPrefetch = async ()=>{\n        if (isAppRouter) {\n            // note that `appRouter.prefetch()` is currently sync,\n            // so we have to wrap this call in an async function to be able to catch() errors below.\n            return router.prefetch(href, appOptions);\n        } else {\n            return router.prefetch(href, as, options);\n        }\n    };\n    // Prefetch the JSON page if asked (only in the client)\n    // We need to handle a prefetch error here since we may be\n    // loading with priority which can reject but we don't\n    // want to force navigation since this is only a prefetch\n    doPrefetch().catch((err)=>{\n        if (true) {\n            // rethrow to show invalid URL errors\n            throw err;\n        }\n    });\n}\nfunction isModifiedEvent(event) {\n    const eventTarget = event.currentTarget;\n    const target = eventTarget.getAttribute(\"target\");\n    return target && target !== \"_self\" || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey || // triggers resource download\n    event.nativeEvent && event.nativeEvent.which === 2;\n}\nfunction linkClicked(e, router, href, as, replace, shallow, scroll, locale, isAppRouter) {\n    const { nodeName } = e.currentTarget;\n    // anchors inside an svg have a lowercase nodeName\n    const isAnchorNodeName = nodeName.toUpperCase() === \"A\";\n    if (isAnchorNodeName && (isModifiedEvent(e) || // app-router supports external urls out of the box so it shouldn't short-circuit here as support for e.g. `replace` is added in the app-router.\n    !isAppRouter && !(0, _islocalurl.isLocalURL)(href))) {\n        // ignore click for browser’s default behavior\n        return;\n    }\n    e.preventDefault();\n    const navigate = ()=>{\n        // If the router is an NextRouter instance it will have `beforePopState`\n        const routerScroll = scroll != null ? scroll : true;\n        if (\"beforePopState\" in router) {\n            router[replace ? \"replace\" : \"push\"](href, as, {\n                shallow,\n                locale,\n                scroll: routerScroll\n            });\n        } else {\n            router[replace ? \"replace\" : \"push\"](as || href, {\n                scroll: routerScroll\n            });\n        }\n    };\n    if (isAppRouter) {\n        _react.default.startTransition(navigate);\n    } else {\n        navigate();\n    }\n}\nfunction formatStringOrUrl(urlObjOrString) {\n    if (typeof urlObjOrString === \"string\") {\n        return urlObjOrString;\n    }\n    return (0, _formaturl.formatUrl)(urlObjOrString);\n}\n/**\n * A React component that extends the HTML `<a>` element to provide [prefetching](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)\n * and client-side navigation between routes.\n *\n * It is the primary way to navigate between routes in Next.js.\n *\n * Read more: [Next.js docs: `<Link>`](https://nextjs.org/docs/app/api-reference/components/link)\n */ const Link = /*#__PURE__*/ _s(_react.default.forwardRef(_c = _s(function LinkComponent(props, forwardedRef) {\n    _s();\n    let children;\n    const { href: hrefProp, as: asProp, children: childrenProp, prefetch: prefetchProp = null, passHref, replace, shallow, scroll, locale, onClick, onMouseEnter: onMouseEnterProp, onTouchStart: onTouchStartProp, legacyBehavior = false, ...restProps } = props;\n    children = childrenProp;\n    if (legacyBehavior && (typeof children === \"string\" || typeof children === \"number\")) {\n        children = /*#__PURE__*/ (0, _jsxruntime.jsx)(\"a\", {\n            children: children\n        });\n    }\n    const pagesRouter = _react.default.useContext(_routercontextsharedruntime.RouterContext);\n    const appRouter = _react.default.useContext(_approutercontextsharedruntime.AppRouterContext);\n    const router = pagesRouter != null ? pagesRouter : appRouter;\n    // We're in the app directory if there is no pages router.\n    const isAppRouter = !pagesRouter;\n    const prefetchEnabled = prefetchProp !== false;\n    /**\n     * The possible states for prefetch are:\n     * - null: this is the default \"auto\" mode, where we will prefetch partially if the link is in the viewport\n     * - true: we will prefetch if the link is visible and prefetch the full page, not just partially\n     * - false: we will not prefetch if in the viewport at all\n     */ const appPrefetchKind = prefetchProp === null ? _routerreducertypes.PrefetchKind.AUTO : _routerreducertypes.PrefetchKind.FULL;\n    if (true) {\n        function createPropError(args) {\n            return new Error(\"Failed prop type: The prop `\" + args.key + \"` expects a \" + args.expected + \" in `<Link>`, but got `\" + args.actual + \"` instead.\" + ( true ? \"\\nOpen your browser's console to view the Component stack trace.\" : 0));\n        }\n        // TypeScript trick for type-guarding:\n        const requiredPropsGuard = {\n            href: true\n        };\n        const requiredProps = Object.keys(requiredPropsGuard);\n        requiredProps.forEach((key)=>{\n            if (key === \"href\") {\n                if (props[key] == null || typeof props[key] !== \"string\" && typeof props[key] !== \"object\") {\n                    throw createPropError({\n                        key,\n                        expected: \"`string` or `object`\",\n                        actual: props[key] === null ? \"null\" : typeof props[key]\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n        // TypeScript trick for type-guarding:\n        const optionalPropsGuard = {\n            as: true,\n            replace: true,\n            scroll: true,\n            shallow: true,\n            passHref: true,\n            prefetch: true,\n            locale: true,\n            onClick: true,\n            onMouseEnter: true,\n            onTouchStart: true,\n            legacyBehavior: true\n        };\n        const optionalProps = Object.keys(optionalPropsGuard);\n        optionalProps.forEach((key)=>{\n            const valType = typeof props[key];\n            if (key === \"as\") {\n                if (props[key] && valType !== \"string\" && valType !== \"object\") {\n                    throw createPropError({\n                        key,\n                        expected: \"`string` or `object`\",\n                        actual: valType\n                    });\n                }\n            } else if (key === \"locale\") {\n                if (props[key] && valType !== \"string\") {\n                    throw createPropError({\n                        key,\n                        expected: \"`string`\",\n                        actual: valType\n                    });\n                }\n            } else if (key === \"onClick\" || key === \"onMouseEnter\" || key === \"onTouchStart\") {\n                if (props[key] && valType !== \"function\") {\n                    throw createPropError({\n                        key,\n                        expected: \"`function`\",\n                        actual: valType\n                    });\n                }\n            } else if (key === \"replace\" || key === \"scroll\" || key === \"shallow\" || key === \"passHref\" || key === \"prefetch\" || key === \"legacyBehavior\") {\n                if (props[key] != null && valType !== \"boolean\") {\n                    throw createPropError({\n                        key,\n                        expected: \"`boolean`\",\n                        actual: valType\n                    });\n                }\n            } else {\n                // TypeScript trick for type-guarding:\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                const _ = key;\n            }\n        });\n        // This hook is in a conditional but that is ok because `process.env.NODE_ENV` never changes\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const hasWarned = _react.default.useRef(false);\n        if (props.prefetch && !hasWarned.current && !isAppRouter) {\n            hasWarned.current = true;\n            console.warn(\"Next.js auto-prefetches automatically based on viewport. The prefetch attribute is no longer needed. More: https://nextjs.org/docs/messages/prefetch-true-deprecated\");\n        }\n    }\n    if (true) {\n        if (isAppRouter && !asProp) {\n            let href;\n            if (typeof hrefProp === \"string\") {\n                href = hrefProp;\n            } else if (typeof hrefProp === \"object\" && typeof hrefProp.pathname === \"string\") {\n                href = hrefProp.pathname;\n            }\n            if (href) {\n                const hasDynamicSegment = href.split(\"/\").some((segment)=>segment.startsWith(\"[\") && segment.endsWith(\"]\"));\n                if (hasDynamicSegment) {\n                    throw new Error(\"Dynamic href `\" + href + \"` found in <Link> while using the `/app` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href\");\n                }\n            }\n        }\n    }\n    const { href, as } = _react.default.useMemo(()=>{\n        if (!pagesRouter) {\n            const resolvedHref = formatStringOrUrl(hrefProp);\n            return {\n                href: resolvedHref,\n                as: asProp ? formatStringOrUrl(asProp) : resolvedHref\n            };\n        }\n        const [resolvedHref, resolvedAs] = (0, _resolvehref.resolveHref)(pagesRouter, hrefProp, true);\n        return {\n            href: resolvedHref,\n            as: asProp ? (0, _resolvehref.resolveHref)(pagesRouter, asProp) : resolvedAs || resolvedHref\n        };\n    }, [\n        pagesRouter,\n        hrefProp,\n        asProp\n    ]);\n    const previousHref = _react.default.useRef(href);\n    const previousAs = _react.default.useRef(as);\n    // This will return the first child, if multiple are provided it will throw an error\n    let child;\n    if (legacyBehavior) {\n        if (true) {\n            if (onClick) {\n                console.warn('\"onClick\" was passed to <Link> with `href` of `' + hrefProp + '` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link');\n            }\n            if (onMouseEnterProp) {\n                console.warn('\"onMouseEnter\" was passed to <Link> with `href` of `' + hrefProp + '` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link');\n            }\n            try {\n                child = _react.default.Children.only(children);\n            } catch (err) {\n                if (!children) {\n                    throw new Error(\"No children were passed to <Link> with `href` of `\" + hrefProp + \"` but one child is required https://nextjs.org/docs/messages/link-no-children\");\n                }\n                throw new Error(\"Multiple children were passed to <Link> with `href` of `\" + hrefProp + \"` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children\" + ( true ? \" \\nOpen your browser's console to view the Component stack trace.\" : 0));\n            }\n        } else {}\n    } else {\n        if (true) {\n            if ((children == null ? void 0 : children.type) === \"a\") {\n                throw new Error(\"Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor\");\n            }\n        }\n    }\n    const childRef = legacyBehavior ? child && typeof child === \"object\" && child.ref : forwardedRef;\n    const [setIntersectionRef, isVisible, resetVisible] = (0, _useintersection.useIntersection)({\n        rootMargin: \"200px\"\n    });\n    const setRef = _react.default.useCallback((el)=>{\n        // Before the link getting observed, check if visible state need to be reset\n        if (previousAs.current !== as || previousHref.current !== href) {\n            resetVisible();\n            previousAs.current = as;\n            previousHref.current = href;\n        }\n        setIntersectionRef(el);\n        if (childRef) {\n            if (typeof childRef === \"function\") childRef(el);\n            else if (typeof childRef === \"object\") {\n                childRef.current = el;\n            }\n        }\n    }, [\n        as,\n        childRef,\n        href,\n        resetVisible,\n        setIntersectionRef\n    ]);\n    // Prefetch the URL if we haven't already and it's visible.\n    _react.default.useEffect(()=>{\n        // in dev, we only prefetch on hover to avoid wasting resources as the prefetch will trigger compiling the page.\n        if (true) {\n            return;\n        }\n        if (!router) {\n            return;\n        }\n        // If we don't need to prefetch the URL, don't do prefetch.\n        if (!isVisible || !prefetchEnabled) {\n            return;\n        }\n        // Prefetch the URL.\n        prefetch(router, href, as, {\n            locale\n        }, {\n            kind: appPrefetchKind\n        }, isAppRouter);\n    }, [\n        as,\n        href,\n        isVisible,\n        locale,\n        prefetchEnabled,\n        pagesRouter == null ? void 0 : pagesRouter.locale,\n        router,\n        isAppRouter,\n        appPrefetchKind\n    ]);\n    const childProps = {\n        ref: setRef,\n        onClick (e) {\n            if (true) {\n                if (!e) {\n                    throw new Error('Component rendered inside next/link has to pass click event to \"onClick\" prop.');\n                }\n            }\n            if (!legacyBehavior && typeof onClick === \"function\") {\n                onClick(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onClick === \"function\") {\n                child.props.onClick(e);\n            }\n            if (!router) {\n                return;\n            }\n            if (e.defaultPrevented) {\n                return;\n            }\n            linkClicked(e, router, href, as, replace, shallow, scroll, locale, isAppRouter);\n        },\n        onMouseEnter (e) {\n            if (!legacyBehavior && typeof onMouseEnterProp === \"function\") {\n                onMouseEnterProp(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onMouseEnter === \"function\") {\n                child.props.onMouseEnter(e);\n            }\n            if (!router) {\n                return;\n            }\n            if ((!prefetchEnabled || \"development\" === \"development\") && isAppRouter) {\n                return;\n            }\n            prefetch(router, href, as, {\n                locale,\n                priority: true,\n                // @see {https://github.com/vercel/next.js/discussions/40268?sort=top#discussioncomment-3572642}\n                bypassPrefetchedCheck: true\n            }, {\n                kind: appPrefetchKind\n            }, isAppRouter);\n        },\n        onTouchStart:  false ? 0 : function onTouchStart(e) {\n            if (!legacyBehavior && typeof onTouchStartProp === \"function\") {\n                onTouchStartProp(e);\n            }\n            if (legacyBehavior && child.props && typeof child.props.onTouchStart === \"function\") {\n                child.props.onTouchStart(e);\n            }\n            if (!router) {\n                return;\n            }\n            if (!prefetchEnabled && isAppRouter) {\n                return;\n            }\n            prefetch(router, href, as, {\n                locale,\n                priority: true,\n                // @see {https://github.com/vercel/next.js/discussions/40268?sort=top#discussioncomment-3572642}\n                bypassPrefetchedCheck: true\n            }, {\n                kind: appPrefetchKind\n            }, isAppRouter);\n        }\n    };\n    // If child is an <a> tag and doesn't have a href attribute, or if the 'passHref' property is\n    // defined, we specify the current 'href', so that repetition is not needed by the user.\n    // If the url is absolute, we can bypass the logic to prepend the domain and locale.\n    if ((0, _utils.isAbsoluteUrl)(as)) {\n        childProps.href = as;\n    } else if (!legacyBehavior || passHref || child.type === \"a\" && !(\"href\" in child.props)) {\n        const curLocale = typeof locale !== \"undefined\" ? locale : pagesRouter == null ? void 0 : pagesRouter.locale;\n        // we only render domain locales if we are currently on a domain locale\n        // so that locale links are still visitable in development/preview envs\n        const localeDomain = (pagesRouter == null ? void 0 : pagesRouter.isLocaleDomain) && (0, _getdomainlocale.getDomainLocale)(as, curLocale, pagesRouter == null ? void 0 : pagesRouter.locales, pagesRouter == null ? void 0 : pagesRouter.domainLocales);\n        childProps.href = localeDomain || (0, _addbasepath.addBasePath)((0, _addlocale.addLocale)(as, curLocale, pagesRouter == null ? void 0 : pagesRouter.defaultLocale));\n    }\n    return legacyBehavior ? /*#__PURE__*/ _react.default.cloneElement(child, childProps) : /*#__PURE__*/ (0, _jsxruntime.jsx)(\"a\", {\n        ...restProps,\n        ...childProps,\n        children: children\n    });\n}, \"wKD5mb5mk47bkaStGb/Fvd6RWZE=\")), \"wKD5mb5mk47bkaStGb/Fvd6RWZE=\");\n_c1 = Link;\nconst _default = Link;\nif ((typeof exports.default === \"function\" || typeof exports.default === \"object\" && exports.default !== null) && typeof exports.default.__esModule === \"undefined\") {\n    Object.defineProperty(exports.default, \"__esModule\", {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=link.js.map\nvar _c, _c1;\n$RefreshReg$(_c, \"Link$_react.default.forwardRef\");\n$RefreshReg$(_c1, \"Link\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9saW5rLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OzZCQVM0QkEseUJBQUFDLENBQUEsQ0FBQUMsbUJBQUFBLENBQUE7eUNBQ0Q7d0NBQ0Q7dUNBQ0k7Ozs7dUNBUUVBLG1CQUFBQSxDQUFBOzZDQUNBOzZDQUNKOztBQTJGNUIsTUFBTUMsc0JBQWlCQyxtQkFBQUEsQ0FBQUEsc05BQUFBO0FBVXZCLE1BQUFELGFBQ0VFLElBQUFBO1NBT0lDLFNBQU9DLE1BQUFBLEVBQVdDLElBQUEsRUFBQUMsRUFBQSxFQUFBQyxPQUFhLEVBQUFDLFVBQUEsRUFBQUMsV0FBQTtRQUNqQyxTQUdGO0lBQ0EsZ0pBQXVDO1FBQ3JDLENBQUFBLGVBQUEsS0FBQUMsWUFBQUMsVUFBQSxFQUFBTixPQUFBO1FBQ0Y7SUFFQTtJQUNBLDRFQUFZO0lBQ1osWUFBS0U7UUFDSCxDQUFBQSxRQUFNSyxxQkFDSjtRQUNBLE1BQUFBLFNBT0YsT0FBTUMsUUFBQUEsTUFBQUEsS0FBZ0JSLGNBQWtCRSxRQUFNSyxNQUFBQSxHQUFBQSxZQUFBQSxTQUFBQSxPQUFBQSxNQUFBQSxHQUFBQTtRQUU5QyxNQUFBQyxnQkFBQVIsT0FBQSxNQUFBQyxLQUFBLE1BQUFNO1FBQ0Esa0VBQW1DO1lBQ2pDWixXQUFBYyxHQUFBLENBQUFELGdCQUFBO1lBQ0Y7UUFFQTtRQUNBYiwrQkFBZWE7UUFDakJiLFdBQUFlLEdBQUEsQ0FBQUY7SUFFQTtVQUNFRyxhQUFJUDtZQUNGQSxhQUFBO1lBQ0E7WUFDQSx3RkFBb0REO1lBQ3RELE9BQU9OLE9BQUFDLFFBQUEsQ0FBQUUsTUFBQUc7ZUFDTDtZQUNGLE9BQUFOLE9BQUFDLFFBQUEsQ0FBQUUsTUFBQUMsSUFBQUM7UUFDRjtJQUVBO0lBQ0E7SUFDQSwwREFBc0Q7SUFDdEQ7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O1dBR1NLLGlCQUFTLGNBQUE1RixPQUFBQyxPQUFBLENBQUE0RixZQUFBLENBQUFyQyxPQUFBd0IsY0FBQSxrQkFBQWMsWUFBQUMsR0FBQTtRQUFHLEdBQUdmLFNBQUFBO3FCQUNuQnpFOztJQUdQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi9zcmMvY2xpZW50L2xpbmsudHN4P2FjZjAiXSwibmFtZXMiOlsiX2ludGVyb3BfcmVxdWlyZV9kZWZhdWx0IiwiXyIsInJlcXVpcmUiLCJwcmVmZXRjaGVkIiwiU2V0Iiwicm91dGVyIiwicHJlZmV0Y2giLCJ3aW5kb3ciLCJocmVmIiwiYXMiLCJvcHRpb25zIiwiYXBwT3B0aW9ucyIsImlzQXBwUm91dGVyIiwiX2lzbG9jYWx1cmwiLCJpc0xvY2FsVVJMIiwibG9jYWxlIiwicHJlZmV0Y2hlZEtleSIsImhhcyIsImFkZCIsImRvUHJlZmV0Y2giLCJlcnIiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJpc01vZGlmaWVkRXZlbnQiLCJldmVudCIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJldmVudFRhcmdldCIsIm5hdGl2ZUV2ZW50Iiwid2hpY2giLCJtZXRhS2V5IiwiY3RybEtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwibGlua0NsaWNrZWQiLCJlIiwicmVwbGFjZSIsInNoYWxsb3ciLCJzY3JvbGwiLCJub2RlTmFtZSIsImlzQW5jaG9yTm9kZU5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsIm5hdmlnYXRlIiwicm91dGVyU2Nyb2xsIiwiUmVhY3QiLCJfcmVhY3QiLCJkZWZhdWx0Iiwic3RhcnRUcmFuc2l0aW9uIiwiZm9ybWF0U3RyaW5nT3JVcmwiLCJ1cmxPYmpPclN0cmluZyIsIl9mb3JtYXR1cmwiLCJmb3JtYXRVcmwiLCJjaGlsZHJlbiIsImNoaWxkcmVuUHJvcCIsImxlZ2FjeUJlaGF2aW9yIiwiYSIsImFwcFJvdXRlciIsInVzZUNvbnRleHQiLCJBcHBSb3V0ZXJDb250ZXh0IiwicGFnZXNSb3V0ZXIiLCJwcmVmZXRjaEVuYWJsZWQiLCJwcmVmZXRjaFByb3AiLCJfcm91dGVycmVkdWNlcnR5cGVzIiwiUHJlZmV0Y2hLaW5kIiwiQVVUTyIsIkZVTEwiLCJhcmdzIiwiY3JlYXRlUHJvcEVycm9yIiwiRXJyb3IiLCJrZXkiLCJleHBlY3RlZCIsImFjdHVhbCIsInJlcXVpcmVkUHJvcHMiLCJPYmplY3QiLCJwcm9wcyIsInBhc3NIcmVmIiwib25DbGljayIsIm9uTW91c2VFbnRlciIsIm9uVG91Y2hTdGFydCIsIm9wdGlvbmFsUHJvcHMiLCJ2YWxUeXBlIiwiaGFzV2FybmVkIiwiY3VycmVudCIsImNvbnNvbGUiLCJ3YXJuIiwiYXNQcm9wIiwiaHJlZlByb3AiLCJwYXRobmFtZSIsImhhc0R5bmFtaWNTZWdtZW50Iiwic3BsaXQiLCJzb21lIiwic2VnbWVudCIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInVzZU1lbW8iLCJyZXNvbHZlZEhyZWYiLCJyZXNvbHZlZEFzIiwiX3Jlc29sdmVocmVmIiwicmVzb2x2ZUhyZWYiLCJwcmV2aW91c0FzIiwidXNlUmVmIiwiY2hpbGQiLCJDaGlsZHJlbiIsIm9ubHkiLCJ0eXBlIiwiY2hpbGRSZWYiLCJzZXRJbnRlcnNlY3Rpb25SZWYiLCJpc1Zpc2libGUiLCJyZXNldFZpc2libGUiLCJ1c2VJbnRlcnNlY3Rpb24iLCJyb290TWFyZ2luIiwiX3VzZWludGVyc2VjdGlvbiIsInNldFJlZiIsInVzZUNhbGxiYWNrIiwiZWwiLCJwcmV2aW91c0hyZWYiLCJ1c2VFZmZlY3QiLCJhcHBQcmVmZXRjaEtpbmQiLCJyZWYiLCJkZWZhdWx0UHJldmVudGVkIiwib25Nb3VzZUVudGVyUHJvcCIsInByaW9yaXR5IiwiYnlwYXNzUHJlZmV0Y2hlZENoZWNrIiwib25Ub3VjaFN0YXJ0UHJvcCIsInVuZGVmaW5lZCIsImNoaWxkUHJvcHMiLCJjdXJMb2NhbGUiLCJpc0xvY2FsZURvbWFpbiIsImxvY2FsZURvbWFpbiIsImFkZEJhc2VQYXRoIiwiYWRkTG9jYWxlIiwiX2dldGRvbWFpbmxvY2FsZSIsImRlZmF1bHRMb2NhbGUiLCJsb2NhbGVzIiwiZG9tYWluTG9jYWxlcyIsIl9hZGRiYXNlcGF0aCIsIl9hZGRsb2NhbGUiLCJyZXN0UHJvcHMiLCJjbG9uZUVsZW1lbnQiLCJfanN4cnVudGltZSIsImpzeCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.js\n"));

/***/ }),

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/use-intersection.js":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/use-intersection.js ***!
  \**************************************************************************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nObject.defineProperty(exports, \"useIntersection\", ({\n    enumerable: true,\n    get: function() {\n        return useIntersection;\n    }\n}));\nconst _react = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\nconst _requestidlecallback = __webpack_require__(/*! ./request-idle-callback */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/request-idle-callback.js\");\nconst hasIntersectionObserver = typeof IntersectionObserver === \"function\";\nconst observers = new Map();\nconst idList = [];\nfunction createObserver(options) {\n    const id = {\n        root: options.root || null,\n        margin: options.rootMargin || \"\"\n    };\n    const existing = idList.find((obj)=>obj.root === id.root && obj.margin === id.margin);\n    let instance;\n    if (existing) {\n        instance = observers.get(existing);\n        if (instance) {\n            return instance;\n        }\n    }\n    const elements = new Map();\n    const observer = new IntersectionObserver((entries)=>{\n        entries.forEach((entry)=>{\n            const callback = elements.get(entry.target);\n            const isVisible = entry.isIntersecting || entry.intersectionRatio > 0;\n            if (callback && isVisible) {\n                callback(isVisible);\n            }\n        });\n    }, options);\n    instance = {\n        id,\n        observer,\n        elements\n    };\n    idList.push(id);\n    observers.set(id, instance);\n    return instance;\n}\nfunction observe(element, callback, options) {\n    const { id, observer, elements } = createObserver(options);\n    elements.set(element, callback);\n    observer.observe(element);\n    return function unobserve() {\n        elements.delete(element);\n        observer.unobserve(element);\n        // Destroy observer when there's nothing left to watch:\n        if (elements.size === 0) {\n            observer.disconnect();\n            observers.delete(id);\n            const index = idList.findIndex((obj)=>obj.root === id.root && obj.margin === id.margin);\n            if (index > -1) {\n                idList.splice(index, 1);\n            }\n        }\n    };\n}\nfunction useIntersection(param) {\n    let { rootRef, rootMargin, disabled } = param;\n    const isDisabled = disabled || !hasIntersectionObserver;\n    const [visible, setVisible] = (0, _react.useState)(false);\n    const elementRef = (0, _react.useRef)(null);\n    const setElement = (0, _react.useCallback)((element)=>{\n        elementRef.current = element;\n    }, []);\n    (0, _react.useEffect)(()=>{\n        if (hasIntersectionObserver) {\n            if (isDisabled || visible) return;\n            const element = elementRef.current;\n            if (element && element.tagName) {\n                const unobserve = observe(element, (isVisible)=>isVisible && setVisible(isVisible), {\n                    root: rootRef == null ? void 0 : rootRef.current,\n                    rootMargin\n                });\n                return unobserve;\n            }\n        } else {\n            if (!visible) {\n                const idleCallback = (0, _requestidlecallback.requestIdleCallback)(()=>setVisible(true));\n                return ()=>(0, _requestidlecallback.cancelIdleCallback)(idleCallback);\n            }\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        isDisabled,\n        rootMargin,\n        rootRef,\n        visible,\n        elementRef.current\n    ]);\n    const resetVisible = (0, _react.useCallback)(()=>{\n        setVisible(false);\n    }, []);\n    return [\n        setElement,\n        visible,\n        resetVisible\n    ];\n}\nif ((typeof exports.default === \"function\" || typeof exports.default === \"object\" && exports.default !== null) && typeof exports.default.__esModule === \"undefined\") {\n    Object.defineProperty(exports.default, \"__esModule\", {\n        value: true\n    });\n    Object.assign(exports.default, exports);\n    module.exports = exports.default;\n} //# sourceMappingURL=use-intersection.js.map\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC91c2UtaW50ZXJzZWN0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7bURBK0ZnQkE7OztlQUFBQTs7O21DQS9GeUM7aURBSWxEO0FBcUJQLE1BQU1DLDBCQUEwQixPQUFPQyx5QkFBeUI7QUFFaEUsTUFBTUMsWUFBWSxJQUFJQztBQUN0QixNQUFNQyxTQUF1QixFQUFFO0FBRS9CLFNBQVNDLGVBQWVDLE9BQW9DO0lBQzFELE1BQU1DLEtBQUs7UUFDVEMsTUFBTUYsUUFBUUUsSUFBSSxJQUFJO1FBQ3RCQyxRQUFRSCxRQUFRSSxVQUFVLElBQUk7SUFDaEM7SUFDQSxNQUFNQyxXQUFXUCxPQUFPUSxJQUFJLENBQzFCLENBQUNDLE1BQVFBLElBQUlMLElBQUksS0FBS0QsR0FBR0MsSUFBSSxJQUFJSyxJQUFJSixNQUFNLEtBQUtGLEdBQUdFLE1BQU07SUFFM0QsSUFBSUs7SUFFSixJQUFJSCxVQUFVO1FBQ1pHLFdBQVdaLFVBQVVhLEdBQUcsQ0FBQ0o7UUFDekIsSUFBSUcsVUFBVTtZQUNaLE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLE1BQU1FLFdBQVcsSUFBSWI7SUFDckIsTUFBTWMsV0FBVyxJQUFJaEIscUJBQXFCLENBQUNpQjtRQUN6Q0EsUUFBUUMsT0FBTyxDQUFDLENBQUNDO1lBQ2YsTUFBTUMsV0FBV0wsU0FBU0QsR0FBRyxDQUFDSyxNQUFNRSxNQUFNO1lBQzFDLE1BQU1DLFlBQVlILE1BQU1JLGNBQWMsSUFBSUosTUFBTUssaUJBQWlCLEdBQUc7WUFDcEUsSUFBSUosWUFBWUUsV0FBVztnQkFDekJGLFNBQVNFO1lBQ1g7UUFDRjtJQUNGLEdBQUdqQjtJQUNIUSxXQUFXO1FBQ1RQO1FBQ0FVO1FBQ0FEO0lBQ0Y7SUFFQVosT0FBT3NCLElBQUksQ0FBQ25CO0lBQ1pMLFVBQVV5QixHQUFHLENBQUNwQixJQUFJTztJQUNsQixPQUFPQTtBQUNUO0FBRUEsU0FBU2MsUUFDUEMsT0FBZ0IsRUFDaEJSLFFBQXlCLEVBQ3pCZixPQUFvQztJQUVwQyxNQUFNLEVBQUVDLEVBQUUsRUFBRVUsUUFBUSxFQUFFRCxRQUFRLEVBQUUsR0FBR1gsZUFBZUM7SUFDbERVLFNBQVNXLEdBQUcsQ0FBQ0UsU0FBU1I7SUFFdEJKLFNBQVNXLE9BQU8sQ0FBQ0M7SUFDakIsT0FBTyxTQUFTQztRQUNkZCxTQUFTZSxNQUFNLENBQUNGO1FBQ2hCWixTQUFTYSxTQUFTLENBQUNEO1FBRW5CLHVEQUF1RDtRQUN2RCxJQUFJYixTQUFTZ0IsSUFBSSxLQUFLLEdBQUc7WUFDdkJmLFNBQVNnQixVQUFVO1lBQ25CL0IsVUFBVTZCLE1BQU0sQ0FBQ3hCO1lBQ2pCLE1BQU0yQixRQUFROUIsT0FBTytCLFNBQVMsQ0FDNUIsQ0FBQ3RCLE1BQVFBLElBQUlMLElBQUksS0FBS0QsR0FBR0MsSUFBSSxJQUFJSyxJQUFJSixNQUFNLEtBQUtGLEdBQUdFLE1BQU07WUFFM0QsSUFBSXlCLFFBQVEsQ0FBQyxHQUFHO2dCQUNkOUIsT0FBT2dDLE1BQU0sQ0FBQ0YsT0FBTztZQUN2QjtRQUNGO0lBQ0Y7QUFDRjtBQUVPLFNBQVNuQyxnQkFBbUNzQyxLQUlqQztJQUppQyxNQUNqREMsT0FBTyxFQUNQNUIsVUFBVSxFQUNWNkIsUUFBUSxFQUNRLEdBSmlDRjtJQUtqRCxNQUFNRyxhQUFzQkQsWUFBWSxDQUFDdkM7SUFFekMsTUFBTSxDQUFDeUMsU0FBU0MsV0FBVyxHQUFHQyxDQUFBQSxHQUFBQSxPQUFBQSxRQUFRLEVBQUM7SUFDdkMsTUFBTUMsYUFBYUMsQ0FBQUEsR0FBQUEsT0FBQUEsTUFBTSxFQUFXO0lBQ3BDLE1BQU1DLGFBQWFDLENBQUFBLEdBQUFBLE9BQUFBLFdBQVcsRUFBQyxDQUFDbEI7UUFDOUJlLFdBQVdJLE9BQU8sR0FBR25CO0lBQ3ZCLEdBQUcsRUFBRTtJQUVMb0IsQ0FBQUEsR0FBQUEsT0FBQUEsU0FBUyxFQUFDO1FBQ1IsSUFBSWpELHlCQUF5QjtZQUMzQixJQUFJd0MsY0FBY0MsU0FBUztZQUUzQixNQUFNWixVQUFVZSxXQUFXSSxPQUFPO1lBQ2xDLElBQUluQixXQUFXQSxRQUFRcUIsT0FBTyxFQUFFO2dCQUM5QixNQUFNcEIsWUFBWUYsUUFDaEJDLFNBQ0EsQ0FBQ04sWUFBY0EsYUFBYW1CLFdBQVduQixZQUN2QztvQkFBRWYsTUFBTThCLFdBQUFBLE9BQUFBLEtBQUFBLElBQUFBLFFBQVNVLE9BQU87b0JBQUV0QztnQkFBVztnQkFHdkMsT0FBT29CO1lBQ1Q7UUFDRixPQUFPO1lBQ0wsSUFBSSxDQUFDVyxTQUFTO2dCQUNaLE1BQU1VLGVBQWVDLENBQUFBLEdBQUFBLHFCQUFBQSxtQkFBbUIsRUFBQyxJQUFNVixXQUFXO2dCQUMxRCxPQUFPLElBQU1XLENBQUFBLEdBQUFBLHFCQUFBQSxrQkFBa0IsRUFBQ0Y7WUFDbEM7UUFDRjtJQUNBLHVEQUF1RDtJQUN6RCxHQUFHO1FBQUNYO1FBQVk5QjtRQUFZNEI7UUFBU0c7UUFBU0csV0FBV0ksT0FBTztLQUFDO0lBRWpFLE1BQU1NLGVBQWVQLENBQUFBLEdBQUFBLE9BQUFBLFdBQVcsRUFBQztRQUMvQkwsV0FBVztJQUNiLEdBQUcsRUFBRTtJQUVMLE9BQU87UUFBQ0k7UUFBWUw7UUFBU2E7S0FBYTtBQUM1QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vc3JjL2NsaWVudC91c2UtaW50ZXJzZWN0aW9uLnRzeD81N2VlIl0sIm5hbWVzIjpbInVzZUludGVyc2VjdGlvbiIsImhhc0ludGVyc2VjdGlvbk9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlcnMiLCJNYXAiLCJpZExpc3QiLCJjcmVhdGVPYnNlcnZlciIsIm9wdGlvbnMiLCJpZCIsInJvb3QiLCJtYXJnaW4iLCJyb290TWFyZ2luIiwiZXhpc3RpbmciLCJmaW5kIiwib2JqIiwiaW5zdGFuY2UiLCJnZXQiLCJlbGVtZW50cyIsIm9ic2VydmVyIiwiZW50cmllcyIsImZvckVhY2giLCJlbnRyeSIsImNhbGxiYWNrIiwidGFyZ2V0IiwiaXNWaXNpYmxlIiwiaXNJbnRlcnNlY3RpbmciLCJpbnRlcnNlY3Rpb25SYXRpbyIsInB1c2giLCJzZXQiLCJvYnNlcnZlIiwiZWxlbWVudCIsInVub2JzZXJ2ZSIsImRlbGV0ZSIsInNpemUiLCJkaXNjb25uZWN0IiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJzcGxpY2UiLCJwYXJhbSIsInJvb3RSZWYiLCJkaXNhYmxlZCIsImlzRGlzYWJsZWQiLCJ2aXNpYmxlIiwic2V0VmlzaWJsZSIsInVzZVN0YXRlIiwiZWxlbWVudFJlZiIsInVzZVJlZiIsInNldEVsZW1lbnQiLCJ1c2VDYWxsYmFjayIsImN1cnJlbnQiLCJ1c2VFZmZlY3QiLCJ0YWdOYW1lIiwiaWRsZUNhbGxiYWNrIiwicmVxdWVzdElkbGVDYWxsYmFjayIsImNhbmNlbElkbGVDYWxsYmFjayIsInJlc2V0VmlzaWJsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/use-intersection.js\n"));

/***/ }),

/***/ "./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/.pnpm/react@18.3.1/node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/head */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/head.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/link */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_Board__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/Board */ \"./components/Board.tsx\");\n/* harmony import */ var _components_GameControls__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/GameControls */ \"./components/GameControls.tsx\");\n/* harmony import */ var _components_StatusBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/StatusBar */ \"./components/StatusBar.tsx\");\n/* harmony import */ var _components_PromotionModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/PromotionModal */ \"./components/PromotionModal.tsx\");\n/* harmony import */ var _components_CookieBanner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/CookieBanner */ \"./components/CookieBanner.tsx\");\n/* harmony import */ var _services_chessLogic__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/services/chessLogic */ \"./services/chessLogic.ts\");\n/* harmony import */ var _services_geminiService__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/services/geminiService */ \"./services/geminiService.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/types */ \"./types.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/constants */ \"./constants.ts\");\n/* harmony import */ var _utils_boardUtils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/utils/boardUtils */ \"./utils/boardUtils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst HomePage = ()=>{\n    _s();\n    const initialLogicInstance = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new _services_chessLogic__WEBPACK_IMPORTED_MODULE_9__.ChessLogic(), []);\n    const [chessLogicInstance, setChessLogicInstance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialLogicInstance);\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(()=>getInitialGameState(initialLogicInstance));\n    const [difficulty, setDifficulty] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_constants__WEBPACK_IMPORTED_MODULE_12__.DEFAULT_DIFFICULTY);\n    const [isAITurn, setIsAITurn] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isGameInProgress, setIsGameInProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showCookieBanner, setShowCookieBanner] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const consent = localStorage.getItem(\"cookieConsent\");\n        if (!consent) {\n            setShowCookieBanner(true);\n        }\n    }, []);\n    const handleAcceptCookies = ()=>{\n        localStorage.setItem(\"cookieConsent\", \"accepted\");\n        setShowCookieBanner(false);\n    };\n    const handleDeclineCookies = ()=>{\n        localStorage.setItem(\"cookieConsent\", \"declined\");\n        setShowCookieBanner(false);\n    };\n    function getInitialGameState(logicInstance) {\n        const initialBoardPieces = logicInstance.getBoard();\n        const fullBoardState = [];\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_12__.BOARD_ROWS; r++){\n            const rowSquares = [];\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_12__.BOARD_COLS; c++){\n                const id = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_13__.getSquareId)(r, c);\n                rowSquares.push({\n                    id,\n                    piece: initialBoardPieces[r][c],\n                    isValidMove: false,\n                    isCheck: false,\n                    isSelected: false\n                });\n            }\n            fullBoardState.push(rowSquares);\n        }\n        return {\n            boardState: fullBoardState,\n            currentPlayer: logicInstance.getCurrentPlayer(),\n            castlingAvailability: logicInstance.getCastlingAvailability(),\n            enPassantTarget: logicInstance.getEnPassantTarget(),\n            halfMoveClock: logicInstance.getHalfMoveClock(),\n            fullMoveNumber: logicInstance.getMoveNumber(),\n            selectedSquare: null,\n            validMoves: [],\n            isCheck: false,\n            isCheckmate: false,\n            isStalemate: false,\n            isDraw: false,\n            winner: null,\n            promotingPawn: null,\n            gameStatusMessage: \"Select difficulty and click 'Start New Game'. White to move.\",\n            moveHistory: []\n        };\n    }\n    const findKingSquare = (kingColor, board)=>{\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_12__.BOARD_ROWS; r++){\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_12__.BOARD_COLS; c++){\n                const piece = board[r][c];\n                if (piece && piece.type === _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.KING && piece.color === kingColor) {\n                    return (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_13__.getSquareId)(r, c);\n                }\n            }\n        }\n        return null;\n    };\n    const performMove = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((move)=>{\n        const currentInstance = chessLogicInstance;\n        const moveSuccessful = currentInstance.makeMove(move);\n        if (moveSuccessful) {\n            setIsGameInProgress(true);\n            const playerWhoseTurnIsNext = currentInstance.getCurrentPlayer();\n            const playerWhoJustMoved = playerWhoseTurnIsNext === _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE;\n            const checkmate = currentInstance.isCheckmate(playerWhoseTurnIsNext);\n            const stalemate = currentInstance.isStalemate(playerWhoseTurnIsNext);\n            setGameState((prev)=>({\n                    ...prev,\n                    currentPlayer: playerWhoseTurnIsNext,\n                    castlingAvailability: currentInstance.getCastlingAvailability(),\n                    enPassantTarget: currentInstance.getEnPassantTarget(),\n                    halfMoveClock: currentInstance.getHalfMoveClock(),\n                    fullMoveNumber: currentInstance.getMoveNumber(),\n                    selectedSquare: null,\n                    validMoves: [],\n                    isCheck: currentInstance.isKingInCheck(playerWhoseTurnIsNext),\n                    isCheckmate: checkmate,\n                    isStalemate: stalemate,\n                    winner: checkmate ? playerWhoJustMoved : null,\n                    moveHistory: [\n                        ...prev.moveHistory,\n                        move\n                    ],\n                    promotingPawn: null\n                }));\n            if (!checkmate && !stalemate) {\n                setIsAITurn(playerWhoseTurnIsNext === _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.BLACK);\n            } else {\n                setIsAITurn(false);\n            }\n        } else {\n            console.error(\"Move failed in chessLogicInstance.makeMove for move:\", move);\n            setGameState((prev)=>({\n                    ...prev,\n                    selectedSquare: null,\n                    validMoves: []\n                }));\n        }\n    }, [\n        chessLogicInstance\n    ]);\n    const handleSquareClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((squareId)=>{\n        if (isAITurn || gameState.isCheckmate || gameState.isStalemate || gameState.promotingPawn || !isGameInProgress) return;\n        const pieceOnClickedSquare = chessLogicInstance.getPieceAt(squareId);\n        if (gameState.selectedSquare) {\n            if (gameState.validMoves.includes(squareId)) {\n                const move = {\n                    from: gameState.selectedSquare,\n                    to: squareId\n                };\n                const fromPiece = chessLogicInstance.getPieceAt(gameState.selectedSquare);\n                const toCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_13__.getSquareCoordinates)(squareId);\n                if ((fromPiece === null || fromPiece === void 0 ? void 0 : fromPiece.type) === _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.PAWN && toCoords && (fromPiece.color === _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE && toCoords.row === 0 || fromPiece.color === _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.BLACK && toCoords.row === _constants__WEBPACK_IMPORTED_MODULE_12__.BOARD_ROWS - 1)) {\n                    setGameState((prev)=>({\n                            ...prev,\n                            promotingPawn: {\n                                from: gameState.selectedSquare,\n                                to: squareId\n                            }\n                        }));\n                    return;\n                }\n                performMove(move);\n            } else {\n                if (pieceOnClickedSquare && pieceOnClickedSquare.color === chessLogicInstance.getCurrentPlayer()) {\n                    const newValidMoves = chessLogicInstance.getValidMovesForPiece(squareId);\n                    setGameState((prev)=>({\n                            ...prev,\n                            selectedSquare: squareId,\n                            validMoves: newValidMoves\n                        }));\n                } else {\n                    setGameState((prev)=>({\n                            ...prev,\n                            selectedSquare: null,\n                            validMoves: []\n                        }));\n                }\n            }\n        } else {\n            if (pieceOnClickedSquare && pieceOnClickedSquare.color === chessLogicInstance.getCurrentPlayer()) {\n                const validMoves = chessLogicInstance.getValidMovesForPiece(squareId);\n                setGameState((prev)=>({\n                        ...prev,\n                        selectedSquare: squareId,\n                        validMoves: validMoves\n                    }));\n            }\n        }\n    }, [\n        isAITurn,\n        gameState.isCheckmate,\n        gameState.isStalemate,\n        gameState.promotingPawn,\n        gameState.selectedSquare,\n        gameState.validMoves,\n        chessLogicInstance,\n        performMove,\n        isGameInProgress\n    ]);\n    const handlePromotion = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((promotedPieceType)=>{\n        if (!gameState.promotingPawn) return;\n        const move = {\n            ...gameState.promotingPawn,\n            promotion: promotedPieceType\n        };\n        performMove(move);\n    }, [\n        gameState.promotingPawn,\n        performMove\n    ]);\n    const resetGame = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const newLogicInstance = new _services_chessLogic__WEBPACK_IMPORTED_MODULE_9__.ChessLogic();\n        setChessLogicInstance(newLogicInstance);\n        setGameState(getInitialGameState(newLogicInstance));\n        setIsAITurn(false);\n        setIsGameInProgress(false);\n    }, []);\n    const startGame = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const newLogicInstance = new _services_chessLogic__WEBPACK_IMPORTED_MODULE_9__.ChessLogic();\n        setChessLogicInstance(newLogicInstance);\n        setGameState((prev)=>({\n                ...getInitialGameState(newLogicInstance),\n                gameStatusMessage: \"Game started. White to move.\"\n            }));\n        setIsAITurn(false);\n        setIsGameInProgress(true);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const currentLogicPlayer = chessLogicInstance.getCurrentPlayer();\n        const newBoardPieces = chessLogicInstance.getBoard();\n        const isCurrentlyInCheck = chessLogicInstance.isKingInCheck(currentLogicPlayer, newBoardPieces);\n        let statusMessage;\n        if (gameState.isCheckmate) {\n            const winnerColor = gameState.winner;\n            statusMessage = \"Checkmate! \".concat(winnerColor ? winnerColor.charAt(0).toUpperCase() + winnerColor.slice(1) : \"\", \" wins!\");\n        } else if (gameState.isStalemate) {\n            statusMessage = \"Stalemate! It's a draw.\";\n        } else if (isCurrentlyInCheck) {\n            statusMessage = \"\".concat(currentLogicPlayer.charAt(0).toUpperCase() + currentLogicPlayer.slice(1), \" is in Check!\");\n        } else if (!isGameInProgress && chessLogicInstance.getMoveNumber() === 1 && currentLogicPlayer === _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE && !gameState.winner) {\n            statusMessage = \"Select difficulty and click 'Start New Game'. White to move.\";\n        } else {\n            statusMessage = \"\".concat(currentLogicPlayer.charAt(0).toUpperCase() + currentLogicPlayer.slice(1), \"'s turn.\");\n        }\n        const kingSquareId = findKingSquare(currentLogicPlayer, newBoardPieces);\n        setGameState((prev)=>{\n            const updatedFullBoardState = prev.boardState.map((row, rIndex)=>row.map((sq, cIndex)=>{\n                    const currentSquareId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_13__.getSquareId)(rIndex, cIndex);\n                    const pieceOnSquare = newBoardPieces[rIndex][cIndex];\n                    return {\n                        ...sq,\n                        id: currentSquareId,\n                        piece: pieceOnSquare,\n                        isCheck: isCurrentlyInCheck && kingSquareId === currentSquareId && (pieceOnSquare === null || pieceOnSquare === void 0 ? void 0 : pieceOnSquare.type) === _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.KING,\n                        isSelected: prev.selectedSquare === currentSquareId,\n                        isValidMove: prev.validMoves.includes(currentSquareId)\n                    };\n                }));\n            return {\n                ...prev,\n                boardState: updatedFullBoardState,\n                currentPlayer: currentLogicPlayer,\n                isCheck: isCurrentlyInCheck,\n                gameStatusMessage: statusMessage,\n                castlingAvailability: chessLogicInstance.getCastlingAvailability(),\n                enPassantTarget: chessLogicInstance.getEnPassantTarget(),\n                fullMoveNumber: chessLogicInstance.getMoveNumber(),\n                halfMoveClock: chessLogicInstance.getHalfMoveClock()\n            };\n        });\n    }, [\n        chessLogicInstance,\n        gameState.selectedSquare,\n        gameState.validMoves,\n        isGameInProgress,\n        gameState.isCheckmate,\n        gameState.isStalemate,\n        gameState.winner\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let timeoutId;\n        if (isAITurn && !gameState.isCheckmate && !gameState.isStalemate && isGameInProgress) {\n            const aiPlayerColor = chessLogicInstance.getCurrentPlayer();\n            if (aiPlayerColor !== _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.BLACK) {\n                console.warn(\"AI turn inconsistency: Expected Black, got \".concat(aiPlayerColor, \". Resetting AI turn.\"));\n                setIsAITurn(false);\n                return;\n            }\n            const validMovesForAIPlayer = chessLogicInstance.getAllValidMovesForPlayer(aiPlayerColor);\n            const validMovesUci = validMovesForAIPlayer.map((m)=>{\n                let uci = \"\".concat(m.from).concat(m.to);\n                if (m.promotion) uci += m.promotion.charAt(0).toLowerCase();\n                return uci;\n            });\n            if (validMovesUci.length === 0) {\n                const isKingInCheckForAI = chessLogicInstance.isKingInCheck(aiPlayerColor);\n                if (isKingInCheckForAI) setGameState((prev)=>({\n                        ...prev,\n                        isCheckmate: true,\n                        winner: _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE,\n                        gameStatusMessage: \"Checkmate! White wins.\"\n                    }));\n                else setGameState((prev)=>({\n                        ...prev,\n                        isStalemate: true,\n                        gameStatusMessage: \"Stalemate! It's a draw.\"\n                    }));\n                setIsAITurn(false);\n                return;\n            }\n            const aiThinkTime = Math.max(100, 100 * difficulty);\n            timeoutId = window.setTimeout(async ()=>{\n                if (gameState.isCheckmate || gameState.isStalemate || !isGameInProgress || !isAITurn) {\n                    if (isAITurn) setIsAITurn(false);\n                    return;\n                }\n                let aiChosenUci = await (0,_services_geminiService__WEBPACK_IMPORTED_MODULE_10__.getAIMove)(chessLogicInstance, difficulty, validMovesUci);\n                if (!aiChosenUci || !validMovesUci.includes(aiChosenUci)) {\n                    if (validMovesUci.length > 0) {\n                        const originalChoice = aiChosenUci;\n                        aiChosenUci = validMovesUci[Math.floor(Math.random() * validMovesUci.length)];\n                        console.warn(\"AI service chose an invalid ('\".concat(originalChoice, \"') or no move. Forced random valid move: \").concat(aiChosenUci, \".\"));\n                    } else {\n                        console.error(\"AI Turn Critical: No valid moves available.\");\n                        setIsAITurn(false);\n                        const isKingInCheckForAI = chessLogicInstance.isKingInCheck(aiPlayerColor);\n                        if (isKingInCheckForAI && !gameState.isCheckmate) setGameState((prev)=>({\n                                ...prev,\n                                isCheckmate: true,\n                                winner: _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE,\n                                gameStatusMessage: \"Checkmate! White wins (emergency).\"\n                            }));\n                        else if (!isKingInCheckForAI && !gameState.isStalemate) setGameState((prev)=>({\n                                ...prev,\n                                isStalemate: true,\n                                gameStatusMessage: \"Stalemate! (emergency).\"\n                            }));\n                        return;\n                    }\n                }\n                if (gameState.isCheckmate || gameState.isStalemate || !isGameInProgress || !isAITurn) {\n                    if (isAITurn) setIsAITurn(false);\n                    return;\n                }\n                if (aiChosenUci) {\n                    const from = aiChosenUci.substring(0, 2);\n                    const to = aiChosenUci.substring(2, 4);\n                    const promotionChar = aiChosenUci.length === 5 ? aiChosenUci.charAt(4) : undefined;\n                    let promotionPiece = undefined;\n                    if (promotionChar) {\n                        switch(promotionChar){\n                            case \"q\":\n                                promotionPiece = _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.QUEEN;\n                                break;\n                            case \"r\":\n                                promotionPiece = _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.ROOK;\n                                break;\n                            case \"b\":\n                                promotionPiece = _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.BISHOP;\n                                break;\n                            case \"n\":\n                                promotionPiece = _types__WEBPACK_IMPORTED_MODULE_11__.PieceType.KNIGHT;\n                                break;\n                        }\n                    }\n                    performMove({\n                        from,\n                        to,\n                        promotion: promotionPiece\n                    });\n                } else {\n                    console.error(\"AI failed to select a move.\");\n                    setIsAITurn(false);\n                }\n            }, aiThinkTime);\n        }\n        return ()=>{\n            if (timeoutId) window.clearTimeout(timeoutId);\n        };\n    }, [\n        isAITurn,\n        gameState.isCheckmate,\n        gameState.isStalemate,\n        chessLogicInstance,\n        difficulty,\n        performMove,\n        isGameInProgress,\n        gameState.currentPlayer\n    ]);\n    const handleDifficultyChange = (level)=>{\n        if (!isGameInProgress) setDifficulty(level);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_2___default()), {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                    children: \"Naga Codex AI Chess\"\n                }, void 0, false, {\n                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                    lineNumber: 318,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                lineNumber: 317,\n                columnNumber: 5\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"min-h-screen bg-slate-800 flex flex-col items-center justify-center p-2 sm:p-4 selection:bg-emerald-500 selection:text-white\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                        className: \"flex flex-col md:flex-row items-center md:items-start gap-4 sm:gap-6 w-full max-w-4xl mx-auto\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex flex-col items-center w-full md:w-auto\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                                        className: \"mb-4 sm:mb-6 text-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"flex items-center justify-center\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                    src: \"/logo.png\",\n                                                    alt: \"Naga Apparel Logo\",\n                                                    className: \"h-10 sm:h-12 md:h-14 lg:h-16 w-auto mr-2 sm:mr-3\",\n                                                    \"aria-hidden\": \"true\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                                    lineNumber: 328,\n                                                    columnNumber: 15\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                                    className: \"font-dynapuff text-4xl sm:text-5xl md:text-6xl font-bold text-emerald-400 animate-typewriter\",\n                                                    children: \"Naga Codex AI Chess\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                                    lineNumber: 334,\n                                                    columnNumber: 15\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 327,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 326,\n                                        columnNumber: 11\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-full md:w-auto flex flex-shrink-0 justify-center md:justify-start shadow-2xl rounded overflow-hidden\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Board__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                            boardState: gameState.boardState,\n                                            onSquareClick: handleSquareClick,\n                                            playerColor: _types__WEBPACK_IMPORTED_MODULE_11__.PieceColor.WHITE\n                                        }, void 0, false, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 341,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 340,\n                                        columnNumber: 11\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                lineNumber: 325,\n                                columnNumber: 9\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full mt-4 md:mt-0 md:ml-6 md:flex-1 space-y-4 min-w-[240px] sm:min-w-[280px]\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_StatusBar__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                        message: gameState.gameStatusMessage\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 351,\n                                        columnNumber: 11\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_GameControls__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                        difficulty: difficulty,\n                                        onDifficultyChange: handleDifficultyChange,\n                                        onResetGame: isGameInProgress ? resetGame : startGame,\n                                        isGameInProgress: isGameInProgress\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 352,\n                                        columnNumber: 11\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                lineNumber: 350,\n                                columnNumber: 9\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                        lineNumber: 323,\n                        columnNumber: 7\n                    }, undefined),\n                    gameState.promotingPawn && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PromotionModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                        playerColor: chessLogicInstance.getCurrentPlayer(),\n                        onPromote: handlePromotion\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                        lineNumber: 362,\n                        columnNumber: 9\n                    }, undefined),\n                    showCookieBanner && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CookieBanner__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        onAccept: handleAcceptCookies,\n                        onDecline: handleDeclineCookies,\n                        onLearnMore: ()=>{}\n                    }, void 0, false, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                        lineNumber: 369,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                        className: \"mt-6 sm:mt-8 text-center text-slate-400 text-sm\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-center items-center space-x-4 mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"https://www.linkedin.com/in/maurice-holda/\",\n                                        target: \"_blank\",\n                                        rel: \"noopener noreferrer\",\n                                        \"aria-label\": \"LinkedIn Profile of Maurice Holda\",\n                                        className: \"text-slate-400 hover:text-emerald-400 transition-colors duration-200\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            viewBox: \"0 0 24 24\",\n                                            fill: \"currentColor\",\n                                            className: \"w-7 h-7\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.25 6.5 1.75 1.75 0 016.5 8.25zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.54 1.54 0 0013 14.19a1.55 1.55 0 00-.09.56V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.39.93 3.39 3.62V19z\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                                lineNumber: 385,\n                                                columnNumber: 113\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 385,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 378,\n                                        columnNumber: 11\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"https://www.instagram.com/naga_apparel\",\n                                        target: \"_blank\",\n                                        rel: \"noopener noreferrer\",\n                                        \"aria-label\": \"Instagram Profile of Naga Apparel\",\n                                        className: \"text-slate-400 hover:text-emerald-400 transition-colors duration-200\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            viewBox: \"0 0 24 24\",\n                                            fill: \"currentColor\",\n                                            className: \"w-7 h-7\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                d: \"M12 2.163c3.204 0 3.584.012 4.85.07 1.17.053 1.805.248 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.168.422.362 1.059.413 2.228.058 1.265.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.053 1.17-.248 1.805-.413 2.227-.217.562-.477.96-.896 1.382-.42.419-.819.679-1.381-.896-.422.168-1.059.362-2.228.413-1.265.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.053-1.805.248-2.227-.413-.562-.217-.96-.477-1.382-.896-.419-.42-.679-.819-.896-1.381-.168.422-.362 1.059-.413-2.228-.058-1.265-.07-1.646-.07-4.85s.012-3.584.07-4.85c.053 1.17.248 1.805.413-2.227.217.562.477.96.896-1.382.42-.419.819.679-1.381-.896.422-.168 1.059.362 2.228.413 1.265-.058 1.646.07 4.85-.07zm0-2.163c-3.259 0-3.667.014-4.947.072-1.28.058-2.148.272-2.912.578a4.912 4.912 0 00-1.748 1.15 4.912 4.912 0 00-1.15 1.748c-.306.764-.52 1.632-.578 2.912C2.014 8.333 2 8.741 2 12s.014 3.667.072 4.947c.058 1.28.272 2.148.578 2.912a4.912 4.912 0 001.15 1.748 4.912 4.912 0 001.748 1.15c.764.306 1.632.52 2.912.578 1.28.058 1.688.072 4.947.072s3.667-.014 4.947-.072c1.28-.058 2.148.272 2.912.578a4.912 4.912 0 001.748-1.15 4.912 4.912 0 001.15-1.748c.306-.764.52 1.632-.578-2.912.058-1.28.072-1.688.072-4.947s-.014-3.667-.072-4.947c-.058-1.28-.272-2.148-.578-2.912a4.912 4.912 0 00-1.15-1.748 4.912 4.912 0 00-1.748-1.15c-.764-.306-1.632-.52-2.912-.578C15.667 2.014 15.259 2 12 2zm0 5.838a4.162 4.162 0 100 8.324 4.162 4.162 0 000-8.324zm0 6.662a2.5 2.5 0 110-5 2.5 2.5 0 010 5zm5.705-6.611a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4z\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                                lineNumber: 394,\n                                                columnNumber: 113\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 394,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 387,\n                                        columnNumber: 11\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                lineNumber: 377,\n                                columnNumber: 9\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mb-1\",\n                                children: \"Powered by Naga Apparel.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                lineNumber: 397,\n                                columnNumber: 9\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-x-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                        href: \"/privacy\",\n                                        legacyBehavior: true,\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            className: \"hover:text-emerald-400 transition-colors duration-200 underline\",\n                                            \"aria-label\": \"View Privacy Policy\",\n                                            children: \"Privacy Policy\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 400,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 399,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_3___default()), {\n                                        href: \"/cookie\",\n                                        legacyBehavior: true,\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            className: \"hover:text-emerald-400 transition-colors duration-200 underline\",\n                                            \"aria-label\": \"View Cookie Policy\",\n                                            children: \"Cookie Policy\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                            lineNumber: 405,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                        lineNumber: 404,\n                                        columnNumber: 13\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                                lineNumber: 398,\n                                columnNumber: 9\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                        lineNumber: 376,\n                        columnNumber: 7\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/mauriceholda/Desktop/Coding/naga-codex-ai-chess-final (1)/pages/index.tsx\",\n                lineNumber: 321,\n                columnNumber: 5\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n_s(HomePage, \"oqfZYm4w3h3cK1ig3slHNM0qGaU=\");\n_c = HomePage;\n/* harmony default export */ __webpack_exports__[\"default\"] = (HomePage);\nvar _c;\n$RefreshReg$(_c, \"HomePage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZQyxNQUFLOzRDQUFlMUIsV0FBVTtzREFBVSw0RUFBQzJCO2dEQUFLQyxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7O2tEQUU5Ryw4REFBQ1Y7d0NBQ0NDLE1BQUs7d0NBQ0xDLFFBQU87d0NBQ1BDLEtBQUk7d0NBQ0pDLGNBQVc7d0NBQ1h0QixXQUFVO2tEQUVWLDRFQUFDdUI7NENBQUlDLE9BQU07NENBQTZCQyxTQUFROzRDQUFZQyxNQUFLOzRDQUFlMUIsV0FBVTtzREFBVSw0RUFBQzJCO2dEQUFLQyxHQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBDQUdoSCw4REFBQ0M7Z0NBQUU3QixXQUFVOzBDQUFPOzs7Ozs7MENBQ3BCLDhEQUFDRDtnQ0FBSUMsV0FBVTs7a0RBQ1gsOERBQUM5SixrREFBSUE7d0NBQUNpTCxNQUFLO3dDQUFXVyxjQUFjO2tEQUNsQyw0RUFBQ1o7NENBQUVsQixXQUFVOzRDQUFrRXNCLGNBQVc7c0RBQXNCOzs7Ozs7Ozs7OztrREFJbEgsOERBQUNwTCxrREFBSUE7d0NBQUNpTCxNQUFLO3dDQUFVVyxjQUFjO2tEQUNqQyw0RUFBQ1o7NENBQUVsQixXQUFVOzRDQUFrRXNCLGNBQVc7c0RBQXFCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUzdIO0dBcFlNcks7S0FBQUE7QUFzWU4sK0RBQWVBLFFBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vcGFnZXMvaW5kZXgudHN4PzA3ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnO1xuaW1wb3J0IExpbmsgZnJvbSAnbmV4dC9saW5rJztcbmltcG9ydCBCb2FyZCBmcm9tICdAL2NvbXBvbmVudHMvQm9hcmQnO1xuaW1wb3J0IEdhbWVDb250cm9scyBmcm9tICdAL2NvbXBvbmVudHMvR2FtZUNvbnRyb2xzJztcbmltcG9ydCBTdGF0dXNCYXIgZnJvbSAnQC9jb21wb25lbnRzL1N0YXR1c0Jhcic7XG5pbXBvcnQgUHJvbW90aW9uTW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL1Byb21vdGlvbk1vZGFsJztcbmltcG9ydCBDb29raWVCYW5uZXIgZnJvbSAnQC9jb21wb25lbnRzL0Nvb2tpZUJhbm5lcic7XG5pbXBvcnQgeyBDaGVzc0xvZ2ljIH0gZnJvbSAnQC9zZXJ2aWNlcy9jaGVzc0xvZ2ljJztcbmltcG9ydCB7IGdldEFJTW92ZSB9IGZyb20gJ0Avc2VydmljZXMvZ2VtaW5pU2VydmljZSc7XG5pbXBvcnQge1xuICBCb2FyZFN0YXRlIGFzIEZ1bGxCb2FyZFN0YXRlLFxuICBTcXVhcmVJZCxcbiAgUGllY2VDb2xvcixcbiAgTW92ZSxcbiAgRGlmZmljdWx0eSxcbiAgR2FtZVN0YXRlLFxuICBQaWVjZVR5cGUsXG4gIFNxdWFyZVN0YXRlLFxuICBQaWVjZVxufSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfRElGRklDVUxUWSwgQk9BUkRfUk9XUywgQk9BUkRfQ09MUyB9IGZyb20gJ0AvY29uc3RhbnRzJztcbmltcG9ydCB7IGdldFNxdWFyZUNvb3JkaW5hdGVzLCBnZXRTcXVhcmVJZCB9IGZyb20gJ0AvdXRpbHMvYm9hcmRVdGlscyc7XG5cbmNvbnN0IEhvbWVQYWdlOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgaW5pdGlhbExvZ2ljSW5zdGFuY2UgPSB1c2VNZW1vKCgpID0+IG5ldyBDaGVzc0xvZ2ljKCksIFtdKTtcbiAgY29uc3QgW2NoZXNzTG9naWNJbnN0YW5jZSwgc2V0Q2hlc3NMb2dpY0luc3RhbmNlXSA9IHVzZVN0YXRlPENoZXNzTG9naWM+KGluaXRpYWxMb2dpY0luc3RhbmNlKTtcbiAgY29uc3QgW2dhbWVTdGF0ZSwgc2V0R2FtZVN0YXRlXSA9IHVzZVN0YXRlPEdhbWVTdGF0ZT4oKCkgPT4gZ2V0SW5pdGlhbEdhbWVTdGF0ZShpbml0aWFsTG9naWNJbnN0YW5jZSkpO1xuICBjb25zdCBbZGlmZmljdWx0eSwgc2V0RGlmZmljdWx0eV0gPSB1c2VTdGF0ZTxEaWZmaWN1bHR5PihERUZBVUxUX0RJRkZJQ1VMVFkpO1xuICBjb25zdCBbaXNBSVR1cm4sIHNldElzQUlUdXJuXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW2lzR2FtZUluUHJvZ3Jlc3MsIHNldElzR2FtZUluUHJvZ3Jlc3NdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBcbiAgY29uc3QgW3Nob3dDb29raWVCYW5uZXIsIHNldFNob3dDb29raWVCYW5uZXJdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY29uc2VudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb29raWVDb25zZW50Jyk7XG4gICAgaWYgKCFjb25zZW50KSB7XG4gICAgICBzZXRTaG93Q29va2llQmFubmVyKHRydWUpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZUFjY2VwdENvb2tpZXMgPSAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nvb2tpZUNvbnNlbnQnLCAnYWNjZXB0ZWQnKTtcbiAgICBzZXRTaG93Q29va2llQmFubmVyKGZhbHNlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEZWNsaW5lQ29va2llcyA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29va2llQ29uc2VudCcsICdkZWNsaW5lZCcpO1xuICAgIHNldFNob3dDb29raWVCYW5uZXIoZmFsc2UpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGdldEluaXRpYWxHYW1lU3RhdGUobG9naWNJbnN0YW5jZTogQ2hlc3NMb2dpYyk6IEdhbWVTdGF0ZSB7XG4gICAgY29uc3QgaW5pdGlhbEJvYXJkUGllY2VzOiAoUGllY2UgfCBudWxsKVtdW10gPSBsb2dpY0luc3RhbmNlLmdldEJvYXJkKCk7XG4gICAgY29uc3QgZnVsbEJvYXJkU3RhdGU6IEZ1bGxCb2FyZFN0YXRlID0gW107XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBCT0FSRF9ST1dTOyByKyspIHtcbiAgICAgICAgY29uc3Qgcm93U3F1YXJlczogU3F1YXJlU3RhdGVbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IEJPQVJEX0NPTFM7IGMrKykge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBnZXRTcXVhcmVJZChyLCBjKSE7XG4gICAgICAgICAgICByb3dTcXVhcmVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHBpZWNlOiBpbml0aWFsQm9hcmRQaWVjZXNbcl1bY10sXG4gICAgICAgICAgICAgICAgaXNWYWxpZE1vdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQ2hlY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVsbEJvYXJkU3RhdGUucHVzaChyb3dTcXVhcmVzKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgYm9hcmRTdGF0ZTogZnVsbEJvYXJkU3RhdGUsXG4gICAgICBjdXJyZW50UGxheWVyOiBsb2dpY0luc3RhbmNlLmdldEN1cnJlbnRQbGF5ZXIoKSxcbiAgICAgIGNhc3RsaW5nQXZhaWxhYmlsaXR5OiBsb2dpY0luc3RhbmNlLmdldENhc3RsaW5nQXZhaWxhYmlsaXR5KCksXG4gICAgICBlblBhc3NhbnRUYXJnZXQ6IGxvZ2ljSW5zdGFuY2UuZ2V0RW5QYXNzYW50VGFyZ2V0KCksXG4gICAgICBoYWxmTW92ZUNsb2NrOiBsb2dpY0luc3RhbmNlLmdldEhhbGZNb3ZlQ2xvY2soKSxcbiAgICAgIGZ1bGxNb3ZlTnVtYmVyOiBsb2dpY0luc3RhbmNlLmdldE1vdmVOdW1iZXIoKSxcbiAgICAgIHNlbGVjdGVkU3F1YXJlOiBudWxsLFxuICAgICAgdmFsaWRNb3ZlczogW10sXG4gICAgICBpc0NoZWNrOiBmYWxzZSxcbiAgICAgIGlzQ2hlY2ttYXRlOiBmYWxzZSxcbiAgICAgIGlzU3RhbGVtYXRlOiBmYWxzZSxcbiAgICAgIGlzRHJhdzogZmFsc2UsXG4gICAgICB3aW5uZXI6IG51bGwsXG4gICAgICBwcm9tb3RpbmdQYXduOiBudWxsLFxuICAgICAgZ2FtZVN0YXR1c01lc3NhZ2U6IFwiU2VsZWN0IGRpZmZpY3VsdHkgYW5kIGNsaWNrICdTdGFydCBOZXcgR2FtZScuIFdoaXRlIHRvIG1vdmUuXCIsXG4gICAgICBtb3ZlSGlzdG9yeTogW10sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGZpbmRLaW5nU3F1YXJlID0gKGtpbmdDb2xvcjogUGllY2VDb2xvciwgYm9hcmQ6IChQaWVjZSB8IG51bGwpW11bXSk6IFNxdWFyZUlkIHwgbnVsbCA9PiB7XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBCT0FSRF9ST1dTOyByKyspIHtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgQk9BUkRfQ09MUzsgYysrKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gYm9hcmRbcl1bY107XG4gICAgICAgIGlmIChwaWVjZSAmJiBwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuS0lORyAmJiBwaWVjZS5jb2xvciA9PT0ga2luZ0NvbG9yKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNxdWFyZUlkKHIsIGMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGNvbnN0IHBlcmZvcm1Nb3ZlID0gdXNlQ2FsbGJhY2soKG1vdmU6IE1vdmUpID0+IHtcbiAgICBjb25zdCBjdXJyZW50SW5zdGFuY2UgPSBjaGVzc0xvZ2ljSW5zdGFuY2U7XG4gICAgY29uc3QgbW92ZVN1Y2Nlc3NmdWwgPSBjdXJyZW50SW5zdGFuY2UubWFrZU1vdmUobW92ZSk7XG5cbiAgICBpZiAobW92ZVN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgc2V0SXNHYW1lSW5Qcm9ncmVzcyh0cnVlKTtcbiAgICAgICAgY29uc3QgcGxheWVyV2hvc2VUdXJuSXNOZXh0ID0gY3VycmVudEluc3RhbmNlLmdldEN1cnJlbnRQbGF5ZXIoKTtcbiAgICAgICAgY29uc3QgcGxheWVyV2hvSnVzdE1vdmVkID0gcGxheWVyV2hvc2VUdXJuSXNOZXh0ID09PSBQaWVjZUNvbG9yLldISVRFID8gUGllY2VDb2xvci5CTEFDSyA6IFBpZWNlQ29sb3IuV0hJVEU7XG4gICAgICAgIGNvbnN0IGNoZWNrbWF0ZSA9IGN1cnJlbnRJbnN0YW5jZS5pc0NoZWNrbWF0ZShwbGF5ZXJXaG9zZVR1cm5Jc05leHQpO1xuICAgICAgICBjb25zdCBzdGFsZW1hdGUgPSBjdXJyZW50SW5zdGFuY2UuaXNTdGFsZW1hdGUocGxheWVyV2hvc2VUdXJuSXNOZXh0KTtcblxuICAgICAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXI6IHBsYXllcldob3NlVHVybklzTmV4dCxcbiAgICAgICAgICAgIGNhc3RsaW5nQXZhaWxhYmlsaXR5OiBjdXJyZW50SW5zdGFuY2UuZ2V0Q2FzdGxpbmdBdmFpbGFiaWxpdHkoKSxcbiAgICAgICAgICAgIGVuUGFzc2FudFRhcmdldDogY3VycmVudEluc3RhbmNlLmdldEVuUGFzc2FudFRhcmdldCgpLFxuICAgICAgICAgICAgaGFsZk1vdmVDbG9jazogY3VycmVudEluc3RhbmNlLmdldEhhbGZNb3ZlQ2xvY2soKSxcbiAgICAgICAgICAgIGZ1bGxNb3ZlTnVtYmVyOiBjdXJyZW50SW5zdGFuY2UuZ2V0TW92ZU51bWJlcigpLFxuICAgICAgICAgICAgc2VsZWN0ZWRTcXVhcmU6IG51bGwsXG4gICAgICAgICAgICB2YWxpZE1vdmVzOiBbXSxcbiAgICAgICAgICAgIGlzQ2hlY2s6IGN1cnJlbnRJbnN0YW5jZS5pc0tpbmdJbkNoZWNrKHBsYXllcldob3NlVHVybklzTmV4dCksXG4gICAgICAgICAgICBpc0NoZWNrbWF0ZTogY2hlY2ttYXRlLFxuICAgICAgICAgICAgaXNTdGFsZW1hdGU6IHN0YWxlbWF0ZSxcbiAgICAgICAgICAgIHdpbm5lcjogY2hlY2ttYXRlID8gcGxheWVyV2hvSnVzdE1vdmVkIDogbnVsbCxcbiAgICAgICAgICAgIG1vdmVIaXN0b3J5OiBbLi4ucHJldi5tb3ZlSGlzdG9yeSwgbW92ZV0sXG4gICAgICAgICAgICBwcm9tb3RpbmdQYXduOiBudWxsLFxuICAgICAgICB9KSk7XG5cbiAgICAgIGlmICghY2hlY2ttYXRlICYmICFzdGFsZW1hdGUpIHtcbiAgICAgICAgc2V0SXNBSVR1cm4ocGxheWVyV2hvc2VUdXJuSXNOZXh0ID09PSBQaWVjZUNvbG9yLkJMQUNLKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldElzQUlUdXJuKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIk1vdmUgZmFpbGVkIGluIGNoZXNzTG9naWNJbnN0YW5jZS5tYWtlTW92ZSBmb3IgbW92ZTpcIiwgbW92ZSk7XG4gICAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBzZWxlY3RlZFNxdWFyZTogbnVsbCwgdmFsaWRNb3ZlczogW10gfSkpO1xuICAgIH1cbiAgfSwgW2NoZXNzTG9naWNJbnN0YW5jZV0pO1xuXG5cbiAgY29uc3QgaGFuZGxlU3F1YXJlQ2xpY2sgPSB1c2VDYWxsYmFjaygoc3F1YXJlSWQ6IFNxdWFyZUlkKSA9PiB7XG4gICAgaWYgKGlzQUlUdXJuIHx8IGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSB8fCBnYW1lU3RhdGUuaXNTdGFsZW1hdGUgfHwgZ2FtZVN0YXRlLnByb21vdGluZ1Bhd24gfHwgIWlzR2FtZUluUHJvZ3Jlc3MpIHJldHVybjtcblxuICAgIGNvbnN0IHBpZWNlT25DbGlja2VkU3F1YXJlID0gY2hlc3NMb2dpY0luc3RhbmNlLmdldFBpZWNlQXQoc3F1YXJlSWQpO1xuXG4gICAgaWYgKGdhbWVTdGF0ZS5zZWxlY3RlZFNxdWFyZSkge1xuICAgICAgaWYgKGdhbWVTdGF0ZS52YWxpZE1vdmVzLmluY2x1ZGVzKHNxdWFyZUlkKSkge1xuICAgICAgICBjb25zdCBtb3ZlOiBNb3ZlID0geyBmcm9tOiBnYW1lU3RhdGUuc2VsZWN0ZWRTcXVhcmUsIHRvOiBzcXVhcmVJZCB9O1xuICAgICAgICBjb25zdCBmcm9tUGllY2UgPSBjaGVzc0xvZ2ljSW5zdGFuY2UuZ2V0UGllY2VBdChnYW1lU3RhdGUuc2VsZWN0ZWRTcXVhcmUpO1xuICAgICAgICBjb25zdCB0b0Nvb3JkcyA9IGdldFNxdWFyZUNvb3JkaW5hdGVzKHNxdWFyZUlkKTtcbiAgICAgICAgaWYgKGZyb21QaWVjZT8udHlwZSA9PT0gUGllY2VUeXBlLlBBV04gJiYgdG9Db29yZHMgJiZcbiAgICAgICAgICAgICgoZnJvbVBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFICYmIHRvQ29vcmRzLnJvdyA9PT0gMCkgfHxcbiAgICAgICAgICAgICAoZnJvbVBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJMQUNLICYmIHRvQ29vcmRzLnJvdyA9PT0gQk9BUkRfUk9XUyAtIDEpKSkge1xuICAgICAgICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHByb21vdGluZ1Bhd246IHsgZnJvbTogZ2FtZVN0YXRlLnNlbGVjdGVkU3F1YXJlISwgdG86IHNxdWFyZUlkIH19KSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBlcmZvcm1Nb3ZlKG1vdmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBpZWNlT25DbGlja2VkU3F1YXJlICYmIHBpZWNlT25DbGlja2VkU3F1YXJlLmNvbG9yID09PSBjaGVzc0xvZ2ljSW5zdGFuY2UuZ2V0Q3VycmVudFBsYXllcigpKSB7XG4gICAgICAgICAgY29uc3QgbmV3VmFsaWRNb3ZlcyA9IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRWYWxpZE1vdmVzRm9yUGllY2Uoc3F1YXJlSWQpO1xuICAgICAgICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIHNlbGVjdGVkU3F1YXJlOiBzcXVhcmVJZCwgdmFsaWRNb3ZlczogbmV3VmFsaWRNb3ZlcyB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0R2FtZVN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgc2VsZWN0ZWRTcXVhcmU6IG51bGwsIHZhbGlkTW92ZXM6IFtdIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocGllY2VPbkNsaWNrZWRTcXVhcmUgJiYgcGllY2VPbkNsaWNrZWRTcXVhcmUuY29sb3IgPT09IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRDdXJyZW50UGxheWVyKCkpIHtcbiAgICAgICAgY29uc3QgdmFsaWRNb3ZlcyA9IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRWYWxpZE1vdmVzRm9yUGllY2Uoc3F1YXJlSWQpO1xuICAgICAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBzZWxlY3RlZFNxdWFyZTogc3F1YXJlSWQsIHZhbGlkTW92ZXM6IHZhbGlkTW92ZXMgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2lzQUlUdXJuLCBnYW1lU3RhdGUuaXNDaGVja21hdGUsIGdhbWVTdGF0ZS5pc1N0YWxlbWF0ZSwgZ2FtZVN0YXRlLnByb21vdGluZ1Bhd24sIGdhbWVTdGF0ZS5zZWxlY3RlZFNxdWFyZSwgZ2FtZVN0YXRlLnZhbGlkTW92ZXMsIGNoZXNzTG9naWNJbnN0YW5jZSwgcGVyZm9ybU1vdmUsIGlzR2FtZUluUHJvZ3Jlc3NdKTtcblxuICBjb25zdCBoYW5kbGVQcm9tb3Rpb24gPSB1c2VDYWxsYmFjaygocHJvbW90ZWRQaWVjZVR5cGU6IFBpZWNlVHlwZSkgPT4ge1xuICAgIGlmICghZ2FtZVN0YXRlLnByb21vdGluZ1Bhd24pIHJldHVybjtcbiAgICBjb25zdCBtb3ZlOiBNb3ZlID0geyAuLi5nYW1lU3RhdGUucHJvbW90aW5nUGF3biwgcHJvbW90aW9uOiBwcm9tb3RlZFBpZWNlVHlwZSB9O1xuICAgIHBlcmZvcm1Nb3ZlKG1vdmUpO1xuICB9LCBbZ2FtZVN0YXRlLnByb21vdGluZ1Bhd24sIHBlcmZvcm1Nb3ZlXSk7XG5cbiAgY29uc3QgcmVzZXRHYW1lID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5ld0xvZ2ljSW5zdGFuY2UgPSBuZXcgQ2hlc3NMb2dpYygpO1xuICAgIHNldENoZXNzTG9naWNJbnN0YW5jZShuZXdMb2dpY0luc3RhbmNlKTtcbiAgICBzZXRHYW1lU3RhdGUoZ2V0SW5pdGlhbEdhbWVTdGF0ZShuZXdMb2dpY0luc3RhbmNlKSk7XG4gICAgc2V0SXNBSVR1cm4oZmFsc2UpO1xuICAgIHNldElzR2FtZUluUHJvZ3Jlc3MoZmFsc2UpO1xuICB9LCBbXSk7XG5cbiAgY29uc3Qgc3RhcnRHYW1lID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5ld0xvZ2ljSW5zdGFuY2UgPSBuZXcgQ2hlc3NMb2dpYygpO1xuICAgIHNldENoZXNzTG9naWNJbnN0YW5jZShuZXdMb2dpY0luc3RhbmNlKTtcbiAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoe1xuICAgICAgICAuLi5nZXRJbml0aWFsR2FtZVN0YXRlKG5ld0xvZ2ljSW5zdGFuY2UpLFxuICAgICAgICBnYW1lU3RhdHVzTWVzc2FnZTogXCJHYW1lIHN0YXJ0ZWQuIFdoaXRlIHRvIG1vdmUuXCJcbiAgICB9KSk7XG4gICAgc2V0SXNBSVR1cm4oZmFsc2UpO1xuICAgIHNldElzR2FtZUluUHJvZ3Jlc3ModHJ1ZSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRMb2dpY1BsYXllciA9IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRDdXJyZW50UGxheWVyKCk7XG4gICAgY29uc3QgbmV3Qm9hcmRQaWVjZXM6IChQaWVjZSB8IG51bGwpW11bXSA9IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRCb2FyZCgpO1xuICAgIGNvbnN0IGlzQ3VycmVudGx5SW5DaGVjayA9IGNoZXNzTG9naWNJbnN0YW5jZS5pc0tpbmdJbkNoZWNrKGN1cnJlbnRMb2dpY1BsYXllciwgbmV3Qm9hcmRQaWVjZXMpO1xuICAgIGxldCBzdGF0dXNNZXNzYWdlOiBzdHJpbmc7XG4gICAgaWYgKGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSkge1xuICAgICAgICBjb25zdCB3aW5uZXJDb2xvciA9IGdhbWVTdGF0ZS53aW5uZXI7XG4gICAgICAgIHN0YXR1c01lc3NhZ2UgPSBgQ2hlY2ttYXRlISAke3dpbm5lckNvbG9yID8gd2lubmVyQ29sb3IuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3aW5uZXJDb2xvci5zbGljZSgxKSA6ICcnfSB3aW5zIWA7XG4gICAgfSBlbHNlIGlmIChnYW1lU3RhdGUuaXNTdGFsZW1hdGUpIHtcbiAgICAgICAgc3RhdHVzTWVzc2FnZSA9IFwiU3RhbGVtYXRlISBJdCdzIGEgZHJhdy5cIjtcbiAgICB9IGVsc2UgaWYgKGlzQ3VycmVudGx5SW5DaGVjaykge1xuICAgICAgICBzdGF0dXNNZXNzYWdlID0gYCR7Y3VycmVudExvZ2ljUGxheWVyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY3VycmVudExvZ2ljUGxheWVyLnNsaWNlKDEpfSBpcyBpbiBDaGVjayFgO1xuICAgIH0gZWxzZSBpZiAoIWlzR2FtZUluUHJvZ3Jlc3MgJiYgY2hlc3NMb2dpY0luc3RhbmNlLmdldE1vdmVOdW1iZXIoKSA9PT0gMSAmJiBjdXJyZW50TG9naWNQbGF5ZXIgPT09IFBpZWNlQ29sb3IuV0hJVEUgJiYgIWdhbWVTdGF0ZS53aW5uZXIpIHtcbiAgICAgICAgc3RhdHVzTWVzc2FnZSA9IFwiU2VsZWN0IGRpZmZpY3VsdHkgYW5kIGNsaWNrICdTdGFydCBOZXcgR2FtZScuIFdoaXRlIHRvIG1vdmUuXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdHVzTWVzc2FnZSA9IGAke2N1cnJlbnRMb2dpY1BsYXllci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGN1cnJlbnRMb2dpY1BsYXllci5zbGljZSgxKX0ncyB0dXJuLmA7XG4gICAgfVxuICAgIGNvbnN0IGtpbmdTcXVhcmVJZCA9IGZpbmRLaW5nU3F1YXJlKGN1cnJlbnRMb2dpY1BsYXllciwgbmV3Qm9hcmRQaWVjZXMpO1xuICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgdXBkYXRlZEZ1bGxCb2FyZFN0YXRlID0gcHJldi5ib2FyZFN0YXRlLm1hcCgocm93LCBySW5kZXgpID0+XG4gICAgICAgICAgICByb3cubWFwKChzcSwgY0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNxdWFyZUlkID0gZ2V0U3F1YXJlSWQockluZGV4LCBjSW5kZXgpITtcbiAgICAgICAgICAgICAgICBjb25zdCBwaWVjZU9uU3F1YXJlID0gbmV3Qm9hcmRQaWVjZXNbckluZGV4XVtjSW5kZXhdO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnNxLFxuICAgICAgICAgICAgICAgICAgICBpZDogY3VycmVudFNxdWFyZUlkLFxuICAgICAgICAgICAgICAgICAgICBwaWVjZTogcGllY2VPblNxdWFyZSxcbiAgICAgICAgICAgICAgICAgICAgaXNDaGVjazogaXNDdXJyZW50bHlJbkNoZWNrICYmIGtpbmdTcXVhcmVJZCA9PT0gY3VycmVudFNxdWFyZUlkICYmIHBpZWNlT25TcXVhcmU/LnR5cGUgPT09IFBpZWNlVHlwZS5LSU5HLFxuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkOiBwcmV2LnNlbGVjdGVkU3F1YXJlID09PSBjdXJyZW50U3F1YXJlSWQsXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWRNb3ZlOiBwcmV2LnZhbGlkTW92ZXMuaW5jbHVkZXMoY3VycmVudFNxdWFyZUlkKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIGJvYXJkU3RhdGU6IHVwZGF0ZWRGdWxsQm9hcmRTdGF0ZSxcbiAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXI6IGN1cnJlbnRMb2dpY1BsYXllcixcbiAgICAgICAgICAgIGlzQ2hlY2s6IGlzQ3VycmVudGx5SW5DaGVjayxcbiAgICAgICAgICAgIGdhbWVTdGF0dXNNZXNzYWdlOiBzdGF0dXNNZXNzYWdlLFxuICAgICAgICAgICAgY2FzdGxpbmdBdmFpbGFiaWxpdHk6IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRDYXN0bGluZ0F2YWlsYWJpbGl0eSgpLFxuICAgICAgICAgICAgZW5QYXNzYW50VGFyZ2V0OiBjaGVzc0xvZ2ljSW5zdGFuY2UuZ2V0RW5QYXNzYW50VGFyZ2V0KCksXG4gICAgICAgICAgICBmdWxsTW92ZU51bWJlcjogY2hlc3NMb2dpY0luc3RhbmNlLmdldE1vdmVOdW1iZXIoKSxcbiAgICAgICAgICAgIGhhbGZNb3ZlQ2xvY2s6IGNoZXNzTG9naWNJbnN0YW5jZS5nZXRIYWxmTW92ZUNsb2NrKCksXG4gICAgICAgIH07XG4gICAgfSk7XG4gIH0sIFtcbiAgICAgIGNoZXNzTG9naWNJbnN0YW5jZSwgZ2FtZVN0YXRlLnNlbGVjdGVkU3F1YXJlLCBnYW1lU3RhdGUudmFsaWRNb3ZlcyxcbiAgICAgIGlzR2FtZUluUHJvZ3Jlc3MsIGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSwgZ2FtZVN0YXRlLmlzU3RhbGVtYXRlLCBnYW1lU3RhdGUud2lubmVyXG4gICAgXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgdGltZW91dElkOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgaWYgKGlzQUlUdXJuICYmICFnYW1lU3RhdGUuaXNDaGVja21hdGUgJiYgIWdhbWVTdGF0ZS5pc1N0YWxlbWF0ZSAmJiBpc0dhbWVJblByb2dyZXNzKSB7XG4gICAgICAgIGNvbnN0IGFpUGxheWVyQ29sb3IgPSBjaGVzc0xvZ2ljSW5zdGFuY2UuZ2V0Q3VycmVudFBsYXllcigpO1xuICAgICAgICBpZiAoYWlQbGF5ZXJDb2xvciAhPT0gUGllY2VDb2xvci5CTEFDSykge1xuICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQUkgdHVybiBpbmNvbnNpc3RlbmN5OiBFeHBlY3RlZCBCbGFjaywgZ290ICR7YWlQbGF5ZXJDb2xvcn0uIFJlc2V0dGluZyBBSSB0dXJuLmApO1xuICAgICAgICAgICAgIHNldElzQUlUdXJuKGZhbHNlKTsgcmV0dXJuOyBcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZE1vdmVzRm9yQUlQbGF5ZXIgPSBjaGVzc0xvZ2ljSW5zdGFuY2UuZ2V0QWxsVmFsaWRNb3Zlc0ZvclBsYXllcihhaVBsYXllckNvbG9yKTtcbiAgICAgICAgY29uc3QgdmFsaWRNb3Zlc1VjaSA9IHZhbGlkTW92ZXNGb3JBSVBsYXllci5tYXAobSA9PiB7XG4gICAgICAgICAgICBsZXQgdWNpID0gYCR7bS5mcm9tfSR7bS50b31gO1xuICAgICAgICAgICAgaWYgKG0ucHJvbW90aW9uKSB1Y2kgKz0gbS5wcm9tb3Rpb24uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICByZXR1cm4gdWNpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHZhbGlkTW92ZXNVY2kubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBpc0tpbmdJbkNoZWNrRm9yQUkgPSBjaGVzc0xvZ2ljSW5zdGFuY2UuaXNLaW5nSW5DaGVjayhhaVBsYXllckNvbG9yKTtcbiAgICAgICAgICAgIGlmIChpc0tpbmdJbkNoZWNrRm9yQUkpIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7Li4ucHJldiwgaXNDaGVja21hdGU6IHRydWUsIHdpbm5lcjogUGllY2VDb2xvci5XSElURSwgZ2FtZVN0YXR1c01lc3NhZ2U6IFwiQ2hlY2ttYXRlISBXaGl0ZSB3aW5zLlwifSkpO1xuICAgICAgICAgICAgZWxzZSBzZXRHYW1lU3RhdGUocHJldiA9PiAoey4uLnByZXYsIGlzU3RhbGVtYXRlOiB0cnVlLCBnYW1lU3RhdHVzTWVzc2FnZTogXCJTdGFsZW1hdGUhIEl0J3MgYSBkcmF3LlwifSkpO1xuICAgICAgICAgICAgc2V0SXNBSVR1cm4oZmFsc2UpOyByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWlUaGlua1RpbWUgPSBNYXRoLm1heCgxMDAsIDEwMCAqIGRpZmZpY3VsdHkpOyBcbiAgICAgICAgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZS5pc0NoZWNrbWF0ZSB8fCBnYW1lU3RhdGUuaXNTdGFsZW1hdGUgfHwgIWlzR2FtZUluUHJvZ3Jlc3MgfHwgIWlzQUlUdXJuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQUlUdXJuKSBzZXRJc0FJVHVybihmYWxzZSk7IHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBhaUNob3NlblVjaSA9IGF3YWl0IGdldEFJTW92ZShjaGVzc0xvZ2ljSW5zdGFuY2UsIGRpZmZpY3VsdHksIHZhbGlkTW92ZXNVY2kpO1xuICAgICAgICAgICAgaWYgKCFhaUNob3NlblVjaSB8fCAhdmFsaWRNb3Zlc1VjaS5pbmNsdWRlcyhhaUNob3NlblVjaSkpIHtcbiAgICAgICAgICAgICAgICAgaWYgKHZhbGlkTW92ZXNVY2kubGVuZ3RoID4gMCkgeyBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxDaG9pY2UgPSBhaUNob3NlblVjaTtcbiAgICAgICAgICAgICAgICAgICAgYWlDaG9zZW5VY2kgPSB2YWxpZE1vdmVzVWNpW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHZhbGlkTW92ZXNVY2kubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQUkgc2VydmljZSBjaG9zZSBhbiBpbnZhbGlkICgnJHtvcmlnaW5hbENob2ljZX0nKSBvciBubyBtb3ZlLiBGb3JjZWQgcmFuZG9tIHZhbGlkIG1vdmU6ICR7YWlDaG9zZW5VY2l9LmApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBSSBUdXJuIENyaXRpY2FsOiBObyB2YWxpZCBtb3ZlcyBhdmFpbGFibGUuXCIpOyBzZXRJc0FJVHVybihmYWxzZSk7IFxuICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNLaW5nSW5DaGVja0ZvckFJID0gY2hlc3NMb2dpY0luc3RhbmNlLmlzS2luZ0luQ2hlY2soYWlQbGF5ZXJDb2xvcik7XG4gICAgICAgICAgICAgICAgICAgICBpZiAoaXNLaW5nSW5DaGVja0ZvckFJICYmICFnYW1lU3RhdGUuaXNDaGVja21hdGUpIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzQ2hlY2ttYXRlOiB0cnVlLCB3aW5uZXI6IFBpZWNlQ29sb3IuV0hJVEUsIGdhbWVTdGF0dXNNZXNzYWdlOiBcIkNoZWNrbWF0ZSEgV2hpdGUgd2lucyAoZW1lcmdlbmN5KS5cIiB9KSk7XG4gICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNLaW5nSW5DaGVja0ZvckFJICYmICFnYW1lU3RhdGUuaXNTdGFsZW1hdGUpIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGlzU3RhbGVtYXRlOiB0cnVlLCBnYW1lU3RhdHVzTWVzc2FnZTogXCJTdGFsZW1hdGUhIChlbWVyZ2VuY3kpLlwiIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lU3RhdGUuaXNDaGVja21hdGUgfHwgZ2FtZVN0YXRlLmlzU3RhbGVtYXRlIHx8ICFpc0dhbWVJblByb2dyZXNzIHx8ICFpc0FJVHVybikge1xuICAgICAgICAgICAgICAgICBpZiAoaXNBSVR1cm4pIHNldElzQUlUdXJuKGZhbHNlKTsgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFpQ2hvc2VuVWNpKSB7IFxuICAgICAgICAgICAgICBjb25zdCBmcm9tID0gYWlDaG9zZW5VY2kuc3Vic3RyaW5nKDAsIDIpIGFzIFNxdWFyZUlkO1xuICAgICAgICAgICAgICBjb25zdCB0byA9IGFpQ2hvc2VuVWNpLnN1YnN0cmluZygyLCA0KSBhcyBTcXVhcmVJZDtcbiAgICAgICAgICAgICAgY29uc3QgcHJvbW90aW9uQ2hhciA9IGFpQ2hvc2VuVWNpLmxlbmd0aCA9PT0gNSA/IGFpQ2hvc2VuVWNpLmNoYXJBdCg0KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgbGV0IHByb21vdGlvblBpZWNlOiBQaWVjZVR5cGUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIGlmIChwcm9tb3Rpb25DaGFyKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChwcm9tb3Rpb25DaGFyKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdxJzogcHJvbW90aW9uUGllY2UgPSBQaWVjZVR5cGUuUVVFRU47IGJyZWFrOyBjYXNlICdyJzogcHJvbW90aW9uUGllY2UgPSBQaWVjZVR5cGUuUk9PSzsgYnJlYWs7XG4gICAgICAgICAgICAgICAgICBjYXNlICdiJzogcHJvbW90aW9uUGllY2UgPSBQaWVjZVR5cGUuQklTSE9QOyBicmVhazsgY2FzZSAnbic6IHByb21vdGlvblBpZWNlID0gUGllY2VUeXBlLktOSUdIVDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBlcmZvcm1Nb3ZlKHsgZnJvbSwgdG8sIHByb21vdGlvbjogcHJvbW90aW9uUGllY2UgfSk7XG4gICAgICAgICAgICB9IGVsc2UgeyBjb25zb2xlLmVycm9yKFwiQUkgZmFpbGVkIHRvIHNlbGVjdCBhIG1vdmUuXCIpOyBzZXRJc0FJVHVybihmYWxzZSk7IH1cbiAgICAgICAgfSwgYWlUaGlua1RpbWUpO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4geyBpZiAodGltZW91dElkKSB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7IH07XG4gIH0sIFtpc0FJVHVybiwgZ2FtZVN0YXRlLmlzQ2hlY2ttYXRlLCBnYW1lU3RhdGUuaXNTdGFsZW1hdGUsIGNoZXNzTG9naWNJbnN0YW5jZSwgZGlmZmljdWx0eSwgcGVyZm9ybU1vdmUsIGlzR2FtZUluUHJvZ3Jlc3MsIGdhbWVTdGF0ZS5jdXJyZW50UGxheWVyXSk7XG5cbiAgY29uc3QgaGFuZGxlRGlmZmljdWx0eUNoYW5nZSA9IChsZXZlbDogRGlmZmljdWx0eSkgPT4ge1xuICAgIGlmICghaXNHYW1lSW5Qcm9ncmVzcykgc2V0RGlmZmljdWx0eShsZXZlbCk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+TmFnYSBDb2RleCBBSSBDaGVzczwvdGl0bGU+XG4gICAgICAgIHsvKiBTcGVjaWZpYyBtZXRhIHRhZ3MgZm9yIHRoaXMgcGFnZSBjYW4gZ28gaGVyZSBpZiBkaWZmZXJlbnQgZnJvbSBfYXBwLnRzeCAqL31cbiAgICA8L0hlYWQ+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctc2xhdGUtODAwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtMiBzbTpwLTQgc2VsZWN0aW9uOmJnLWVtZXJhbGQtNTAwIHNlbGVjdGlvbjp0ZXh0LXdoaXRlXCI+XG4gICAgICBcbiAgICAgIDxtYWluIGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgaXRlbXMtY2VudGVyIG1kOml0ZW1zLXN0YXJ0IGdhcC00IHNtOmdhcC02IHctZnVsbCBtYXgtdy00eGwgbXgtYXV0b1wiPlxuICAgICAgICB7LyogR3JvdXBpbmcgZGl2IGZvciBIZWFkZXIgYW5kIEJvYXJkICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHctZnVsbCBtZDp3LWF1dG9cIj5cbiAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT1cIm1iLTQgc206bWItNiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgc3JjPVwiL2xvZ28ucG5nXCIgXG4gICAgICAgICAgICAgICAgYWx0PVwiTmFnYSBBcHBhcmVsIExvZ29cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTAgc206aC0xMiBtZDpoLTE0IGxnOmgtMTYgdy1hdXRvIG1yLTIgc206bXItM1wiXG4gICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCIgXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJmb250LWR5bmFwdWZmIHRleHQtNHhsIHNtOnRleHQtNXhsIG1kOnRleHQtNnhsIGZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtNDAwIGFuaW1hdGUtdHlwZXdyaXRlclwiPlxuICAgICAgICAgICAgICAgIE5hZ2EgQ29kZXggQUkgQ2hlc3NcbiAgICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvaGVhZGVyPlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWQ6dy1hdXRvIGZsZXggZmxleC1zaHJpbmstMCBqdXN0aWZ5LWNlbnRlciBtZDpqdXN0aWZ5LXN0YXJ0IHNoYWRvdy0yeGwgcm91bmRlZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgIDxCb2FyZFxuICAgICAgICAgICAgICBib2FyZFN0YXRlPXtnYW1lU3RhdGUuYm9hcmRTdGF0ZX1cbiAgICAgICAgICAgICAgb25TcXVhcmVDbGljaz17aGFuZGxlU3F1YXJlQ2xpY2t9XG4gICAgICAgICAgICAgIHBsYXllckNvbG9yPXtQaWVjZUNvbG9yLldISVRFfSBcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBDb250cm9scyBQYW5lbCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbXQtNCBtZDptdC0wIG1kOm1sLTYgbWQ6ZmxleC0xIHNwYWNlLXktNCBtaW4tdy1bMjQwcHhdIHNtOm1pbi13LVsyODBweF1cIj5cbiAgICAgICAgICA8U3RhdHVzQmFyIG1lc3NhZ2U9e2dhbWVTdGF0ZS5nYW1lU3RhdHVzTWVzc2FnZX0gLz5cbiAgICAgICAgICA8R2FtZUNvbnRyb2xzXG4gICAgICAgICAgICBkaWZmaWN1bHR5PXtkaWZmaWN1bHR5fVxuICAgICAgICAgICAgb25EaWZmaWN1bHR5Q2hhbmdlPXtoYW5kbGVEaWZmaWN1bHR5Q2hhbmdlfVxuICAgICAgICAgICAgb25SZXNldEdhbWU9e2lzR2FtZUluUHJvZ3Jlc3MgPyByZXNldEdhbWUgOiBzdGFydEdhbWV9XG4gICAgICAgICAgICBpc0dhbWVJblByb2dyZXNzPXtpc0dhbWVJblByb2dyZXNzfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9tYWluPlxuXG4gICAgICB7Z2FtZVN0YXRlLnByb21vdGluZ1Bhd24gJiYgKFxuICAgICAgICA8UHJvbW90aW9uTW9kYWxcbiAgICAgICAgICBwbGF5ZXJDb2xvcj17Y2hlc3NMb2dpY0luc3RhbmNlLmdldEN1cnJlbnRQbGF5ZXIoKX0gXG4gICAgICAgICAgb25Qcm9tb3RlPXtoYW5kbGVQcm9tb3Rpb259XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgXG4gICAgICB7c2hvd0Nvb2tpZUJhbm5lciAmJiAoXG4gICAgICAgIDxDb29raWVCYW5uZXJcbiAgICAgICAgICBvbkFjY2VwdD17aGFuZGxlQWNjZXB0Q29va2llc31cbiAgICAgICAgICBvbkRlY2xpbmU9e2hhbmRsZURlY2xpbmVDb29raWVzfVxuICAgICAgICAgIG9uTGVhcm5Nb3JlPXsoKSA9PiB7IC8qIE5hdmlnYXRpb24gaGFuZGxlZCBieSBMaW5rIGluIGJhbm5lciBmb3IgTmV4dC5qcyAqLyB9fVxuICAgICAgICAvPlxuICAgICAgKX1cblxuICAgICAgPGZvb3RlciBjbGFzc05hbWU9XCJtdC02IHNtOm10LTggdGV4dC1jZW50ZXIgdGV4dC1zbGF0ZS00MDAgdGV4dC1zbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIHNwYWNlLXgtNCBtYi0yXCI+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGhyZWY9XCJodHRwczovL3d3dy5saW5rZWRpbi5jb20vaW4vbWF1cmljZS1ob2xkYS9cIlxuICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkxpbmtlZEluIFByb2ZpbGUgb2YgTWF1cmljZSBIb2xkYVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LWVtZXJhbGQtNDAwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTIwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzc05hbWU9XCJ3LTcgaC03XCI+PHBhdGggZD1cIk0yMC41IDJoLTE3QTEuNSAxLjUgMCAwMDIgMy41djE3QTEuNSAxLjUgMCAwMDMuNSAyMmgxN2ExLjUgMS41IDAgMDAxLjUtMS41di0xN0ExLjUgMS41IDAgMDAyMC41IDJ6TTggMTlINXYtOWgzek02LjUgOC4yNUExLjc1IDEuNzUgMCAxMTguMjUgNi41IDEuNzUgMS43NSAwIDAxNi41IDguMjV6TTE5IDE5aC0zdi00Ljc0YzAtMS40Mi0uNi0xLjkzLTEuMzgtMS45M0ExLjU0IDEuNTQgMCAwMDEzIDE0LjE5YTEuNTUgMS41NSAwIDAwLS4wOS41NlYxOWgtM3YtOWgyLjl2MS4zYTMuMTEgMy4xMSAwIDAxMi43LTEuNGMxLjU1IDAgMy4zOS45MyAzLjM5IDMuNjJWMTl6XCI+PC9wYXRoPjwvc3ZnPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vbmFnYV9hcHBhcmVsXCJcbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJJbnN0YWdyYW0gUHJvZmlsZSBvZiBOYWdhIEFwcGFyZWxcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1lbWVyYWxkLTQwMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3NOYW1lPVwidy03IGgtN1wiPjxwYXRoIGQ9XCJNMTIgMi4xNjNjMy4yMDQgMCAzLjU4NC4wMTIgNC44NS4wNyAxLjE3LjA1MyAxLjgwNS4yNDggMi4yMjcuNDE1LjU2Mi4yMTcuOTYuNDc3IDEuMzgyLjg5Ni40MTkuNDIuNjc5LjgxOS44OTYgMS4zODEuMTY4LjQyMi4zNjIgMS4wNTkuNDEzIDIuMjI4LjA1OCAxLjI2NS4wNyAxLjY0Ni4wNyA0Ljg1cy0uMDEyIDMuNTg0LS4wNyA0Ljg1Yy0uMDUzIDEuMTctLjI0OCAxLjgwNS0uNDEzIDIuMjI3LS4yMTcuNTYyLS40NzcuOTYtLjg5NiAxLjM4Mi0uNDIuNDE5LS44MTkuNjc5LTEuMzgxLS44OTYtLjQyMi4xNjgtMS4wNTkuMzYyLTIuMjI4LjQxMy0xLjI2NS4wNTgtMS42NDYuMDctNC44NS4wN3MtMy41ODQtLjAxMi00Ljg1LS4wN2MtMS4xNy0uMDUzLTEuODA1LjI0OC0yLjIyNy0uNDEzLS41NjItLjIxNy0uOTYtLjQ3Ny0xLjM4Mi0uODk2LS40MTktLjQyLS42NzktLjgxOS0uODk2LTEuMzgxLS4xNjguNDIyLS4zNjIgMS4wNTktLjQxMy0yLjIyOC0uMDU4LTEuMjY1LS4wNy0xLjY0Ni0uMDctNC44NXMuMDEyLTMuNTg0LjA3LTQuODVjLjA1MyAxLjE3LjI0OCAxLjgwNS40MTMtMi4yMjcuMjE3LjU2Mi40NzcuOTYuODk2LTEuMzgyLjQyLS40MTkuODE5LjY3OS0xLjM4MS0uODk2LjQyMi0uMTY4IDEuMDU5LjM2MiAyLjIyOC40MTMgMS4yNjUtLjA1OCAxLjY0Ni4wNyA0Ljg1LS4wN3ptMC0yLjE2M2MtMy4yNTkgMC0zLjY2Ny4wMTQtNC45NDcuMDcyLTEuMjguMDU4LTIuMTQ4LjI3Mi0yLjkxMi41NzhhNC45MTIgNC45MTIgMCAwMC0xLjc0OCAxLjE1IDQuOTEyIDQuOTEyIDAgMDAtMS4xNSAxLjc0OGMtLjMwNi43NjQtLjUyIDEuNjMyLS41NzggMi45MTJDMi4wMTQgOC4zMzMgMiA4Ljc0MSAyIDEycy4wMTQgMy42NjcuMDcyIDQuOTQ3Yy4wNTggMS4yOC4yNzIgMi4xNDguNTc4IDIuOTEyYTQuOTEyIDQuOTEyIDAgMDAxLjE1IDEuNzQ4IDQuOTEyIDQuOTEyIDAgMDAxLjc0OCAxLjE1Yy43NjQuMzA2IDEuNjMyLjUyIDIuOTEyLjU3OCAxLjI4LjA1OCAxLjY4OC4wNzIgNC45NDcuMDcyczMuNjY3LS4wMTQgNC45NDctLjA3MmMxLjI4LS4wNTggMi4xNDguMjcyIDIuOTEyLjU3OGE0LjkxMiA0LjkxMiAwIDAwMS43NDgtMS4xNSA0LjkxMiA0LjkxMiAwIDAwMS4xNS0xLjc0OGMuMzA2LS43NjQuNTIgMS42MzItLjU3OC0yLjkxMi4wNTgtMS4yOC4wNzItMS42ODguMDcyLTQuOTQ3cy0uMDE0LTMuNjY3LS4wNzItNC45NDdjLS4wNTgtMS4yOC0uMjcyLTIuMTQ4LS41NzgtMi45MTJhNC45MTIgNC45MTIgMCAwMC0xLjE1LTEuNzQ4IDQuOTEyIDQuOTEyIDAgMDAtMS43NDgtMS4xNWMtLjc2NC0uMzA2LTEuNjMyLS41Mi0yLjkxMi0uNTc4QzE1LjY2NyAyLjAxNCAxNS4yNTkgMiAxMiAyem0wIDUuODM4YTQuMTYyIDQuMTYyIDAgMTAwIDguMzI0IDQuMTYyIDQuMTYyIDAgMDAwLTguMzI0em0wIDYuNjYyYTIuNSAyLjUgMCAxMTAtNSAyLjUgMi41IDAgMDEwIDV6bTUuNzA1LTYuNjExYTEuMiAxLjIgMCAxMDAtMi40IDEuMiAxLjIgMCAwMDAgMi40elwiPjwvcGF0aD48L3N2Zz5cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJtYi0xXCI+UG93ZXJlZCBieSBOYWdhIEFwcGFyZWwuPC9wPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXgtM1wiPlxuICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9wcml2YWN5XCIgbGVnYWN5QmVoYXZpb3I+XG4gICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImhvdmVyOnRleHQtZW1lcmFsZC00MDAgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMjAwIHVuZGVybGluZVwiIGFyaWEtbGFiZWw9XCJWaWV3IFByaXZhY3kgUG9saWN5XCI+XG4gICAgICAgICAgICAgICAgUHJpdmFjeSBQb2xpY3lcbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9jb29raWVcIiBsZWdhY3lCZWhhdmlvcj5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1lbWVyYWxkLTQwMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgdW5kZXJsaW5lXCIgYXJpYS1sYWJlbD1cIlZpZXcgQ29va2llIFBvbGljeVwiPlxuICAgICAgICAgICAgICAgIENvb2tpZSBQb2xpY3lcbiAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZm9vdGVyPlxuICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgSG9tZVBhZ2U7XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsIkhlYWQiLCJMaW5rIiwiQm9hcmQiLCJHYW1lQ29udHJvbHMiLCJTdGF0dXNCYXIiLCJQcm9tb3Rpb25Nb2RhbCIsIkNvb2tpZUJhbm5lciIsIkNoZXNzTG9naWMiLCJnZXRBSU1vdmUiLCJQaWVjZUNvbG9yIiwiUGllY2VUeXBlIiwiREVGQVVMVF9ESUZGSUNVTFRZIiwiQk9BUkRfUk9XUyIsIkJPQVJEX0NPTFMiLCJnZXRTcXVhcmVDb29yZGluYXRlcyIsImdldFNxdWFyZUlkIiwiSG9tZVBhZ2UiLCJpbml0aWFsTG9naWNJbnN0YW5jZSIsImNoZXNzTG9naWNJbnN0YW5jZSIsInNldENoZXNzTG9naWNJbnN0YW5jZSIsImdhbWVTdGF0ZSIsInNldEdhbWVTdGF0ZSIsImdldEluaXRpYWxHYW1lU3RhdGUiLCJkaWZmaWN1bHR5Iiwic2V0RGlmZmljdWx0eSIsImlzQUlUdXJuIiwic2V0SXNBSVR1cm4iLCJpc0dhbWVJblByb2dyZXNzIiwic2V0SXNHYW1lSW5Qcm9ncmVzcyIsInNob3dDb29raWVCYW5uZXIiLCJzZXRTaG93Q29va2llQmFubmVyIiwiY29uc2VudCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJoYW5kbGVBY2NlcHRDb29raWVzIiwic2V0SXRlbSIsImhhbmRsZURlY2xpbmVDb29raWVzIiwibG9naWNJbnN0YW5jZSIsImluaXRpYWxCb2FyZFBpZWNlcyIsImdldEJvYXJkIiwiZnVsbEJvYXJkU3RhdGUiLCJyIiwicm93U3F1YXJlcyIsImMiLCJpZCIsInB1c2giLCJwaWVjZSIsImlzVmFsaWRNb3ZlIiwiaXNDaGVjayIsImlzU2VsZWN0ZWQiLCJib2FyZFN0YXRlIiwiY3VycmVudFBsYXllciIsImdldEN1cnJlbnRQbGF5ZXIiLCJjYXN0bGluZ0F2YWlsYWJpbGl0eSIsImdldENhc3RsaW5nQXZhaWxhYmlsaXR5IiwiZW5QYXNzYW50VGFyZ2V0IiwiZ2V0RW5QYXNzYW50VGFyZ2V0IiwiaGFsZk1vdmVDbG9jayIsImdldEhhbGZNb3ZlQ2xvY2siLCJmdWxsTW92ZU51bWJlciIsImdldE1vdmVOdW1iZXIiLCJzZWxlY3RlZFNxdWFyZSIsInZhbGlkTW92ZXMiLCJpc0NoZWNrbWF0ZSIsImlzU3RhbGVtYXRlIiwiaXNEcmF3Iiwid2lubmVyIiwicHJvbW90aW5nUGF3biIsImdhbWVTdGF0dXNNZXNzYWdlIiwibW92ZUhpc3RvcnkiLCJmaW5kS2luZ1NxdWFyZSIsImtpbmdDb2xvciIsImJvYXJkIiwidHlwZSIsIktJTkciLCJjb2xvciIsInBlcmZvcm1Nb3ZlIiwibW92ZSIsImN1cnJlbnRJbnN0YW5jZSIsIm1vdmVTdWNjZXNzZnVsIiwibWFrZU1vdmUiLCJwbGF5ZXJXaG9zZVR1cm5Jc05leHQiLCJwbGF5ZXJXaG9KdXN0TW92ZWQiLCJXSElURSIsIkJMQUNLIiwiY2hlY2ttYXRlIiwic3RhbGVtYXRlIiwicHJldiIsImlzS2luZ0luQ2hlY2siLCJjb25zb2xlIiwiZXJyb3IiLCJoYW5kbGVTcXVhcmVDbGljayIsInNxdWFyZUlkIiwicGllY2VPbkNsaWNrZWRTcXVhcmUiLCJnZXRQaWVjZUF0IiwiaW5jbHVkZXMiLCJmcm9tIiwidG8iLCJmcm9tUGllY2UiLCJ0b0Nvb3JkcyIsIlBBV04iLCJyb3ciLCJuZXdWYWxpZE1vdmVzIiwiZ2V0VmFsaWRNb3Zlc0ZvclBpZWNlIiwiaGFuZGxlUHJvbW90aW9uIiwicHJvbW90ZWRQaWVjZVR5cGUiLCJwcm9tb3Rpb24iLCJyZXNldEdhbWUiLCJuZXdMb2dpY0luc3RhbmNlIiwic3RhcnRHYW1lIiwiY3VycmVudExvZ2ljUGxheWVyIiwibmV3Qm9hcmRQaWVjZXMiLCJpc0N1cnJlbnRseUluQ2hlY2siLCJzdGF0dXNNZXNzYWdlIiwid2lubmVyQ29sb3IiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwia2luZ1NxdWFyZUlkIiwidXBkYXRlZEZ1bGxCb2FyZFN0YXRlIiwibWFwIiwickluZGV4Iiwic3EiLCJjSW5kZXgiLCJjdXJyZW50U3F1YXJlSWQiLCJwaWVjZU9uU3F1YXJlIiwidGltZW91dElkIiwiYWlQbGF5ZXJDb2xvciIsIndhcm4iLCJ2YWxpZE1vdmVzRm9yQUlQbGF5ZXIiLCJnZXRBbGxWYWxpZE1vdmVzRm9yUGxheWVyIiwidmFsaWRNb3Zlc1VjaSIsIm0iLCJ1Y2kiLCJ0b0xvd2VyQ2FzZSIsImxlbmd0aCIsImlzS2luZ0luQ2hlY2tGb3JBSSIsImFpVGhpbmtUaW1lIiwiTWF0aCIsIm1heCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJhaUNob3NlblVjaSIsIm9yaWdpbmFsQ2hvaWNlIiwiZmxvb3IiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJwcm9tb3Rpb25DaGFyIiwidW5kZWZpbmVkIiwicHJvbW90aW9uUGllY2UiLCJRVUVFTiIsIlJPT0siLCJCSVNIT1AiLCJLTklHSFQiLCJjbGVhclRpbWVvdXQiLCJoYW5kbGVEaWZmaWN1bHR5Q2hhbmdlIiwibGV2ZWwiLCJ0aXRsZSIsImRpdiIsImNsYXNzTmFtZSIsIm1haW4iLCJoZWFkZXIiLCJpbWciLCJzcmMiLCJhbHQiLCJhcmlhLWhpZGRlbiIsImgxIiwib25TcXVhcmVDbGljayIsInBsYXllckNvbG9yIiwibWVzc2FnZSIsIm9uRGlmZmljdWx0eUNoYW5nZSIsIm9uUmVzZXRHYW1lIiwib25Qcm9tb3RlIiwib25BY2NlcHQiLCJvbkRlY2xpbmUiLCJvbkxlYXJuTW9yZSIsImZvb3RlciIsImEiLCJocmVmIiwidGFyZ2V0IiwicmVsIiwiYXJpYS1sYWJlbCIsInN2ZyIsInhtbG5zIiwidmlld0JveCIsImZpbGwiLCJwYXRoIiwiZCIsInAiLCJsZWdhY3lCZWhhdmlvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index.tsx\n"));

/***/ }),

/***/ "./services/chessLogic.ts":
/*!********************************!*\
  !*** ./services/chessLogic.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChessLogic: function() { return /* binding */ ChessLogic; }\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/types */ \"./types.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/constants */ \"./constants.ts\");\n/* harmony import */ var _utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/boardUtils */ \"./utils/boardUtils.ts\");\n\n\n\nclass ChessLogic {\n    isValidSquare(row, col) {\n        return row >= 0 && row < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS && col >= 0 && col < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS;\n    }\n    getBoard() {\n        return this.board.map((row)=>row.map((piece)=>piece ? {\n                    ...piece\n                } : null));\n    }\n    getCurrentPlayer() {\n        return this.currentPlayer;\n    }\n    getCastlingAvailability() {\n        return {\n            ...this.castlingAvailability\n        };\n    }\n    getEnPassantTarget() {\n        return this.enPassantTarget;\n    }\n    getMoveNumber() {\n        return this.fullMoveNumber;\n    }\n    getHalfMoveClock() {\n        return this.halfMoveClock;\n    }\n    getPieceAt(squareId) {\n        const coords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(squareId);\n        if (!coords) return null;\n        const piece = this.board[coords.row][coords.col];\n        return piece ? {\n            ...piece\n        } : null;\n    }\n    isSquareAttacked(squareId, attackerColor, board) {\n        const targetCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(squareId);\n        if (!targetCoords) return false;\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS; r++){\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS; c++){\n                const piece = board[r][c];\n                if (piece && piece.color === attackerColor) {\n                    const fromCoords = {\n                        row: r,\n                        col: c\n                    };\n                    if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN) {\n                        const direction = piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? -1 : 1;\n                        if (fromCoords.row + direction === targetCoords.row) {\n                            if (fromCoords.col + 1 === targetCoords.col || fromCoords.col - 1 === targetCoords.col) {\n                                return true;\n                            }\n                        }\n                    } else {\n                        const pseudoMoves = this.generatePseudoLegalMovesForPiece((0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(r, c), board, piece);\n                        if (pseudoMoves.some((moveTargetId)=>moveTargetId === squareId)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    isKingInCheck(kingColor, boardToCheck) {\n        const currentBoard = boardToCheck || this.board;\n        let kingSquareId = null;\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS; r++){\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS; c++){\n                const piece = currentBoard[r][c];\n                if (piece && piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING && piece.color === kingColor) {\n                    kingSquareId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(r, c);\n                    break;\n                }\n            }\n            if (kingSquareId) break;\n        }\n        if (!kingSquareId) return false;\n        const opponentColor = kingColor === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE;\n        return this.isSquareAttacked(kingSquareId, opponentColor, currentBoard);\n    }\n    generatePseudoLegalMovesForPiece(squareId, board, piece) {\n        const fromCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(squareId);\n        if (!fromCoords) return [];\n        let moves = [];\n        if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN) {\n            const direction = piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? -1 : 1;\n            let toCoords = {\n                row: fromCoords.row + direction,\n                col: fromCoords.col\n            };\n            if (this.isValidSquare(toCoords.row, toCoords.col) && !board[toCoords.row][toCoords.col]) {\n                const toSqId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toCoords.row, toCoords.col);\n                if (toSqId) moves.push(toSqId);\n                if (!piece.hasMoved) {\n                    toCoords = {\n                        row: fromCoords.row + 2 * direction,\n                        col: fromCoords.col\n                    };\n                    if (this.isValidSquare(toCoords.row, toCoords.col) && !board[toCoords.row][toCoords.col] && !board[fromCoords.row + direction][fromCoords.col]) {\n                        const toSqId2 = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toCoords.row, toCoords.col);\n                        if (toSqId2) moves.push(toSqId2);\n                    }\n                }\n            }\n            [\n                -1,\n                1\n            ].forEach((colOffset)=>{\n                toCoords = {\n                    row: fromCoords.row + direction,\n                    col: fromCoords.col + colOffset\n                };\n                if (this.isValidSquare(toCoords.row, toCoords.col)) {\n                    const targetPiece = board[toCoords.row][toCoords.col];\n                    const toSqIdCand = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toCoords.row, toCoords.col);\n                    if (toSqIdCand) {\n                        if (targetPiece && targetPiece.color !== piece.color) moves.push(toSqIdCand);\n                        const enPassantTargetCoords = this.enPassantTarget ? (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(this.enPassantTarget) : null;\n                        if (enPassantTargetCoords && toCoords.row === enPassantTargetCoords.row && toCoords.col === enPassantTargetCoords.col) moves.push(toSqIdCand);\n                    }\n                }\n            });\n        } else if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT) {\n            const knightMoves = [\n                [\n                    -2,\n                    -1\n                ],\n                [\n                    -2,\n                    1\n                ],\n                [\n                    -1,\n                    -2\n                ],\n                [\n                    -1,\n                    2\n                ],\n                [\n                    1,\n                    -2\n                ],\n                [\n                    1,\n                    2\n                ],\n                [\n                    2,\n                    -1\n                ],\n                [\n                    2,\n                    1\n                ]\n            ];\n            knightMoves.forEach((param)=>{\n                let [dr, dc] = param;\n                const toCoords = {\n                    row: fromCoords.row + dr,\n                    col: fromCoords.col + dc\n                };\n                if (this.isValidSquare(toCoords.row, toCoords.col)) {\n                    const targetPiece = board[toCoords.row][toCoords.col];\n                    if (!targetPiece || targetPiece.color !== piece.color) {\n                        const toSqId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toCoords.row, toCoords.col);\n                        if (toSqId) moves.push(toSqId);\n                    }\n                }\n            });\n        } else if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK || piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP || piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN) {\n            const directions = piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK ? [\n                [\n                    -1,\n                    0\n                ],\n                [\n                    1,\n                    0\n                ],\n                [\n                    0,\n                    -1\n                ],\n                [\n                    0,\n                    1\n                ]\n            ] : piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP ? [\n                [\n                    -1,\n                    -1\n                ],\n                [\n                    -1,\n                    1\n                ],\n                [\n                    1,\n                    -1\n                ],\n                [\n                    1,\n                    1\n                ]\n            ] : [\n                [\n                    -1,\n                    0\n                ],\n                [\n                    1,\n                    0\n                ],\n                [\n                    0,\n                    -1\n                ],\n                [\n                    0,\n                    1\n                ],\n                [\n                    -1,\n                    -1\n                ],\n                [\n                    -1,\n                    1\n                ],\n                [\n                    1,\n                    -1\n                ],\n                [\n                    1,\n                    1\n                ]\n            ];\n            directions.forEach((param)=>{\n                let [dr, dc] = param;\n                for(let i = 1; i < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS; i++){\n                    const toRow = fromCoords.row + dr * i;\n                    const toCol = fromCoords.col + dc * i;\n                    if (!this.isValidSquare(toRow, toCol)) break;\n                    const targetPieceOnPath = board[toRow][toCol];\n                    const toSqId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toRow, toCol);\n                    if (toSqId) {\n                        if (targetPieceOnPath) {\n                            if (targetPieceOnPath.color !== piece.color) moves.push(toSqId);\n                            break;\n                        }\n                        moves.push(toSqId);\n                    } else {\n                        break;\n                    }\n                }\n            });\n        } else if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING) {\n            const kingMoves = [\n                [\n                    -1,\n                    0\n                ],\n                [\n                    1,\n                    0\n                ],\n                [\n                    0,\n                    -1\n                ],\n                [\n                    0,\n                    1\n                ],\n                [\n                    -1,\n                    -1\n                ],\n                [\n                    -1,\n                    1\n                ],\n                [\n                    1,\n                    -1\n                ],\n                [\n                    1,\n                    1\n                ]\n            ];\n            kingMoves.forEach((param)=>{\n                let [dr, dc] = param;\n                const toRow = fromCoords.row + dr;\n                const toCol = fromCoords.col + dc;\n                if (this.isValidSquare(toRow, toCol)) {\n                    const targetPiece = board[toRow][toCol];\n                    if (!targetPiece || targetPiece.color !== piece.color) {\n                        const toSqId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(toRow, toCol);\n                        if (toSqId) moves.push(toSqId);\n                    }\n                }\n            });\n        }\n        return moves;\n    }\n    getValidMovesForPiece(squareId) {\n        const piece = this.getPieceAt(squareId);\n        if (!piece || piece.color !== this.currentPlayer) return [];\n        const pseudoLegalTargetSquares = this.generatePseudoLegalMovesForPiece(squareId, this.board, piece);\n        const legalMoves = [];\n        pseudoLegalTargetSquares.forEach((targetSquareId)=>{\n            const tempBoard = this.board.map((row)=>row.map((p)=>p ? {\n                        ...p\n                    } : null));\n            const fromCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(squareId);\n            const toCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(targetSquareId);\n            const movedPiece = tempBoard[fromCoords.row][fromCoords.col];\n            if (movedPiece) {\n                tempBoard[toCoords.row][toCoords.col] = movedPiece;\n                tempBoard[fromCoords.row][fromCoords.col] = null;\n                if (movedPiece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN && targetSquareId === this.enPassantTarget) {\n                    const capturedPawnRow = fromCoords.row;\n                    const capturedPawnCol = toCoords.col;\n                    if (this.isValidSquare(capturedPawnRow, capturedPawnCol)) tempBoard[capturedPawnRow][capturedPawnCol] = null;\n                }\n            }\n            if (!this.isKingInCheck(this.currentPlayer, tempBoard)) legalMoves.push(targetSquareId);\n        });\n        if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING && !piece.hasMoved) {\n            const kingRow = piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? 7 : 0;\n            if (piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE && this.castlingAvailability.whiteKingSide || piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK && this.castlingAvailability.blackKingSide) {\n                if (!this.board[kingRow][5] && !this.board[kingRow][6]) {\n                    const rookSquareId = piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.kingSide : _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.kingSide;\n                    const rook = this.getPieceAt(rookSquareId);\n                    if (rook && rook.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK && !rook.hasMoved) {\n                        const kingStartSquare = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 4);\n                        const kingPathSquare1 = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 5);\n                        const kingPathSquare2 = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 6);\n                        if (!this.isSquareAttacked(kingStartSquare, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board) && !this.isSquareAttacked(kingPathSquare1, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board) && !this.isSquareAttacked(kingPathSquare2, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board)) {\n                            legalMoves.push(kingPathSquare2);\n                        }\n                    }\n                }\n            }\n            if (piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE && this.castlingAvailability.whiteQueenSide || piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK && this.castlingAvailability.blackQueenSide) {\n                if (!this.board[kingRow][1] && !this.board[kingRow][2] && !this.board[kingRow][3]) {\n                    const rookSquareId = piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.queenSide : _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.queenSide;\n                    const rook = this.getPieceAt(rookSquareId);\n                    if (rook && rook.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK && !rook.hasMoved) {\n                        const kingStartSquare = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 4);\n                        const kingPathSquare1 = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 3);\n                        const kingPathSquare2 = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(kingRow, 2);\n                        if (!this.isSquareAttacked(kingStartSquare, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board) && !this.isSquareAttacked(kingPathSquare1, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board) && !this.isSquareAttacked(kingPathSquare2, piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE, this.board)) {\n                            legalMoves.push(kingPathSquare2);\n                        }\n                    }\n                }\n            }\n        }\n        return legalMoves;\n    }\n    makeMove(move) {\n        const fromCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(move.from);\n        const toCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(move.to);\n        if (!fromCoords || !toCoords) return false;\n        const pieceToMove = this.board[fromCoords.row][fromCoords.col];\n        if (!pieceToMove || pieceToMove.color !== this.currentPlayer) return false;\n        const capturedPiece = this.board[toCoords.row][toCoords.col];\n        let isPawnMove = pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN;\n        let isCapture = !!capturedPiece;\n        if (isPawnMove || isCapture) this.halfMoveClock = 0;\n        else this.halfMoveClock++;\n        this.board[toCoords.row][toCoords.col] = pieceToMove;\n        this.board[fromCoords.row][fromCoords.col] = null;\n        pieceToMove.hasMoved = true;\n        let oldEnPassantTarget = this.enPassantTarget;\n        this.enPassantTarget = null;\n        if (isPawnMove && move.to === oldEnPassantTarget && !capturedPiece) {\n            const capturedPawnRow = fromCoords.row;\n            const capturedPawnCol = toCoords.col;\n            if (this.isValidSquare(capturedPawnRow, capturedPawnCol)) this.board[capturedPawnRow][capturedPawnCol] = null;\n        }\n        if (pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN && move.promotion) {\n            if (pieceToMove.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE && toCoords.row === 0 || pieceToMove.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK && toCoords.row === _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS - 1) {\n                this.board[toCoords.row][toCoords.col] = {\n                    ...pieceToMove,\n                    type: move.promotion\n                };\n            }\n        }\n        if (pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN && Math.abs(toCoords.row - fromCoords.row) === 2) {\n            const enPassantRow = (fromCoords.row + toCoords.row) / 2;\n            this.enPassantTarget = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(enPassantRow, fromCoords.col);\n        }\n        if (pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING && Math.abs(toCoords.col - fromCoords.col) === 2) {\n            let rookFromCol, rookToCol;\n            if (toCoords.col > fromCoords.col) {\n                rookFromCol = _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS - 1;\n                rookToCol = toCoords.col - 1;\n            } else {\n                rookFromCol = 0;\n                rookToCol = toCoords.col + 1;\n            }\n            const rook = this.board[fromCoords.row][rookFromCol];\n            if (rook && rook.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK) {\n                this.board[fromCoords.row][rookToCol] = rook;\n                this.board[fromCoords.row][rookFromCol] = null;\n                rook.hasMoved = true;\n            }\n        }\n        if (pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING) {\n            if (pieceToMove.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE) {\n                this.castlingAvailability.whiteKingSide = false;\n                this.castlingAvailability.whiteQueenSide = false;\n            } else {\n                this.castlingAvailability.blackKingSide = false;\n                this.castlingAvailability.blackQueenSide = false;\n            }\n        }\n        if (pieceToMove.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK) {\n            if (pieceToMove.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE) {\n                if (move.from === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.kingSide) this.castlingAvailability.whiteKingSide = false;\n                if (move.from === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.queenSide) this.castlingAvailability.whiteQueenSide = false;\n            } else {\n                if (move.from === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.kingSide) this.castlingAvailability.blackKingSide = false;\n                if (move.from === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.queenSide) this.castlingAvailability.blackQueenSide = false;\n            }\n        }\n        if (capturedPiece && capturedPiece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK) {\n            if (move.to === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.kingSide) this.castlingAvailability.whiteKingSide = false;\n            if (move.to === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.white.queenSide) this.castlingAvailability.whiteQueenSide = false;\n            if (move.to === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.kingSide) this.castlingAvailability.blackKingSide = false;\n            if (move.to === _constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS.black.queenSide) this.castlingAvailability.blackQueenSide = false;\n        }\n        this.currentPlayer = this.currentPlayer === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK : _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE;\n        if (this.currentPlayer === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE) this.fullMoveNumber++;\n        this.moveHistory.push(move);\n        return true;\n    }\n    getAllValidMovesForPlayer(playerColor) {\n        const allMoves = [];\n        if (playerColor !== this.currentPlayer) return [];\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS; r++){\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS; c++){\n                const piece = this.board[r][c];\n                if (piece && piece.color === playerColor) {\n                    const fromSquareId = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareId)(r, c);\n                    const validTargetSquares = this.getValidMovesForPiece(fromSquareId);\n                    validTargetSquares.forEach((targetSquareId)=>{\n                        const toCoords = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.getSquareCoordinates)(targetSquareId);\n                        if (piece.type === _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN && (piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE && toCoords.row === 0 || piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK && toCoords.row === _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS - 1)) {\n                            _constants__WEBPACK_IMPORTED_MODULE_1__.PROMOTION_PIECES.forEach((promoType)=>allMoves.push({\n                                    from: fromSquareId,\n                                    to: targetSquareId,\n                                    promotion: promoType\n                                }));\n                        } else {\n                            allMoves.push({\n                                from: fromSquareId,\n                                to: targetSquareId\n                            });\n                        }\n                    });\n                }\n            }\n        }\n        return allMoves;\n    }\n    isCheckmate(playerColor) {\n        if (!this.isKingInCheck(playerColor, this.board)) return false;\n        return this.getAllValidMovesForPlayer(playerColor).length === 0;\n    }\n    isStalemate(playerColor) {\n        if (this.isKingInCheck(playerColor, this.board)) return false;\n        return this.getAllValidMovesForPlayer(playerColor).length === 0;\n    }\n    pieceToFenChar(piece) {\n        let char;\n        switch(piece.type){\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN:\n                char = \"p\";\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT:\n                char = \"n\";\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP:\n                char = \"b\";\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK:\n                char = \"r\";\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN:\n                char = \"q\";\n                break;\n            case _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING:\n                char = \"k\";\n                break;\n            default:\n                return \"\";\n        }\n        return piece.color === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? char.toUpperCase() : char;\n    }\n    boardToFEN() {\n        let fen = \"\";\n        for(let r = 0; r < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS; r++){\n            let emptyCount = 0;\n            for(let c = 0; c < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS; c++){\n                const piece = this.board[r][c];\n                if (piece) {\n                    if (emptyCount > 0) {\n                        fen += emptyCount;\n                        emptyCount = 0;\n                    }\n                    fen += this.pieceToFenChar(piece);\n                } else emptyCount++;\n            }\n            if (emptyCount > 0) fen += emptyCount;\n            if (r < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS - 1) fen += \"/\";\n        }\n        fen += \" \";\n        fen += this.currentPlayer === _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE ? \"w\" : \"b\";\n        fen += \" \";\n        let castleFen = \"\";\n        if (this.castlingAvailability.whiteKingSide) castleFen += \"K\";\n        if (this.castlingAvailability.whiteQueenSide) castleFen += \"Q\";\n        if (this.castlingAvailability.blackKingSide) castleFen += \"k\";\n        if (this.castlingAvailability.blackQueenSide) castleFen += \"q\";\n        fen += castleFen.length > 0 ? castleFen : \"-\";\n        fen += \" \";\n        fen += this.enPassantTarget ? this.enPassantTarget : \"-\";\n        fen += \" \";\n        fen += this.halfMoveClock;\n        fen += \" \";\n        fen += this.fullMoveNumber;\n        return fen;\n    }\n    constructor(initialGameState){\n        if (initialGameState && initialGameState.boardState) {\n            this.board = initialGameState.boardState.map((row)=>row.map((sq)=>sq.piece ? {\n                        ...sq.piece\n                    } : null));\n            this.currentPlayer = initialGameState.currentPlayer || _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE;\n            this.castlingAvailability = initialGameState.castlingAvailability ? {\n                ...initialGameState.castlingAvailability\n            } : {\n                whiteKingSide: true,\n                whiteQueenSide: true,\n                blackKingSide: true,\n                blackQueenSide: true\n            };\n            this.enPassantTarget = initialGameState.enPassantTarget || null;\n            this.halfMoveClock = initialGameState.halfMoveClock || 0;\n            this.fullMoveNumber = initialGameState.fullMoveNumber || 1;\n            this.moveHistory = initialGameState.moveHistory ? [\n                ...initialGameState.moveHistory\n            ] : [];\n        } else {\n            this.board = (0,_utils_boardUtils__WEBPACK_IMPORTED_MODULE_2__.createInitialBoard)();\n            this.currentPlayer = _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE;\n            this.castlingAvailability = {\n                whiteKingSide: true,\n                whiteQueenSide: true,\n                blackKingSide: true,\n                blackQueenSide: true\n            };\n            this.enPassantTarget = null;\n            this.halfMoveClock = 0;\n            this.fullMoveNumber = 1;\n            this.moveHistory = [];\n        }\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXJ2aWNlcy9jaGVzc0xvZ2ljLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFHaUI7QUFDcUc7QUFDQTtBQUcvRyxNQUFNVTtJQStCSEMsY0FBY0MsR0FBVyxFQUFFQyxHQUFXLEVBQVc7UUFDdkQsT0FBT0QsT0FBTyxLQUFLQSxNQUFNVixrREFBVUEsSUFBSVcsT0FBTyxLQUFLQSxNQUFNVixrREFBVUE7SUFDckU7SUFFQVcsV0FBK0I7UUFDN0IsT0FBTyxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsR0FBRyxDQUFDSixDQUFBQSxNQUFPQSxJQUFJSSxHQUFHLENBQUNDLENBQUFBLFFBQVNBLFFBQVE7b0JBQUMsR0FBR0EsS0FBSztnQkFBQSxJQUFJO0lBQ3JFO0lBRUFDLG1CQUErQjtRQUM3QixPQUFPLElBQUksQ0FBQ0MsYUFBYTtJQUMzQjtJQUVBQywwQkFBZ0Q7UUFDOUMsT0FBTztZQUFDLEdBQUcsSUFBSSxDQUFDQyxvQkFBb0I7UUFBQTtJQUN0QztJQUVBQyxxQkFBc0M7UUFDcEMsT0FBTyxJQUFJLENBQUNDLGVBQWU7SUFDN0I7SUFFQUMsZ0JBQXdCO1FBQ3RCLE9BQU8sSUFBSSxDQUFDQyxjQUFjO0lBQzVCO0lBRUFDLG1CQUEyQjtRQUN6QixPQUFPLElBQUksQ0FBQ0MsYUFBYTtJQUMzQjtJQUVBQyxXQUFXQyxRQUFrQixFQUFnQjtRQUMzQyxNQUFNQyxTQUFTeEIsdUVBQW9CQSxDQUFDdUI7UUFDcEMsSUFBSSxDQUFDQyxRQUFRLE9BQU87UUFDcEIsTUFBTWIsUUFBUSxJQUFJLENBQUNGLEtBQUssQ0FBQ2UsT0FBT2xCLEdBQUcsQ0FBQyxDQUFDa0IsT0FBT2pCLEdBQUcsQ0FBQztRQUNoRCxPQUFPSSxRQUFRO1lBQUMsR0FBR0EsS0FBSztRQUFBLElBQUk7SUFDOUI7SUFFUWMsaUJBQWlCRixRQUFrQixFQUFFRyxhQUF5QixFQUFFakIsS0FBeUIsRUFBVztRQUMxRyxNQUFNa0IsZUFBZTNCLHVFQUFvQkEsQ0FBQ3VCO1FBQzFDLElBQUksQ0FBQ0ksY0FBYyxPQUFPO1FBRTFCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJaEMsa0RBQVVBLEVBQUVnQyxJQUFLO1lBQ25DLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJaEMsa0RBQVVBLEVBQUVnQyxJQUFLO2dCQUNuQyxNQUFNbEIsUUFBUUYsS0FBSyxDQUFDbUIsRUFBRSxDQUFDQyxFQUFFO2dCQUN6QixJQUFJbEIsU0FBU0EsTUFBTW1CLEtBQUssS0FBS0osZUFBZTtvQkFDMUMsTUFBTUssYUFBYTt3QkFBRXpCLEtBQUtzQjt3QkFBR3JCLEtBQUtzQjtvQkFBRTtvQkFDcEMsSUFBSWxCLE1BQU1xQixJQUFJLEtBQUt0Qyw2Q0FBU0EsQ0FBQ3VDLElBQUksRUFBRTt3QkFDakMsTUFBTUMsWUFBWXZCLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ3dDLEtBQUssR0FBRyxDQUFDLElBQUk7d0JBQzFELElBQUlKLFdBQVd6QixHQUFHLEdBQUc0QixjQUFjUCxhQUFhckIsR0FBRyxFQUFFOzRCQUNuRCxJQUFJeUIsV0FBV3hCLEdBQUcsR0FBRyxNQUFNb0IsYUFBYXBCLEdBQUcsSUFBSXdCLFdBQVd4QixHQUFHLEdBQUcsTUFBTW9CLGFBQWFwQixHQUFHLEVBQUU7Z0NBQ3RGLE9BQU87NEJBQ1Q7d0JBQ0Y7b0JBQ0YsT0FBTzt3QkFDTCxNQUFNNkIsY0FBYyxJQUFJLENBQUNDLGdDQUFnQyxDQUFDcEMsOERBQVdBLENBQUMyQixHQUFFQyxJQUFLcEIsT0FBT0U7d0JBQ3BGLElBQUl5QixZQUFZRSxJQUFJLENBQUNDLENBQUFBLGVBQWdCQSxpQkFBaUJoQixXQUFXOzRCQUM3RCxPQUFPO3dCQUNYO29CQUNGO2dCQUNGO1lBQ0Y7UUFDRjtRQUNBLE9BQU87SUFDVDtJQUVBaUIsY0FBY0MsU0FBcUIsRUFBRUMsWUFBaUMsRUFBVztRQUMvRSxNQUFNQyxlQUFlRCxnQkFBZ0IsSUFBSSxDQUFDakMsS0FBSztRQUMvQyxJQUFJbUMsZUFBZ0M7UUFDcEMsSUFBSyxJQUFJaEIsSUFBSSxHQUFHQSxJQUFJaEMsa0RBQVVBLEVBQUVnQyxJQUFLO1lBQ25DLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJaEMsa0RBQVVBLEVBQUVnQyxJQUFLO2dCQUNuQyxNQUFNbEIsUUFBUWdDLFlBQVksQ0FBQ2YsRUFBRSxDQUFDQyxFQUFFO2dCQUNoQyxJQUFJbEIsU0FBU0EsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDbUQsSUFBSSxJQUFJbEMsTUFBTW1CLEtBQUssS0FBS1csV0FBVztvQkFDdkVHLGVBQWUzQyw4REFBV0EsQ0FBQzJCLEdBQUdDO29CQUM5QjtnQkFDRjtZQUNGO1lBQ0EsSUFBSWUsY0FBYztRQUNwQjtRQUNBLElBQUksQ0FBQ0EsY0FBYyxPQUFPO1FBQzFCLE1BQU1FLGdCQUFnQkwsY0FBYzlDLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHeEMsOENBQVVBLENBQUNvRCxLQUFLLEdBQUdwRCw4Q0FBVUEsQ0FBQ3dDLEtBQUs7UUFDMUYsT0FBTyxJQUFJLENBQUNWLGdCQUFnQixDQUFDbUIsY0FBY0UsZUFBZUg7SUFDNUQ7SUFFUU4saUNBQWlDZCxRQUFrQixFQUFFZCxLQUF5QixFQUFFRSxLQUFZLEVBQWM7UUFDaEgsTUFBTW9CLGFBQWEvQix1RUFBb0JBLENBQUN1QjtRQUN4QyxJQUFJLENBQUNRLFlBQVksT0FBTyxFQUFFO1FBQzFCLElBQUlpQixRQUFvQixFQUFFO1FBQzFCLElBQUlyQyxNQUFNcUIsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUN1QyxJQUFJLEVBQUU7WUFDL0IsTUFBTUMsWUFBWXZCLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ3dDLEtBQUssR0FBRyxDQUFDLElBQUk7WUFDMUQsSUFBSWMsV0FBVztnQkFBRTNDLEtBQUt5QixXQUFXekIsR0FBRyxHQUFHNEI7Z0JBQVczQixLQUFLd0IsV0FBV3hCLEdBQUc7WUFBQztZQUN0RSxJQUFJLElBQUksQ0FBQ0YsYUFBYSxDQUFDNEMsU0FBUzNDLEdBQUcsRUFBRTJDLFNBQVMxQyxHQUFHLEtBQUssQ0FBQ0UsS0FBSyxDQUFDd0MsU0FBUzNDLEdBQUcsQ0FBQyxDQUFDMkMsU0FBUzFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN0RixNQUFNMkMsU0FBU2pELDhEQUFXQSxDQUFDZ0QsU0FBUzNDLEdBQUcsRUFBRTJDLFNBQVMxQyxHQUFHO2dCQUNyRCxJQUFHMkMsUUFBUUYsTUFBTUcsSUFBSSxDQUFDRDtnQkFDdEIsSUFBSSxDQUFDdkMsTUFBTXlDLFFBQVEsRUFBRTtvQkFDakJILFdBQVc7d0JBQUUzQyxLQUFLeUIsV0FBV3pCLEdBQUcsR0FBRyxJQUFJNEI7d0JBQVczQixLQUFLd0IsV0FBV3hCLEdBQUc7b0JBQUM7b0JBQ3RFLElBQUksSUFBSSxDQUFDRixhQUFhLENBQUM0QyxTQUFTM0MsR0FBRyxFQUFFMkMsU0FBUzFDLEdBQUcsS0FBSyxDQUFDRSxLQUFLLENBQUN3QyxTQUFTM0MsR0FBRyxDQUFDLENBQUMyQyxTQUFTMUMsR0FBRyxDQUFDLElBQUksQ0FBQ0UsS0FBSyxDQUFDc0IsV0FBV3pCLEdBQUcsR0FBQzRCLFVBQVUsQ0FBQ0gsV0FBV3hCLEdBQUcsQ0FBQyxFQUFFO3dCQUMzSSxNQUFNOEMsVUFBVXBELDhEQUFXQSxDQUFDZ0QsU0FBUzNDLEdBQUcsRUFBRTJDLFNBQVMxQyxHQUFHO3dCQUN0RCxJQUFHOEMsU0FBU0wsTUFBTUcsSUFBSSxDQUFDRTtvQkFDMUI7Z0JBQ0o7WUFDSjtZQUNBO2dCQUFDLENBQUM7Z0JBQUc7YUFBRSxDQUFDQyxPQUFPLENBQUNDLENBQUFBO2dCQUNaTixXQUFXO29CQUFFM0MsS0FBS3lCLFdBQVd6QixHQUFHLEdBQUc0QjtvQkFBVzNCLEtBQUt3QixXQUFXeEIsR0FBRyxHQUFHZ0Q7Z0JBQVU7Z0JBQzlFLElBQUksSUFBSSxDQUFDbEQsYUFBYSxDQUFDNEMsU0FBUzNDLEdBQUcsRUFBRTJDLFNBQVMxQyxHQUFHLEdBQUc7b0JBQ2hELE1BQU1pRCxjQUFjL0MsS0FBSyxDQUFDd0MsU0FBUzNDLEdBQUcsQ0FBQyxDQUFDMkMsU0FBUzFDLEdBQUcsQ0FBQztvQkFDckQsTUFBTWtELGFBQWF4RCw4REFBV0EsQ0FBQ2dELFNBQVMzQyxHQUFHLEVBQUUyQyxTQUFTMUMsR0FBRztvQkFDekQsSUFBSWtELFlBQVk7d0JBQ1osSUFBSUQsZUFBZUEsWUFBWTFCLEtBQUssS0FBS25CLE1BQU1tQixLQUFLLEVBQUVrQixNQUFNRyxJQUFJLENBQUNNO3dCQUNqRSxNQUFNQyx3QkFBd0IsSUFBSSxDQUFDekMsZUFBZSxHQUFHakIsdUVBQW9CQSxDQUFDLElBQUksQ0FBQ2lCLGVBQWUsSUFBSTt3QkFDbEcsSUFBSXlDLHlCQUF5QlQsU0FBUzNDLEdBQUcsS0FBS29ELHNCQUFzQnBELEdBQUcsSUFBSTJDLFNBQVMxQyxHQUFHLEtBQUttRCxzQkFBc0JuRCxHQUFHLEVBQUV5QyxNQUFNRyxJQUFJLENBQUNNO29CQUN0STtnQkFDSjtZQUNKO1FBQ0osT0FBTyxJQUFJOUMsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDaUUsTUFBTSxFQUFFO1lBQ3hDLE1BQU1DLGNBQWM7Z0JBQUM7b0JBQUMsQ0FBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDLENBQUM7b0JBQUc7aUJBQUU7Z0JBQUU7b0JBQUMsQ0FBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDLENBQUM7b0JBQUc7aUJBQUU7Z0JBQUU7b0JBQUM7b0JBQUcsQ0FBQztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDO29CQUFHO2lCQUFFO2FBQUM7WUFDNUZBLFlBQVlOLE9BQU8sQ0FBQztvQkFBQyxDQUFDTyxJQUFJQyxHQUFHO2dCQUN6QixNQUFNYixXQUFXO29CQUFFM0MsS0FBS3lCLFdBQVd6QixHQUFHLEdBQUd1RDtvQkFBSXRELEtBQUt3QixXQUFXeEIsR0FBRyxHQUFHdUQ7Z0JBQUc7Z0JBQ3RFLElBQUksSUFBSSxDQUFDekQsYUFBYSxDQUFDNEMsU0FBUzNDLEdBQUcsRUFBRTJDLFNBQVMxQyxHQUFHLEdBQUc7b0JBQ2hELE1BQU1pRCxjQUFjL0MsS0FBSyxDQUFDd0MsU0FBUzNDLEdBQUcsQ0FBQyxDQUFDMkMsU0FBUzFDLEdBQUcsQ0FBQztvQkFDckQsSUFBSSxDQUFDaUQsZUFBZUEsWUFBWTFCLEtBQUssS0FBS25CLE1BQU1tQixLQUFLLEVBQUU7d0JBQ25ELE1BQU1vQixTQUFTakQsOERBQVdBLENBQUNnRCxTQUFTM0MsR0FBRyxFQUFFMkMsU0FBUzFDLEdBQUc7d0JBQ3JELElBQUcyQyxRQUFRRixNQUFNRyxJQUFJLENBQUNEO29CQUMxQjtnQkFDSjtZQUNKO1FBQ0osT0FBTyxJQUFJdkMsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDcUUsSUFBSSxJQUFJcEQsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDc0UsTUFBTSxJQUFJckQsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDdUUsS0FBSyxFQUFFO1lBQzNHLE1BQU1DLGFBQ0Z2RCxNQUFNcUIsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUNxRSxJQUFJLEdBQUc7Z0JBQUM7b0JBQUMsQ0FBQztvQkFBRztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDO29CQUFHO2lCQUFFO2FBQUMsR0FDbEVwRCxNQUFNcUIsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUNzRSxNQUFNLEdBQUc7Z0JBQUM7b0JBQUMsQ0FBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDLENBQUM7b0JBQUc7aUJBQUU7Z0JBQUU7b0JBQUM7b0JBQUcsQ0FBQztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRztpQkFBRTthQUFDLEdBQ3RFO2dCQUFDO29CQUFDLENBQUM7b0JBQUc7aUJBQUU7Z0JBQUU7b0JBQUM7b0JBQUc7aUJBQUU7Z0JBQUU7b0JBQUM7b0JBQUcsQ0FBQztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRztpQkFBRTtnQkFBRTtvQkFBQyxDQUFDO29CQUFHLENBQUM7aUJBQUU7Z0JBQUU7b0JBQUMsQ0FBQztvQkFBRztpQkFBRTtnQkFBRTtvQkFBQztvQkFBRyxDQUFDO2lCQUFFO2dCQUFFO29CQUFDO29CQUFHO2lCQUFFO2FBQUM7WUFDMUVFLFdBQVdaLE9BQU8sQ0FBQztvQkFBQyxDQUFDTyxJQUFJQyxHQUFHO2dCQUN4QixJQUFLLElBQUlLLElBQUksR0FBR0EsSUFBSXZFLGtEQUFVQSxFQUFFdUUsSUFBSztvQkFDakMsTUFBTUMsUUFBUXJDLFdBQVd6QixHQUFHLEdBQUd1RCxLQUFLTTtvQkFBRyxNQUFNRSxRQUFRdEMsV0FBV3hCLEdBQUcsR0FBR3VELEtBQUtLO29CQUMzRSxJQUFJLENBQUMsSUFBSSxDQUFDOUQsYUFBYSxDQUFDK0QsT0FBT0MsUUFBUTtvQkFDdkMsTUFBTUMsb0JBQW9CN0QsS0FBSyxDQUFDMkQsTUFBTSxDQUFDQyxNQUFNO29CQUM1QyxNQUFNbkIsU0FBU2pELDhEQUFXQSxDQUFDbUUsT0FBT0M7b0JBQ25DLElBQUduQixRQUFPO3dCQUNOLElBQUlvQixtQkFBbUI7NEJBQUUsSUFBSUEsa0JBQWtCeEMsS0FBSyxLQUFLbkIsTUFBTW1CLEtBQUssRUFBRWtCLE1BQU1HLElBQUksQ0FBQ0Q7NEJBQVM7d0JBQU87d0JBQ2pHRixNQUFNRyxJQUFJLENBQUNEO29CQUNmLE9BQU87d0JBQUU7b0JBQU87Z0JBQ3BCO1lBQ0o7UUFDSixPQUFPLElBQUl2QyxNQUFNcUIsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUNtRCxJQUFJLEVBQUU7WUFDdEMsTUFBTTBCLFlBQVk7Z0JBQUM7b0JBQUMsQ0FBQztvQkFBRTtpQkFBRTtnQkFBRTtvQkFBQztvQkFBRTtpQkFBRTtnQkFBRTtvQkFBQztvQkFBRSxDQUFDO2lCQUFFO2dCQUFFO29CQUFDO29CQUFFO2lCQUFFO2dCQUFFO29CQUFDLENBQUM7b0JBQUUsQ0FBQztpQkFBRTtnQkFBRTtvQkFBQyxDQUFDO29CQUFFO2lCQUFFO2dCQUFFO29CQUFDO29CQUFFLENBQUM7aUJBQUU7Z0JBQUU7b0JBQUM7b0JBQUU7aUJBQUU7YUFBQztZQUNoRkEsVUFBVWpCLE9BQU8sQ0FBQztvQkFBQyxDQUFDTyxJQUFJQyxHQUFHO2dCQUN2QixNQUFNTSxRQUFRckMsV0FBV3pCLEdBQUcsR0FBR3VEO2dCQUFJLE1BQU1RLFFBQVF0QyxXQUFXeEIsR0FBRyxHQUFHdUQ7Z0JBQ2xFLElBQUksSUFBSSxDQUFDekQsYUFBYSxDQUFDK0QsT0FBT0MsUUFBUTtvQkFDbEMsTUFBTWIsY0FBYy9DLEtBQUssQ0FBQzJELE1BQU0sQ0FBQ0MsTUFBTTtvQkFDdkMsSUFBSSxDQUFDYixlQUFlQSxZQUFZMUIsS0FBSyxLQUFLbkIsTUFBTW1CLEtBQUssRUFBRTt3QkFDcEQsTUFBTW9CLFNBQVNqRCw4REFBV0EsQ0FBQ21FLE9BQU9DO3dCQUNsQyxJQUFHbkIsUUFBUUYsTUFBTUcsSUFBSSxDQUFDRDtvQkFDekI7Z0JBQ0o7WUFDSjtRQUNKO1FBQ0EsT0FBT0Y7SUFDVDtJQUVBd0Isc0JBQXNCakQsUUFBa0IsRUFBYztRQUNwRCxNQUFNWixRQUFRLElBQUksQ0FBQ1csVUFBVSxDQUFDQztRQUM5QixJQUFJLENBQUNaLFNBQVNBLE1BQU1tQixLQUFLLEtBQUssSUFBSSxDQUFDakIsYUFBYSxFQUFFLE9BQU8sRUFBRTtRQUMzRCxNQUFNNEQsMkJBQTJCLElBQUksQ0FBQ3BDLGdDQUFnQyxDQUFDZCxVQUFVLElBQUksQ0FBQ2QsS0FBSyxFQUFFRTtRQUM3RixNQUFNK0QsYUFBeUIsRUFBRTtRQUNqQ0QseUJBQXlCbkIsT0FBTyxDQUFDcUIsQ0FBQUE7WUFDL0IsTUFBTUMsWUFBWSxJQUFJLENBQUNuRSxLQUFLLENBQUNDLEdBQUcsQ0FBQ0osQ0FBQUEsTUFBT0EsSUFBSUksR0FBRyxDQUFDbUUsQ0FBQUEsSUFBS0EsSUFBSTt3QkFBQyxHQUFHQSxDQUFDO29CQUFBLElBQUk7WUFDbEUsTUFBTTlDLGFBQWEvQix1RUFBb0JBLENBQUN1QjtZQUN4QyxNQUFNMEIsV0FBV2pELHVFQUFvQkEsQ0FBQzJFO1lBQ3RDLE1BQU1HLGFBQWFGLFNBQVMsQ0FBQzdDLFdBQVd6QixHQUFHLENBQUMsQ0FBQ3lCLFdBQVd4QixHQUFHLENBQUM7WUFDNUQsSUFBSXVFLFlBQVk7Z0JBQ1pGLFNBQVMsQ0FBQzNCLFNBQVMzQyxHQUFHLENBQUMsQ0FBQzJDLFNBQVMxQyxHQUFHLENBQUMsR0FBR3VFO2dCQUN4Q0YsU0FBUyxDQUFDN0MsV0FBV3pCLEdBQUcsQ0FBQyxDQUFDeUIsV0FBV3hCLEdBQUcsQ0FBQyxHQUFHO2dCQUM1QyxJQUFJdUUsV0FBVzlDLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDdUMsSUFBSSxJQUFJMEMsbUJBQW1CLElBQUksQ0FBQzFELGVBQWUsRUFBRTtvQkFDakYsTUFBTThELGtCQUFrQmhELFdBQVd6QixHQUFHO29CQUN0QyxNQUFNMEUsa0JBQWtCL0IsU0FBUzFDLEdBQUc7b0JBQ3BDLElBQUksSUFBSSxDQUFDRixhQUFhLENBQUMwRSxpQkFBaUJDLGtCQUFrQkosU0FBUyxDQUFDRyxnQkFBZ0IsQ0FBQ0MsZ0JBQWdCLEdBQUc7Z0JBQzFHO1lBQ0o7WUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDeEMsYUFBYSxDQUFDLElBQUksQ0FBQzNCLGFBQWEsRUFBRStELFlBQVlGLFdBQVd2QixJQUFJLENBQUN3QjtRQUMxRTtRQUNBLElBQUloRSxNQUFNcUIsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUNtRCxJQUFJLElBQUksQ0FBQ2xDLE1BQU15QyxRQUFRLEVBQUU7WUFDbEQsTUFBTTZCLFVBQVV0RSxNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEdBQUcsSUFBSTtZQUN2RCxJQUFLLE1BQU9MLEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxJQUFJLElBQUksQ0FBQ3BCLG9CQUFvQixDQUFDbUUsYUFBYSxJQUMzRXZFLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ29ELEtBQUssSUFBSSxJQUFJLENBQUNoQyxvQkFBb0IsQ0FBQ29FLGFBQWEsRUFBSTtnQkFDakYsSUFBSSxDQUFDLElBQUksQ0FBQzFFLEtBQUssQ0FBQ3dFLFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUN4RSxLQUFLLENBQUN3RSxRQUFRLENBQUMsRUFBRSxFQUFFO29CQUNwRCxNQUFNRyxlQUFlekUsTUFBTW1CLEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHckMsOERBQXNCQSxDQUFDdUYsS0FBSyxDQUFDQyxRQUFRLEdBQUd4Riw4REFBc0JBLENBQUN5RixLQUFLLENBQUNELFFBQVE7b0JBQ3JJLE1BQU1FLE9BQU8sSUFBSSxDQUFDbEUsVUFBVSxDQUFDOEQ7b0JBQzdCLElBQUlJLFFBQVFBLEtBQUt4RCxJQUFJLEtBQUt0Qyw2Q0FBU0EsQ0FBQ3FFLElBQUksSUFBSSxDQUFDeUIsS0FBS3BDLFFBQVEsRUFBRTt3QkFDeEQsTUFBTXFDLGtCQUFrQnhGLDhEQUFXQSxDQUFDZ0YsU0FBUzt3QkFDN0MsTUFBTVMsa0JBQWtCekYsOERBQVdBLENBQUNnRixTQUFTO3dCQUM3QyxNQUFNVSxrQkFBa0IxRiw4REFBV0EsQ0FBQ2dGLFNBQVM7d0JBQzdDLElBQUksQ0FBQyxJQUFJLENBQUN4RCxnQkFBZ0IsQ0FBQ2dFLGlCQUFpQjlFLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ3dDLEtBQUssR0FBR3hDLDhDQUFVQSxDQUFDb0QsS0FBSyxHQUFHcEQsOENBQVVBLENBQUN3QyxLQUFLLEVBQUUsSUFBSSxDQUFDMUIsS0FBSyxLQUMxSCxDQUFDLElBQUksQ0FBQ2dCLGdCQUFnQixDQUFDaUUsaUJBQWlCL0UsTUFBTW1CLEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHeEMsOENBQVVBLENBQUNvRCxLQUFLLEdBQUdwRCw4Q0FBVUEsQ0FBQ3dDLEtBQUssRUFBRSxJQUFJLENBQUMxQixLQUFLLEtBQzFILENBQUMsSUFBSSxDQUFDZ0IsZ0JBQWdCLENBQUNrRSxpQkFBaUJoRixNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEdBQUd4Qyw4Q0FBVUEsQ0FBQ29ELEtBQUssR0FBR3BELDhDQUFVQSxDQUFDd0MsS0FBSyxFQUFFLElBQUksQ0FBQzFCLEtBQUssR0FBSTs0QkFDOUhpRSxXQUFXdkIsSUFBSSxDQUFDd0M7d0JBQ3BCO29CQUNKO2dCQUNKO1lBQ0o7WUFDQSxJQUFLLE1BQU83RCxLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ3dDLEtBQUssSUFBSSxJQUFJLENBQUNwQixvQkFBb0IsQ0FBQzZFLGNBQWMsSUFDNUVqRixNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUNvRCxLQUFLLElBQUksSUFBSSxDQUFDaEMsb0JBQW9CLENBQUM4RSxjQUFjLEVBQUk7Z0JBQ2xGLElBQUksQ0FBQyxJQUFJLENBQUNwRixLQUFLLENBQUN3RSxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDeEUsS0FBSyxDQUFDd0UsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQ3hFLEtBQUssQ0FBQ3dFLFFBQVEsQ0FBQyxFQUFFLEVBQUU7b0JBQy9FLE1BQU1HLGVBQWV6RSxNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEdBQUdyQyw4REFBc0JBLENBQUN1RixLQUFLLENBQUNTLFNBQVMsR0FBR2hHLDhEQUFzQkEsQ0FBQ3lGLEtBQUssQ0FBQ08sU0FBUztvQkFDdkksTUFBTU4sT0FBTyxJQUFJLENBQUNsRSxVQUFVLENBQUM4RDtvQkFDNUIsSUFBSUksUUFBUUEsS0FBS3hELElBQUksS0FBS3RDLDZDQUFTQSxDQUFDcUUsSUFBSSxJQUFJLENBQUN5QixLQUFLcEMsUUFBUSxFQUFFO3dCQUN6RCxNQUFNcUMsa0JBQWtCeEYsOERBQVdBLENBQUNnRixTQUFTO3dCQUM3QyxNQUFNUyxrQkFBa0J6Riw4REFBV0EsQ0FBQ2dGLFNBQVM7d0JBQzdDLE1BQU1VLGtCQUFrQjFGLDhEQUFXQSxDQUFDZ0YsU0FBUzt3QkFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQ3hELGdCQUFnQixDQUFDZ0UsaUJBQWlCOUUsTUFBTW1CLEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHeEMsOENBQVVBLENBQUNvRCxLQUFLLEdBQUdwRCw4Q0FBVUEsQ0FBQ3dDLEtBQUssRUFBRSxJQUFJLENBQUMxQixLQUFLLEtBQzFILENBQUMsSUFBSSxDQUFDZ0IsZ0JBQWdCLENBQUNpRSxpQkFBaUIvRSxNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEdBQUd4Qyw4Q0FBVUEsQ0FBQ29ELEtBQUssR0FBR3BELDhDQUFVQSxDQUFDd0MsS0FBSyxFQUFFLElBQUksQ0FBQzFCLEtBQUssS0FDMUgsQ0FBQyxJQUFJLENBQUNnQixnQkFBZ0IsQ0FBQ2tFLGlCQUFpQmhGLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ3dDLEtBQUssR0FBR3hDLDhDQUFVQSxDQUFDb0QsS0FBSyxHQUFHcEQsOENBQVVBLENBQUN3QyxLQUFLLEVBQUUsSUFBSSxDQUFDMUIsS0FBSyxHQUFJOzRCQUMvSGlFLFdBQVd2QixJQUFJLENBQUN3Qzt3QkFDbkI7b0JBQ0o7Z0JBQ0o7WUFDSjtRQUNKO1FBQ0EsT0FBT2pCO0lBQ1Q7SUFFQXFCLFNBQVNDLElBQVUsRUFBVztRQUM1QixNQUFNakUsYUFBYS9CLHVFQUFvQkEsQ0FBQ2dHLEtBQUtDLElBQUk7UUFDakQsTUFBTWhELFdBQVdqRCx1RUFBb0JBLENBQUNnRyxLQUFLRSxFQUFFO1FBQzdDLElBQUksQ0FBQ25FLGNBQWMsQ0FBQ2tCLFVBQVUsT0FBTztRQUNyQyxNQUFNa0QsY0FBYyxJQUFJLENBQUMxRixLQUFLLENBQUNzQixXQUFXekIsR0FBRyxDQUFDLENBQUN5QixXQUFXeEIsR0FBRyxDQUFDO1FBQzlELElBQUksQ0FBQzRGLGVBQWVBLFlBQVlyRSxLQUFLLEtBQUssSUFBSSxDQUFDakIsYUFBYSxFQUFFLE9BQU87UUFFckUsTUFBTXVGLGdCQUFnQixJQUFJLENBQUMzRixLQUFLLENBQUN3QyxTQUFTM0MsR0FBRyxDQUFDLENBQUMyQyxTQUFTMUMsR0FBRyxDQUFDO1FBQzVELElBQUk4RixhQUFhRixZQUFZbkUsSUFBSSxLQUFLdEMsNkNBQVNBLENBQUN1QyxJQUFJO1FBQ3BELElBQUlxRSxZQUFZLENBQUMsQ0FBQ0Y7UUFFbEIsSUFBSUMsY0FBY0MsV0FBVyxJQUFJLENBQUNqRixhQUFhLEdBQUc7YUFBUSxJQUFJLENBQUNBLGFBQWE7UUFFNUUsSUFBSSxDQUFDWixLQUFLLENBQUN3QyxTQUFTM0MsR0FBRyxDQUFDLENBQUMyQyxTQUFTMUMsR0FBRyxDQUFDLEdBQUc0RjtRQUN6QyxJQUFJLENBQUMxRixLQUFLLENBQUNzQixXQUFXekIsR0FBRyxDQUFDLENBQUN5QixXQUFXeEIsR0FBRyxDQUFDLEdBQUc7UUFDN0M0RixZQUFZL0MsUUFBUSxHQUFHO1FBQ3ZCLElBQUltRCxxQkFBcUIsSUFBSSxDQUFDdEYsZUFBZTtRQUM3QyxJQUFJLENBQUNBLGVBQWUsR0FBRztRQUN2QixJQUFJb0YsY0FBY0wsS0FBS0UsRUFBRSxLQUFLSyxzQkFBc0IsQ0FBQ0gsZUFBZTtZQUNoRSxNQUFNckIsa0JBQWtCaEQsV0FBV3pCLEdBQUc7WUFDdEMsTUFBTTBFLGtCQUFrQi9CLFNBQVMxQyxHQUFHO1lBQ3BDLElBQUcsSUFBSSxDQUFDRixhQUFhLENBQUMwRSxpQkFBaUJDLGtCQUFrQixJQUFJLENBQUN2RSxLQUFLLENBQUNzRSxnQkFBZ0IsQ0FBQ0MsZ0JBQWdCLEdBQUc7UUFDNUc7UUFDQSxJQUFJbUIsWUFBWW5FLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDdUMsSUFBSSxJQUFJK0QsS0FBS1EsU0FBUyxFQUFFO1lBQ3ZELElBQUksWUFBYTFFLEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxJQUFJYyxTQUFTM0MsR0FBRyxLQUFLLEtBQU82RixZQUFZckUsS0FBSyxLQUFLbkMsOENBQVVBLENBQUNvRCxLQUFLLElBQUlFLFNBQVMzQyxHQUFHLEtBQUtWLGtEQUFVQSxHQUFHLEdBQUk7Z0JBQy9JLElBQUksQ0FBQ2EsS0FBSyxDQUFDd0MsU0FBUzNDLEdBQUcsQ0FBQyxDQUFDMkMsU0FBUzFDLEdBQUcsQ0FBQyxHQUFHO29CQUFFLEdBQUc0RixXQUFXO29CQUFFbkUsTUFBTWdFLEtBQUtRLFNBQVM7Z0JBQUM7WUFDcEY7UUFDSjtRQUNBLElBQUlMLFlBQVluRSxJQUFJLEtBQUt0Qyw2Q0FBU0EsQ0FBQ3VDLElBQUksSUFBSXdFLEtBQUtDLEdBQUcsQ0FBQ3pELFNBQVMzQyxHQUFHLEdBQUd5QixXQUFXekIsR0FBRyxNQUFNLEdBQUc7WUFDdEYsTUFBTXFHLGVBQWUsQ0FBQzVFLFdBQVd6QixHQUFHLEdBQUcyQyxTQUFTM0MsR0FBRyxJQUFJO1lBQ3ZELElBQUksQ0FBQ1csZUFBZSxHQUFHaEIsOERBQVdBLENBQUMwRyxjQUFjNUUsV0FBV3hCLEdBQUc7UUFDbkU7UUFDQSxJQUFJNEYsWUFBWW5FLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDbUQsSUFBSSxJQUFJNEQsS0FBS0MsR0FBRyxDQUFDekQsU0FBUzFDLEdBQUcsR0FBR3dCLFdBQVd4QixHQUFHLE1BQU0sR0FBRztZQUN0RixJQUFJcUcsYUFBcUJDO1lBQ3pCLElBQUk1RCxTQUFTMUMsR0FBRyxHQUFHd0IsV0FBV3hCLEdBQUcsRUFBRTtnQkFBRXFHLGNBQWMvRyxrREFBVUEsR0FBRztnQkFBR2dILFlBQVk1RCxTQUFTMUMsR0FBRyxHQUFHO1lBQUcsT0FDNUY7Z0JBQUVxRyxjQUFjO2dCQUFHQyxZQUFZNUQsU0FBUzFDLEdBQUcsR0FBRztZQUFHO1lBQ3RELE1BQU1pRixPQUFPLElBQUksQ0FBQy9FLEtBQUssQ0FBQ3NCLFdBQVd6QixHQUFHLENBQUMsQ0FBQ3NHLFlBQVk7WUFDcEQsSUFBSXBCLFFBQVFBLEtBQUt4RCxJQUFJLEtBQUt0Qyw2Q0FBU0EsQ0FBQ3FFLElBQUksRUFBRTtnQkFDdEMsSUFBSSxDQUFDdEQsS0FBSyxDQUFDc0IsV0FBV3pCLEdBQUcsQ0FBQyxDQUFDdUcsVUFBVSxHQUFHckI7Z0JBQ3hDLElBQUksQ0FBQy9FLEtBQUssQ0FBQ3NCLFdBQVd6QixHQUFHLENBQUMsQ0FBQ3NHLFlBQVksR0FBRztnQkFDMUNwQixLQUFLcEMsUUFBUSxHQUFHO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJK0MsWUFBWW5FLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDbUQsSUFBSSxFQUFFO1lBQ3JDLElBQUlzRCxZQUFZckUsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEVBQUU7Z0JBQUUsSUFBSSxDQUFDcEIsb0JBQW9CLENBQUNtRSxhQUFhLEdBQUc7Z0JBQU8sSUFBSSxDQUFDbkUsb0JBQW9CLENBQUM2RSxjQUFjLEdBQUc7WUFBTyxPQUM1STtnQkFBRSxJQUFJLENBQUM3RSxvQkFBb0IsQ0FBQ29FLGFBQWEsR0FBRztnQkFBTyxJQUFJLENBQUNwRSxvQkFBb0IsQ0FBQzhFLGNBQWMsR0FBRztZQUFPO1FBQzlHO1FBQ0EsSUFBSU0sWUFBWW5FLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDcUUsSUFBSSxFQUFFO1lBQ3JDLElBQUlvQyxZQUFZckUsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEVBQUU7Z0JBQ3hDLElBQUk2RCxLQUFLQyxJQUFJLEtBQUtuRyw4REFBc0JBLENBQUN1RixLQUFLLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUN2RSxvQkFBb0IsQ0FBQ21FLGFBQWEsR0FBRztnQkFDbkcsSUFBSWMsS0FBS0MsSUFBSSxLQUFLbkcsOERBQXNCQSxDQUFDdUYsS0FBSyxDQUFDUyxTQUFTLEVBQUUsSUFBSSxDQUFDL0Usb0JBQW9CLENBQUM2RSxjQUFjLEdBQUc7WUFDekcsT0FBTztnQkFDSCxJQUFJSSxLQUFLQyxJQUFJLEtBQUtuRyw4REFBc0JBLENBQUN5RixLQUFLLENBQUNELFFBQVEsRUFBRSxJQUFJLENBQUN2RSxvQkFBb0IsQ0FBQ29FLGFBQWEsR0FBRztnQkFDbkcsSUFBSWEsS0FBS0MsSUFBSSxLQUFLbkcsOERBQXNCQSxDQUFDeUYsS0FBSyxDQUFDTyxTQUFTLEVBQUUsSUFBSSxDQUFDL0Usb0JBQW9CLENBQUM4RSxjQUFjLEdBQUc7WUFDekc7UUFDSjtRQUNBLElBQUlPLGlCQUFpQkEsY0FBY3BFLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDcUUsSUFBSSxFQUFFO1lBQ3hELElBQUlpQyxLQUFLRSxFQUFFLEtBQUtwRyw4REFBc0JBLENBQUN1RixLQUFLLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUN2RSxvQkFBb0IsQ0FBQ21FLGFBQWEsR0FBRztZQUNqRyxJQUFJYyxLQUFLRSxFQUFFLEtBQUtwRyw4REFBc0JBLENBQUN1RixLQUFLLENBQUNTLFNBQVMsRUFBRSxJQUFJLENBQUMvRSxvQkFBb0IsQ0FBQzZFLGNBQWMsR0FBRztZQUNuRyxJQUFJSSxLQUFLRSxFQUFFLEtBQUtwRyw4REFBc0JBLENBQUN5RixLQUFLLENBQUNELFFBQVEsRUFBRSxJQUFJLENBQUN2RSxvQkFBb0IsQ0FBQ29FLGFBQWEsR0FBRztZQUNqRyxJQUFJYSxLQUFLRSxFQUFFLEtBQUtwRyw4REFBc0JBLENBQUN5RixLQUFLLENBQUNPLFNBQVMsRUFBRSxJQUFJLENBQUMvRSxvQkFBb0IsQ0FBQzhFLGNBQWMsR0FBRztRQUN2RztRQUNBLElBQUksQ0FBQ2hGLGFBQWEsR0FBRyxJQUFJLENBQUNBLGFBQWEsS0FBS2xCLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHeEMsOENBQVVBLENBQUNvRCxLQUFLLEdBQUdwRCw4Q0FBVUEsQ0FBQ3dDLEtBQUs7UUFDbEcsSUFBSSxJQUFJLENBQUN0QixhQUFhLEtBQUtsQiw4Q0FBVUEsQ0FBQ3dDLEtBQUssRUFBRSxJQUFJLENBQUNoQixjQUFjO1FBQ2hFLElBQUksQ0FBQzJGLFdBQVcsQ0FBQzNELElBQUksQ0FBQzZDO1FBQ3RCLE9BQU87SUFDVDtJQUVBZSwwQkFBMEJDLFdBQXVCLEVBQVU7UUFDekQsTUFBTUMsV0FBbUIsRUFBRTtRQUMzQixJQUFJRCxnQkFBZ0IsSUFBSSxDQUFDbkcsYUFBYSxFQUFFLE9BQU8sRUFBRTtRQUNqRCxJQUFLLElBQUllLElBQUksR0FBR0EsSUFBSWhDLGtEQUFVQSxFQUFFZ0MsSUFBSztZQUNuQyxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSWhDLGtEQUFVQSxFQUFFZ0MsSUFBSztnQkFDbkMsTUFBTWxCLFFBQVEsSUFBSSxDQUFDRixLQUFLLENBQUNtQixFQUFFLENBQUNDLEVBQUU7Z0JBQzlCLElBQUlsQixTQUFTQSxNQUFNbUIsS0FBSyxLQUFLa0YsYUFBYTtvQkFDeEMsTUFBTUUsZUFBZWpILDhEQUFXQSxDQUFDMkIsR0FBR0M7b0JBQ3BDLE1BQU1zRixxQkFBcUIsSUFBSSxDQUFDM0MscUJBQXFCLENBQUMwQztvQkFDdERDLG1CQUFtQjdELE9BQU8sQ0FBQ3FCLENBQUFBO3dCQUN6QixNQUFNMUIsV0FBV2pELHVFQUFvQkEsQ0FBQzJFO3dCQUN0QyxJQUFJaEUsTUFBTXFCLElBQUksS0FBS3RDLDZDQUFTQSxDQUFDdUMsSUFBSSxJQUFLLE9BQU9ILEtBQUssS0FBS25DLDhDQUFVQSxDQUFDd0MsS0FBSyxJQUFJYyxTQUFTM0MsR0FBRyxLQUFLLEtBQU9LLE1BQU1tQixLQUFLLEtBQUtuQyw4Q0FBVUEsQ0FBQ29ELEtBQUssSUFBSUUsU0FBUzNDLEdBQUcsS0FBS1Ysa0RBQVVBLEdBQUcsQ0FBQyxHQUFJOzRCQUN4S0csd0RBQWdCQSxDQUFDdUQsT0FBTyxDQUFDOEQsQ0FBQUEsWUFBYUgsU0FBUzlELElBQUksQ0FBQztvQ0FBRThDLE1BQU1pQjtvQ0FBY2hCLElBQUl2QjtvQ0FBZ0I2QixXQUFXWTtnQ0FBVTt3QkFDckgsT0FBTzs0QkFDTEgsU0FBUzlELElBQUksQ0FBQztnQ0FBRThDLE1BQU1pQjtnQ0FBY2hCLElBQUl2Qjs0QkFBZTt3QkFDekQ7b0JBQ0Y7Z0JBQ0Y7WUFDRjtRQUNGO1FBQ0EsT0FBT3NDO0lBQ1Q7SUFFQUksWUFBWUwsV0FBdUIsRUFBVztRQUM1QyxJQUFJLENBQUMsSUFBSSxDQUFDeEUsYUFBYSxDQUFDd0UsYUFBYSxJQUFJLENBQUN2RyxLQUFLLEdBQUcsT0FBTztRQUN6RCxPQUFPLElBQUksQ0FBQ3NHLHlCQUF5QixDQUFDQyxhQUFhTSxNQUFNLEtBQUs7SUFDaEU7SUFFQUMsWUFBWVAsV0FBdUIsRUFBVztRQUM1QyxJQUFJLElBQUksQ0FBQ3hFLGFBQWEsQ0FBQ3dFLGFBQWEsSUFBSSxDQUFDdkcsS0FBSyxHQUFHLE9BQU87UUFDeEQsT0FBTyxJQUFJLENBQUNzRyx5QkFBeUIsQ0FBQ0MsYUFBYU0sTUFBTSxLQUFLO0lBQ2hFO0lBRVFFLGVBQWU3RyxLQUFZLEVBQVU7UUFDM0MsSUFBSThHO1FBQ0osT0FBUTlHLE1BQU1xQixJQUFJO1lBQ2QsS0FBS3RDLDZDQUFTQSxDQUFDdUMsSUFBSTtnQkFBRXdGLE9BQU87Z0JBQUs7WUFBTyxLQUFLL0gsNkNBQVNBLENBQUNpRSxNQUFNO2dCQUFFOEQsT0FBTztnQkFBSztZQUMzRSxLQUFLL0gsNkNBQVNBLENBQUNzRSxNQUFNO2dCQUFFeUQsT0FBTztnQkFBSztZQUFPLEtBQUsvSCw2Q0FBU0EsQ0FBQ3FFLElBQUk7Z0JBQUUwRCxPQUFPO2dCQUFLO1lBQzNFLEtBQUsvSCw2Q0FBU0EsQ0FBQ3VFLEtBQUs7Z0JBQUV3RCxPQUFPO2dCQUFLO1lBQU8sS0FBSy9ILDZDQUFTQSxDQUFDbUQsSUFBSTtnQkFBRTRFLE9BQU87Z0JBQUs7WUFDMUU7Z0JBQVMsT0FBTztRQUNwQjtRQUNBLE9BQU85RyxNQUFNbUIsS0FBSyxLQUFLbkMsOENBQVVBLENBQUN3QyxLQUFLLEdBQUdzRixLQUFLQyxXQUFXLEtBQUtEO0lBQ2pFO0lBRUFFLGFBQXFCO1FBQ25CLElBQUlDLE1BQU07UUFDVixJQUFLLElBQUloRyxJQUFJLEdBQUdBLElBQUloQyxrREFBVUEsRUFBRWdDLElBQUs7WUFDakMsSUFBSWlHLGFBQWE7WUFDakIsSUFBSyxJQUFJaEcsSUFBSSxHQUFHQSxJQUFJaEMsa0RBQVVBLEVBQUVnQyxJQUFLO2dCQUNqQyxNQUFNbEIsUUFBUSxJQUFJLENBQUNGLEtBQUssQ0FBQ21CLEVBQUUsQ0FBQ0MsRUFBRTtnQkFDOUIsSUFBSWxCLE9BQU87b0JBQUUsSUFBSWtILGFBQWEsR0FBRzt3QkFBRUQsT0FBT0M7d0JBQVlBLGFBQWE7b0JBQUc7b0JBQUVELE9BQU8sSUFBSSxDQUFDSixjQUFjLENBQUM3RztnQkFBUSxPQUN0R2tIO1lBQ1Q7WUFDQSxJQUFJQSxhQUFhLEdBQUdELE9BQU9DO1lBQzNCLElBQUlqRyxJQUFJaEMsa0RBQVVBLEdBQUcsR0FBR2dJLE9BQU87UUFDbkM7UUFDQUEsT0FBTztRQUNQQSxPQUFPLElBQUksQ0FBQy9HLGFBQWEsS0FBS2xCLDhDQUFVQSxDQUFDd0MsS0FBSyxHQUFHLE1BQU07UUFBS3lGLE9BQU87UUFDbkUsSUFBSUUsWUFBWTtRQUNoQixJQUFJLElBQUksQ0FBQy9HLG9CQUFvQixDQUFDbUUsYUFBYSxFQUFFNEMsYUFBYTtRQUFLLElBQUksSUFBSSxDQUFDL0csb0JBQW9CLENBQUM2RSxjQUFjLEVBQUVrQyxhQUFhO1FBQzFILElBQUksSUFBSSxDQUFDL0csb0JBQW9CLENBQUNvRSxhQUFhLEVBQUUyQyxhQUFhO1FBQUssSUFBSSxJQUFJLENBQUMvRyxvQkFBb0IsQ0FBQzhFLGNBQWMsRUFBRWlDLGFBQWE7UUFDMUhGLE9BQU9FLFVBQVVSLE1BQU0sR0FBRyxJQUFJUSxZQUFZO1FBQUtGLE9BQU87UUFDdERBLE9BQU8sSUFBSSxDQUFDM0csZUFBZSxHQUFHLElBQUksQ0FBQ0EsZUFBZSxHQUFHO1FBQUsyRyxPQUFPO1FBQ2pFQSxPQUFPLElBQUksQ0FBQ3ZHLGFBQWE7UUFBRXVHLE9BQU87UUFDbENBLE9BQU8sSUFBSSxDQUFDekcsY0FBYztRQUMxQixPQUFPeUc7SUFDVDtJQXJYQUcsWUFBWUMsZ0JBQXFDLENBQUU7UUFDakQsSUFBSUEsb0JBQW9CQSxpQkFBaUJDLFVBQVUsRUFBRTtZQUNqRCxJQUFJLENBQUN4SCxLQUFLLEdBQUd1SCxpQkFBaUJDLFVBQVUsQ0FBQ3ZILEdBQUcsQ0FBQ0osQ0FBQUEsTUFDekNBLElBQUlJLEdBQUcsQ0FBQ3dILENBQUFBLEtBQU1BLEdBQUd2SCxLQUFLLEdBQUc7d0JBQUMsR0FBR3VILEdBQUd2SCxLQUFLO29CQUFBLElBQUk7WUFFN0MsSUFBSSxDQUFDRSxhQUFhLEdBQUdtSCxpQkFBaUJuSCxhQUFhLElBQUlsQiw4Q0FBVUEsQ0FBQ3dDLEtBQUs7WUFDdkUsSUFBSSxDQUFDcEIsb0JBQW9CLEdBQUdpSCxpQkFBaUJqSCxvQkFBb0IsR0FBRztnQkFBQyxHQUFHaUgsaUJBQWlCakgsb0JBQW9CO1lBQUEsSUFBSTtnQkFBRW1FLGVBQWU7Z0JBQU1VLGdCQUFnQjtnQkFBTVQsZUFBZTtnQkFBTVUsZ0JBQWdCO1lBQUs7WUFDeE0sSUFBSSxDQUFDNUUsZUFBZSxHQUFHK0csaUJBQWlCL0csZUFBZSxJQUFJO1lBQzNELElBQUksQ0FBQ0ksYUFBYSxHQUFHMkcsaUJBQWlCM0csYUFBYSxJQUFJO1lBQ3ZELElBQUksQ0FBQ0YsY0FBYyxHQUFHNkcsaUJBQWlCN0csY0FBYyxJQUFJO1lBQ3pELElBQUksQ0FBQzJGLFdBQVcsR0FBR2tCLGlCQUFpQmxCLFdBQVcsR0FBRzttQkFBSWtCLGlCQUFpQmxCLFdBQVc7YUFBQyxHQUFHLEVBQUU7UUFDNUYsT0FBTztZQUNILElBQUksQ0FBQ3JHLEtBQUssR0FBR04scUVBQXVCQTtZQUNwQyxJQUFJLENBQUNVLGFBQWEsR0FBR2xCLDhDQUFVQSxDQUFDd0MsS0FBSztZQUNyQyxJQUFJLENBQUNwQixvQkFBb0IsR0FBRztnQkFBRW1FLGVBQWU7Z0JBQU1VLGdCQUFnQjtnQkFBTVQsZUFBZTtnQkFBTVUsZ0JBQWdCO1lBQUs7WUFDbkgsSUFBSSxDQUFDNUUsZUFBZSxHQUFHO1lBQ3ZCLElBQUksQ0FBQ0ksYUFBYSxHQUFHO1lBQ3JCLElBQUksQ0FBQ0YsY0FBYyxHQUFHO1lBQ3RCLElBQUksQ0FBQzJGLFdBQVcsR0FBRyxFQUFFO1FBQ3pCO0lBQ0Y7QUFrV0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc2VydmljZXMvY2hlc3NMb2dpYy50cz81ZGZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFBpZWNlLCBQaWVjZVR5cGUsIFBpZWNlQ29sb3IsIFNxdWFyZUlkLCBNb3ZlLFxuICBDYXN0bGluZ0F2YWlsYWJpbGl0eSwgR2FtZVN0YXRlXG59IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgQk9BUkRfUk9XUywgQk9BUkRfQ09MUywgSU5JVElBTF9LSU5HX1BPU0lUSU9OLCBJTklUSUFMX1JPT0tfUE9TSVRJT05TLCBQUk9NT1RJT05fUElFQ0VTIH0gZnJvbSAnQC9jb25zdGFudHMnO1xuaW1wb3J0IHsgZ2V0U3F1YXJlQ29vcmRpbmF0ZXMsIGdldFNxdWFyZUlkLCBjcmVhdGVJbml0aWFsQm9hcmQgYXMgY3JlYXRlSW5pdGlhbFBpZWNlQXJyYXkgfSBmcm9tICdAL3V0aWxzL2JvYXJkVXRpbHMnO1xuXG5cbmV4cG9ydCBjbGFzcyBDaGVzc0xvZ2ljIHtcbiAgcHJpdmF0ZSBib2FyZDogKFBpZWNlIHwgbnVsbClbXVtdO1xuICBwcml2YXRlIGN1cnJlbnRQbGF5ZXI6IFBpZWNlQ29sb3I7XG4gIHByaXZhdGUgY2FzdGxpbmdBdmFpbGFiaWxpdHk6IENhc3RsaW5nQXZhaWxhYmlsaXR5O1xuICBwcml2YXRlIGVuUGFzc2FudFRhcmdldDogU3F1YXJlSWQgfCBudWxsO1xuICBwcml2YXRlIGhhbGZNb3ZlQ2xvY2s6IG51bWJlcjtcbiAgcHJpdmF0ZSBmdWxsTW92ZU51bWJlcjogbnVtYmVyO1xuICBwcml2YXRlIG1vdmVIaXN0b3J5OiBNb3ZlW107XG5cbiAgY29uc3RydWN0b3IoaW5pdGlhbEdhbWVTdGF0ZT86IFBhcnRpYWw8R2FtZVN0YXRlPikge1xuICAgIGlmIChpbml0aWFsR2FtZVN0YXRlICYmIGluaXRpYWxHYW1lU3RhdGUuYm9hcmRTdGF0ZSkge1xuICAgICAgICB0aGlzLmJvYXJkID0gaW5pdGlhbEdhbWVTdGF0ZS5ib2FyZFN0YXRlLm1hcChyb3cgPT5cbiAgICAgICAgICAgIHJvdy5tYXAoc3EgPT4gc3EucGllY2UgPyB7Li4uc3EucGllY2V9IDogbnVsbCkgXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY3VycmVudFBsYXllciA9IGluaXRpYWxHYW1lU3RhdGUuY3VycmVudFBsYXllciB8fCBQaWVjZUNvbG9yLldISVRFO1xuICAgICAgICB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5ID0gaW5pdGlhbEdhbWVTdGF0ZS5jYXN0bGluZ0F2YWlsYWJpbGl0eSA/IHsuLi5pbml0aWFsR2FtZVN0YXRlLmNhc3RsaW5nQXZhaWxhYmlsaXR5fSA6IHsgd2hpdGVLaW5nU2lkZTogdHJ1ZSwgd2hpdGVRdWVlblNpZGU6IHRydWUsIGJsYWNrS2luZ1NpZGU6IHRydWUsIGJsYWNrUXVlZW5TaWRlOiB0cnVlIH07XG4gICAgICAgIHRoaXMuZW5QYXNzYW50VGFyZ2V0ID0gaW5pdGlhbEdhbWVTdGF0ZS5lblBhc3NhbnRUYXJnZXQgfHwgbnVsbDtcbiAgICAgICAgdGhpcy5oYWxmTW92ZUNsb2NrID0gaW5pdGlhbEdhbWVTdGF0ZS5oYWxmTW92ZUNsb2NrIHx8IDA7XG4gICAgICAgIHRoaXMuZnVsbE1vdmVOdW1iZXIgPSBpbml0aWFsR2FtZVN0YXRlLmZ1bGxNb3ZlTnVtYmVyIHx8IDE7XG4gICAgICAgIHRoaXMubW92ZUhpc3RvcnkgPSBpbml0aWFsR2FtZVN0YXRlLm1vdmVIaXN0b3J5ID8gWy4uLmluaXRpYWxHYW1lU3RhdGUubW92ZUhpc3RvcnldIDogW107XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ib2FyZCA9IGNyZWF0ZUluaXRpYWxQaWVjZUFycmF5KCk7XG4gICAgICAgIHRoaXMuY3VycmVudFBsYXllciA9IFBpZWNlQ29sb3IuV0hJVEU7XG4gICAgICAgIHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkgPSB7IHdoaXRlS2luZ1NpZGU6IHRydWUsIHdoaXRlUXVlZW5TaWRlOiB0cnVlLCBibGFja0tpbmdTaWRlOiB0cnVlLCBibGFja1F1ZWVuU2lkZTogdHJ1ZSB9O1xuICAgICAgICB0aGlzLmVuUGFzc2FudFRhcmdldCA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFsZk1vdmVDbG9jayA9IDA7XG4gICAgICAgIHRoaXMuZnVsbE1vdmVOdW1iZXIgPSAxO1xuICAgICAgICB0aGlzLm1vdmVIaXN0b3J5ID0gW107XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpc1ZhbGlkU3F1YXJlKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiByb3cgPj0gMCAmJiByb3cgPCBCT0FSRF9ST1dTICYmIGNvbCA+PSAwICYmIGNvbCA8IEJPQVJEX0NPTFM7XG4gIH1cblxuICBnZXRCb2FyZCgpOiAoUGllY2UgfCBudWxsKVtdW10ge1xuICAgIHJldHVybiB0aGlzLmJvYXJkLm1hcChyb3cgPT4gcm93Lm1hcChwaWVjZSA9PiBwaWVjZSA/IHsuLi5waWVjZX0gOiBudWxsKSk7XG4gIH1cblxuICBnZXRDdXJyZW50UGxheWVyKCk6IFBpZWNlQ29sb3Ige1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRQbGF5ZXI7XG4gIH1cblxuICBnZXRDYXN0bGluZ0F2YWlsYWJpbGl0eSgpOiBDYXN0bGluZ0F2YWlsYWJpbGl0eSB7XG4gICAgcmV0dXJuIHsuLi50aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5fTtcbiAgfVxuXG4gIGdldEVuUGFzc2FudFRhcmdldCgpOiBTcXVhcmVJZCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmVuUGFzc2FudFRhcmdldDtcbiAgfVxuXG4gIGdldE1vdmVOdW1iZXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsTW92ZU51bWJlcjtcbiAgfVxuXG4gIGdldEhhbGZNb3ZlQ2xvY2soKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oYWxmTW92ZUNsb2NrO1xuICB9XG5cbiAgZ2V0UGllY2VBdChzcXVhcmVJZDogU3F1YXJlSWQpOiBQaWVjZSB8IG51bGwge1xuICAgIGNvbnN0IGNvb3JkcyA9IGdldFNxdWFyZUNvb3JkaW5hdGVzKHNxdWFyZUlkKTtcbiAgICBpZiAoIWNvb3JkcykgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmJvYXJkW2Nvb3Jkcy5yb3ddW2Nvb3Jkcy5jb2xdO1xuICAgIHJldHVybiBwaWVjZSA/IHsuLi5waWVjZX0gOiBudWxsOyBcbiAgfVxuXG4gIHByaXZhdGUgaXNTcXVhcmVBdHRhY2tlZChzcXVhcmVJZDogU3F1YXJlSWQsIGF0dGFja2VyQ29sb3I6IFBpZWNlQ29sb3IsIGJvYXJkOiAoUGllY2UgfCBudWxsKVtdW10pOiBib29sZWFuIHtcbiAgICBjb25zdCB0YXJnZXRDb29yZHMgPSBnZXRTcXVhcmVDb29yZGluYXRlcyhzcXVhcmVJZCk7XG4gICAgaWYgKCF0YXJnZXRDb29yZHMpIHJldHVybiBmYWxzZTtcblxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk9BUkRfUk9XUzsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gMDsgYyA8IEJPQVJEX0NPTFM7IGMrKykge1xuICAgICAgICBjb25zdCBwaWVjZSA9IGJvYXJkW3JdW2NdO1xuICAgICAgICBpZiAocGllY2UgJiYgcGllY2UuY29sb3IgPT09IGF0dGFja2VyQ29sb3IpIHtcbiAgICAgICAgICBjb25zdCBmcm9tQ29vcmRzID0geyByb3c6IHIsIGNvbDogYyB9O1xuICAgICAgICAgIGlmIChwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuUEFXTikge1xuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gcGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuV0hJVEUgPyAtMSA6IDE7XG4gICAgICAgICAgICBpZiAoZnJvbUNvb3Jkcy5yb3cgKyBkaXJlY3Rpb24gPT09IHRhcmdldENvb3Jkcy5yb3cpIHtcbiAgICAgICAgICAgICAgaWYgKGZyb21Db29yZHMuY29sICsgMSA9PT0gdGFyZ2V0Q29vcmRzLmNvbCB8fCBmcm9tQ29vcmRzLmNvbCAtIDEgPT09IHRhcmdldENvb3Jkcy5jb2wpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7IFxuICAgICAgICAgICAgY29uc3QgcHNldWRvTW92ZXMgPSB0aGlzLmdlbmVyYXRlUHNldWRvTGVnYWxNb3Zlc0ZvclBpZWNlKGdldFNxdWFyZUlkKHIsYykhLCBib2FyZCwgcGllY2UpO1xuICAgICAgICAgICAgaWYgKHBzZXVkb01vdmVzLnNvbWUobW92ZVRhcmdldElkID0+IG1vdmVUYXJnZXRJZCA9PT0gc3F1YXJlSWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlzS2luZ0luQ2hlY2soa2luZ0NvbG9yOiBQaWVjZUNvbG9yLCBib2FyZFRvQ2hlY2s/OiAoUGllY2UgfCBudWxsKVtdW10pOiBib29sZWFuIHtcbiAgICBjb25zdCBjdXJyZW50Qm9hcmQgPSBib2FyZFRvQ2hlY2sgfHwgdGhpcy5ib2FyZDtcbiAgICBsZXQga2luZ1NxdWFyZUlkOiBTcXVhcmVJZCB8IG51bGwgPSBudWxsO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk9BUkRfUk9XUzsgcisrKSB7XG4gICAgICBmb3IgKGxldCBjID0gMDsgYyA8IEJPQVJEX0NPTFM7IGMrKykge1xuICAgICAgICBjb25zdCBwaWVjZSA9IGN1cnJlbnRCb2FyZFtyXVtjXTtcbiAgICAgICAgaWYgKHBpZWNlICYmIHBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5LSU5HICYmIHBpZWNlLmNvbG9yID09PSBraW5nQ29sb3IpIHtcbiAgICAgICAgICBraW5nU3F1YXJlSWQgPSBnZXRTcXVhcmVJZChyLCBjKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGtpbmdTcXVhcmVJZCkgYnJlYWs7XG4gICAgfVxuICAgIGlmICgha2luZ1NxdWFyZUlkKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3Qgb3Bwb25lbnRDb2xvciA9IGtpbmdDb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IFBpZWNlQ29sb3IuQkxBQ0sgOiBQaWVjZUNvbG9yLldISVRFO1xuICAgIHJldHVybiB0aGlzLmlzU3F1YXJlQXR0YWNrZWQoa2luZ1NxdWFyZUlkLCBvcHBvbmVudENvbG9yLCBjdXJyZW50Qm9hcmQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVBzZXVkb0xlZ2FsTW92ZXNGb3JQaWVjZShzcXVhcmVJZDogU3F1YXJlSWQsIGJvYXJkOiAoUGllY2UgfCBudWxsKVtdW10sIHBpZWNlOiBQaWVjZSk6IFNxdWFyZUlkW10ge1xuICAgIGNvbnN0IGZyb21Db29yZHMgPSBnZXRTcXVhcmVDb29yZGluYXRlcyhzcXVhcmVJZCk7XG4gICAgaWYgKCFmcm9tQ29vcmRzKSByZXR1cm4gW107XG4gICAgbGV0IG1vdmVzOiBTcXVhcmVJZFtdID0gW107XG4gICAgaWYgKHBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5QQVdOKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFID8gLTEgOiAxO1xuICAgICAgICBsZXQgdG9Db29yZHMgPSB7IHJvdzogZnJvbUNvb3Jkcy5yb3cgKyBkaXJlY3Rpb24sIGNvbDogZnJvbUNvb3Jkcy5jb2wgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNxdWFyZSh0b0Nvb3Jkcy5yb3csIHRvQ29vcmRzLmNvbCkgJiYgIWJvYXJkW3RvQ29vcmRzLnJvd11bdG9Db29yZHMuY29sXSkge1xuICAgICAgICAgICAgY29uc3QgdG9TcUlkID0gZ2V0U3F1YXJlSWQodG9Db29yZHMucm93LCB0b0Nvb3Jkcy5jb2wpO1xuICAgICAgICAgICAgaWYodG9TcUlkKSBtb3Zlcy5wdXNoKHRvU3FJZCk7XG4gICAgICAgICAgICBpZiAoIXBpZWNlLmhhc01vdmVkKSB7XG4gICAgICAgICAgICAgICAgdG9Db29yZHMgPSB7IHJvdzogZnJvbUNvb3Jkcy5yb3cgKyAyICogZGlyZWN0aW9uLCBjb2w6IGZyb21Db29yZHMuY29sIH07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNxdWFyZSh0b0Nvb3Jkcy5yb3csIHRvQ29vcmRzLmNvbCkgJiYgIWJvYXJkW3RvQ29vcmRzLnJvd11bdG9Db29yZHMuY29sXSAmJiAhYm9hcmRbZnJvbUNvb3Jkcy5yb3crZGlyZWN0aW9uXVtmcm9tQ29vcmRzLmNvbF0pIHtcbiAgICAgICAgICAgICAgICAgICBjb25zdCB0b1NxSWQyID0gZ2V0U3F1YXJlSWQodG9Db29yZHMucm93LCB0b0Nvb3Jkcy5jb2wpO1xuICAgICAgICAgICAgICAgICAgIGlmKHRvU3FJZDIpIG1vdmVzLnB1c2godG9TcUlkMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFstMSwgMV0uZm9yRWFjaChjb2xPZmZzZXQgPT4ge1xuICAgICAgICAgICAgdG9Db29yZHMgPSB7IHJvdzogZnJvbUNvb3Jkcy5yb3cgKyBkaXJlY3Rpb24sIGNvbDogZnJvbUNvb3Jkcy5jb2wgKyBjb2xPZmZzZXQgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRTcXVhcmUodG9Db29yZHMucm93LCB0b0Nvb3Jkcy5jb2wpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGllY2UgPSBib2FyZFt0b0Nvb3Jkcy5yb3ddW3RvQ29vcmRzLmNvbF07XG4gICAgICAgICAgICAgICAgY29uc3QgdG9TcUlkQ2FuZCA9IGdldFNxdWFyZUlkKHRvQ29vcmRzLnJvdywgdG9Db29yZHMuY29sKTtcbiAgICAgICAgICAgICAgICBpZiAodG9TcUlkQ2FuZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0UGllY2UgJiYgdGFyZ2V0UGllY2UuY29sb3IgIT09IHBpZWNlLmNvbG9yKSBtb3Zlcy5wdXNoKHRvU3FJZENhbmQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlblBhc3NhbnRUYXJnZXRDb29yZHMgPSB0aGlzLmVuUGFzc2FudFRhcmdldCA/IGdldFNxdWFyZUNvb3JkaW5hdGVzKHRoaXMuZW5QYXNzYW50VGFyZ2V0KSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlblBhc3NhbnRUYXJnZXRDb29yZHMgJiYgdG9Db29yZHMucm93ID09PSBlblBhc3NhbnRUYXJnZXRDb29yZHMucm93ICYmIHRvQ29vcmRzLmNvbCA9PT0gZW5QYXNzYW50VGFyZ2V0Q29vcmRzLmNvbCkgbW92ZXMucHVzaCh0b1NxSWRDYW5kKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAocGllY2UudHlwZSA9PT0gUGllY2VUeXBlLktOSUdIVCkge1xuICAgICAgICBjb25zdCBrbmlnaHRNb3ZlcyA9IFtbLTIsIC0xXSwgWy0yLCAxXSwgWy0xLCAtMl0sIFstMSwgMl0sIFsxLCAtMl0sIFsxLCAyXSwgWzIsIC0xXSwgWzIsIDFdXTtcbiAgICAgICAga25pZ2h0TW92ZXMuZm9yRWFjaCgoW2RyLCBkY10pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvQ29vcmRzID0geyByb3c6IGZyb21Db29yZHMucm93ICsgZHIsIGNvbDogZnJvbUNvb3Jkcy5jb2wgKyBkYyB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNxdWFyZSh0b0Nvb3Jkcy5yb3csIHRvQ29vcmRzLmNvbCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRQaWVjZSA9IGJvYXJkW3RvQ29vcmRzLnJvd11bdG9Db29yZHMuY29sXTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFBpZWNlIHx8IHRhcmdldFBpZWNlLmNvbG9yICE9PSBwaWVjZS5jb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b1NxSWQgPSBnZXRTcXVhcmVJZCh0b0Nvb3Jkcy5yb3csIHRvQ29vcmRzLmNvbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRvU3FJZCkgbW92ZXMucHVzaCh0b1NxSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuUk9PSyB8fCBwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuQklTSE9QIHx8IHBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5RVUVFTikge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25zID1cbiAgICAgICAgICAgIHBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5ST09LID8gW1stMSwgMF0sIFsxLCAwXSwgWzAsIC0xXSwgWzAsIDFdXSA6XG4gICAgICAgICAgICBwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuQklTSE9QID8gW1stMSwgLTFdLCBbLTEsIDFdLCBbMSwgLTFdLCBbMSwgMV1dIDpcbiAgICAgICAgICAgIFtbLTEsIDBdLCBbMSwgMF0sIFswLCAtMV0sIFswLCAxXSwgWy0xLCAtMV0sIFstMSwgMV0sIFsxLCAtMV0sIFsxLCAxXV07IFxuICAgICAgICBkaXJlY3Rpb25zLmZvckVhY2goKFtkciwgZGNdKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IEJPQVJEX1JPV1M7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvUm93ID0gZnJvbUNvb3Jkcy5yb3cgKyBkciAqIGk7IGNvbnN0IHRvQ29sID0gZnJvbUNvb3Jkcy5jb2wgKyBkYyAqIGk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRTcXVhcmUodG9Sb3csIHRvQ29sKSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGllY2VPblBhdGggPSBib2FyZFt0b1Jvd11bdG9Db2xdO1xuICAgICAgICAgICAgICAgICBjb25zdCB0b1NxSWQgPSBnZXRTcXVhcmVJZCh0b1JvdywgdG9Db2wpO1xuICAgICAgICAgICAgICAgIGlmKHRvU3FJZCl7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRQaWVjZU9uUGF0aCkgeyBpZiAodGFyZ2V0UGllY2VPblBhdGguY29sb3IgIT09IHBpZWNlLmNvbG9yKSBtb3Zlcy5wdXNoKHRvU3FJZCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIG1vdmVzLnB1c2godG9TcUlkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyBicmVhazsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5LSU5HKSB7XG4gICAgICAgIGNvbnN0IGtpbmdNb3ZlcyA9IFtbLTEsMF0sIFsxLDBdLCBbMCwtMV0sIFswLDFdLCBbLTEsLTFdLCBbLTEsMV0sIFsxLC0xXSwgWzEsMV1dO1xuICAgICAgICBraW5nTW92ZXMuZm9yRWFjaCgoW2RyLCBkY10pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvUm93ID0gZnJvbUNvb3Jkcy5yb3cgKyBkcjsgY29uc3QgdG9Db2wgPSBmcm9tQ29vcmRzLmNvbCArIGRjO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNxdWFyZSh0b1JvdywgdG9Db2wpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGllY2UgPSBib2FyZFt0b1Jvd11bdG9Db2xdO1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0UGllY2UgfHwgdGFyZ2V0UGllY2UuY29sb3IgIT09IHBpZWNlLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgICAgY29uc3QgdG9TcUlkID0gZ2V0U3F1YXJlSWQodG9Sb3csIHRvQ29sKTtcbiAgICAgICAgICAgICAgICAgICBpZih0b1NxSWQpIG1vdmVzLnB1c2godG9TcUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbW92ZXM7XG4gIH1cblxuICBnZXRWYWxpZE1vdmVzRm9yUGllY2Uoc3F1YXJlSWQ6IFNxdWFyZUlkKTogU3F1YXJlSWRbXSB7XG4gICAgY29uc3QgcGllY2UgPSB0aGlzLmdldFBpZWNlQXQoc3F1YXJlSWQpO1xuICAgIGlmICghcGllY2UgfHwgcGllY2UuY29sb3IgIT09IHRoaXMuY3VycmVudFBsYXllcikgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHBzZXVkb0xlZ2FsVGFyZ2V0U3F1YXJlcyA9IHRoaXMuZ2VuZXJhdGVQc2V1ZG9MZWdhbE1vdmVzRm9yUGllY2Uoc3F1YXJlSWQsIHRoaXMuYm9hcmQsIHBpZWNlKTtcbiAgICBjb25zdCBsZWdhbE1vdmVzOiBTcXVhcmVJZFtdID0gW107XG4gICAgcHNldWRvTGVnYWxUYXJnZXRTcXVhcmVzLmZvckVhY2godGFyZ2V0U3F1YXJlSWQgPT4ge1xuICAgICAgY29uc3QgdGVtcEJvYXJkID0gdGhpcy5ib2FyZC5tYXAocm93ID0+IHJvdy5tYXAocCA9PiBwID8gey4uLnB9IDogbnVsbCkpO1xuICAgICAgY29uc3QgZnJvbUNvb3JkcyA9IGdldFNxdWFyZUNvb3JkaW5hdGVzKHNxdWFyZUlkKSE7XG4gICAgICBjb25zdCB0b0Nvb3JkcyA9IGdldFNxdWFyZUNvb3JkaW5hdGVzKHRhcmdldFNxdWFyZUlkKSE7XG4gICAgICBjb25zdCBtb3ZlZFBpZWNlID0gdGVtcEJvYXJkW2Zyb21Db29yZHMucm93XVtmcm9tQ29vcmRzLmNvbF07XG4gICAgICBpZiAobW92ZWRQaWVjZSkgeyBcbiAgICAgICAgICB0ZW1wQm9hcmRbdG9Db29yZHMucm93XVt0b0Nvb3Jkcy5jb2xdID0gbW92ZWRQaWVjZTtcbiAgICAgICAgICB0ZW1wQm9hcmRbZnJvbUNvb3Jkcy5yb3ddW2Zyb21Db29yZHMuY29sXSA9IG51bGw7XG4gICAgICAgICAgaWYgKG1vdmVkUGllY2UudHlwZSA9PT0gUGllY2VUeXBlLlBBV04gJiYgdGFyZ2V0U3F1YXJlSWQgPT09IHRoaXMuZW5QYXNzYW50VGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlZFBhd25Sb3cgPSBmcm9tQ29vcmRzLnJvdzsgXG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlZFBhd25Db2wgPSB0b0Nvb3Jkcy5jb2w7IFxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWYWxpZFNxdWFyZShjYXB0dXJlZFBhd25Sb3csIGNhcHR1cmVkUGF3bkNvbCkpIHRlbXBCb2FyZFtjYXB0dXJlZFBhd25Sb3ddW2NhcHR1cmVkUGF3bkNvbF0gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pc0tpbmdJbkNoZWNrKHRoaXMuY3VycmVudFBsYXllciwgdGVtcEJvYXJkKSkgbGVnYWxNb3Zlcy5wdXNoKHRhcmdldFNxdWFyZUlkKTtcbiAgICB9KTtcbiAgICBpZiAocGllY2UudHlwZSA9PT0gUGllY2VUeXBlLktJTkcgJiYgIXBpZWNlLmhhc01vdmVkKSB7XG4gICAgICAgIGNvbnN0IGtpbmdSb3cgPSBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IDcgOiAwOyBcbiAgICAgICAgaWYgKCAocGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuV0hJVEUgJiYgdGhpcy5jYXN0bGluZ0F2YWlsYWJpbGl0eS53aGl0ZUtpbmdTaWRlKSB8fFxuICAgICAgICAgICAgIChwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CTEFDSyAmJiB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LmJsYWNrS2luZ1NpZGUpICkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJvYXJkW2tpbmdSb3ddWzVdICYmICF0aGlzLmJvYXJkW2tpbmdSb3ddWzZdKSB7IFxuICAgICAgICAgICAgICAgIGNvbnN0IHJvb2tTcXVhcmVJZCA9IHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFID8gSU5JVElBTF9ST09LX1BPU0lUSU9OUy53aGl0ZS5raW5nU2lkZSA6IElOSVRJQUxfUk9PS19QT1NJVElPTlMuYmxhY2sua2luZ1NpZGU7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vayA9IHRoaXMuZ2V0UGllY2VBdChyb29rU3F1YXJlSWQpO1xuICAgICAgICAgICAgICAgIGlmIChyb29rICYmIHJvb2sudHlwZSA9PT0gUGllY2VUeXBlLlJPT0sgJiYgIXJvb2suaGFzTW92ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2luZ1N0YXJ0U3F1YXJlID0gZ2V0U3F1YXJlSWQoa2luZ1JvdywgNCkhO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBraW5nUGF0aFNxdWFyZTEgPSBnZXRTcXVhcmVJZChraW5nUm93LCA1KSE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpbmdQYXRoU3F1YXJlMiA9IGdldFNxdWFyZUlkKGtpbmdSb3csIDYpITtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzU3F1YXJlQXR0YWNrZWQoa2luZ1N0YXJ0U3F1YXJlLCBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IFBpZWNlQ29sb3IuQkxBQ0sgOiBQaWVjZUNvbG9yLldISVRFLCB0aGlzLmJvYXJkKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuaXNTcXVhcmVBdHRhY2tlZChraW5nUGF0aFNxdWFyZTEsIHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFID8gUGllY2VDb2xvci5CTEFDSyA6IFBpZWNlQ29sb3IuV0hJVEUsIHRoaXMuYm9hcmQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5pc1NxdWFyZUF0dGFja2VkKGtpbmdQYXRoU3F1YXJlMiwgcGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuV0hJVEUgPyBQaWVjZUNvbG9yLkJMQUNLIDogUGllY2VDb2xvci5XSElURSwgdGhpcy5ib2FyZCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdhbE1vdmVzLnB1c2goa2luZ1BhdGhTcXVhcmUyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIChwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSAmJiB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LndoaXRlUXVlZW5TaWRlKSB8fFxuICAgICAgICAgICAgIChwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5CTEFDSyAmJiB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LmJsYWNrUXVlZW5TaWRlKSApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ib2FyZFtraW5nUm93XVsxXSAmJiAhdGhpcy5ib2FyZFtraW5nUm93XVsyXSAmJiAhdGhpcy5ib2FyZFtraW5nUm93XVszXSkgeyBcbiAgICAgICAgICAgICAgICBjb25zdCByb29rU3F1YXJlSWQgPSBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IElOSVRJQUxfUk9PS19QT1NJVElPTlMud2hpdGUucXVlZW5TaWRlIDogSU5JVElBTF9ST09LX1BPU0lUSU9OUy5ibGFjay5xdWVlblNpZGU7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vayA9IHRoaXMuZ2V0UGllY2VBdChyb29rU3F1YXJlSWQpO1xuICAgICAgICAgICAgICAgICBpZiAocm9vayAmJiByb29rLnR5cGUgPT09IFBpZWNlVHlwZS5ST09LICYmICFyb29rLmhhc01vdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtpbmdTdGFydFNxdWFyZSA9IGdldFNxdWFyZUlkKGtpbmdSb3csIDQpITtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2luZ1BhdGhTcXVhcmUxID0gZ2V0U3F1YXJlSWQoa2luZ1JvdywgMykhOyBcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2luZ1BhdGhTcXVhcmUyID0gZ2V0U3F1YXJlSWQoa2luZ1JvdywgMikhOyBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzU3F1YXJlQXR0YWNrZWQoa2luZ1N0YXJ0U3F1YXJlLCBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IFBpZWNlQ29sb3IuQkxBQ0sgOiBQaWVjZUNvbG9yLldISVRFLCB0aGlzLmJvYXJkKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuaXNTcXVhcmVBdHRhY2tlZChraW5nUGF0aFNxdWFyZTEsIHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFID8gUGllY2VDb2xvci5CTEFDSyA6IFBpZWNlQ29sb3IuV0hJVEUsIHRoaXMuYm9hcmQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5pc1NxdWFyZUF0dGFja2VkKGtpbmdQYXRoU3F1YXJlMiwgcGllY2UuY29sb3IgPT09IFBpZWNlQ29sb3IuV0hJVEUgPyBQaWVjZUNvbG9yLkJMQUNLIDogUGllY2VDb2xvci5XSElURSwgdGhpcy5ib2FyZCkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgIGxlZ2FsTW92ZXMucHVzaChraW5nUGF0aFNxdWFyZTIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZWdhbE1vdmVzO1xuICB9XG5cbiAgbWFrZU1vdmUobW92ZTogTW92ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGZyb21Db29yZHMgPSBnZXRTcXVhcmVDb29yZGluYXRlcyhtb3ZlLmZyb20pO1xuICAgIGNvbnN0IHRvQ29vcmRzID0gZ2V0U3F1YXJlQ29vcmRpbmF0ZXMobW92ZS50byk7XG4gICAgaWYgKCFmcm9tQ29vcmRzIHx8ICF0b0Nvb3JkcykgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IHBpZWNlVG9Nb3ZlID0gdGhpcy5ib2FyZFtmcm9tQ29vcmRzLnJvd11bZnJvbUNvb3Jkcy5jb2xdO1xuICAgIGlmICghcGllY2VUb01vdmUgfHwgcGllY2VUb01vdmUuY29sb3IgIT09IHRoaXMuY3VycmVudFBsYXllcikgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgY2FwdHVyZWRQaWVjZSA9IHRoaXMuYm9hcmRbdG9Db29yZHMucm93XVt0b0Nvb3Jkcy5jb2xdO1xuICAgIGxldCBpc1Bhd25Nb3ZlID0gcGllY2VUb01vdmUudHlwZSA9PT0gUGllY2VUeXBlLlBBV047XG4gICAgbGV0IGlzQ2FwdHVyZSA9ICEhY2FwdHVyZWRQaWVjZTtcblxuICAgIGlmIChpc1Bhd25Nb3ZlIHx8IGlzQ2FwdHVyZSkgdGhpcy5oYWxmTW92ZUNsb2NrID0gMDsgZWxzZSB0aGlzLmhhbGZNb3ZlQ2xvY2srKztcbiAgICBcbiAgICB0aGlzLmJvYXJkW3RvQ29vcmRzLnJvd11bdG9Db29yZHMuY29sXSA9IHBpZWNlVG9Nb3ZlO1xuICAgIHRoaXMuYm9hcmRbZnJvbUNvb3Jkcy5yb3ddW2Zyb21Db29yZHMuY29sXSA9IG51bGw7XG4gICAgcGllY2VUb01vdmUuaGFzTW92ZWQgPSB0cnVlO1xuICAgIGxldCBvbGRFblBhc3NhbnRUYXJnZXQgPSB0aGlzLmVuUGFzc2FudFRhcmdldDtcbiAgICB0aGlzLmVuUGFzc2FudFRhcmdldCA9IG51bGw7IFxuICAgIGlmIChpc1Bhd25Nb3ZlICYmIG1vdmUudG8gPT09IG9sZEVuUGFzc2FudFRhcmdldCAmJiAhY2FwdHVyZWRQaWVjZSkgeyBcbiAgICAgICAgY29uc3QgY2FwdHVyZWRQYXduUm93ID0gZnJvbUNvb3Jkcy5yb3c7IFxuICAgICAgICBjb25zdCBjYXB0dXJlZFBhd25Db2wgPSB0b0Nvb3Jkcy5jb2w7ICBcbiAgICAgICAgaWYodGhpcy5pc1ZhbGlkU3F1YXJlKGNhcHR1cmVkUGF3blJvdywgY2FwdHVyZWRQYXduQ29sKSkgdGhpcy5ib2FyZFtjYXB0dXJlZFBhd25Sb3ddW2NhcHR1cmVkUGF3bkNvbF0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAocGllY2VUb01vdmUudHlwZSA9PT0gUGllY2VUeXBlLlBBV04gJiYgbW92ZS5wcm9tb3Rpb24pIHtcbiAgICAgICAgaWYgKChwaWVjZVRvTW92ZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSAmJiB0b0Nvb3Jkcy5yb3cgPT09IDApIHx8IChwaWVjZVRvTW92ZS5jb2xvciA9PT0gUGllY2VDb2xvci5CTEFDSyAmJiB0b0Nvb3Jkcy5yb3cgPT09IEJPQVJEX1JPV1MgLSAxKSkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt0b0Nvb3Jkcy5yb3ddW3RvQ29vcmRzLmNvbF0gPSB7IC4uLnBpZWNlVG9Nb3ZlLCB0eXBlOiBtb3ZlLnByb21vdGlvbiB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwaWVjZVRvTW92ZS50eXBlID09PSBQaWVjZVR5cGUuUEFXTiAmJiBNYXRoLmFicyh0b0Nvb3Jkcy5yb3cgLSBmcm9tQ29vcmRzLnJvdykgPT09IDIpIHtcbiAgICAgICAgY29uc3QgZW5QYXNzYW50Um93ID0gKGZyb21Db29yZHMucm93ICsgdG9Db29yZHMucm93KSAvIDI7XG4gICAgICAgIHRoaXMuZW5QYXNzYW50VGFyZ2V0ID0gZ2V0U3F1YXJlSWQoZW5QYXNzYW50Um93LCBmcm9tQ29vcmRzLmNvbCk7XG4gICAgfVxuICAgIGlmIChwaWVjZVRvTW92ZS50eXBlID09PSBQaWVjZVR5cGUuS0lORyAmJiBNYXRoLmFicyh0b0Nvb3Jkcy5jb2wgLSBmcm9tQ29vcmRzLmNvbCkgPT09IDIpIHtcbiAgICAgICAgbGV0IHJvb2tGcm9tQ29sOiBudW1iZXIsIHJvb2tUb0NvbDogbnVtYmVyO1xuICAgICAgICBpZiAodG9Db29yZHMuY29sID4gZnJvbUNvb3Jkcy5jb2wpIHsgcm9va0Zyb21Db2wgPSBCT0FSRF9DT0xTIC0gMTsgcm9va1RvQ29sID0gdG9Db29yZHMuY29sIC0gMTsgfSBcbiAgICAgICAgZWxzZSB7IHJvb2tGcm9tQ29sID0gMDsgcm9va1RvQ29sID0gdG9Db29yZHMuY29sICsgMTsgfVxuICAgICAgICBjb25zdCByb29rID0gdGhpcy5ib2FyZFtmcm9tQ29vcmRzLnJvd11bcm9va0Zyb21Db2xdO1xuICAgICAgICBpZiAocm9vayAmJiByb29rLnR5cGUgPT09IFBpZWNlVHlwZS5ST09LKSB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkW2Zyb21Db29yZHMucm93XVtyb29rVG9Db2xdID0gcm9vaztcbiAgICAgICAgICAgIHRoaXMuYm9hcmRbZnJvbUNvb3Jkcy5yb3ddW3Jvb2tGcm9tQ29sXSA9IG51bGw7XG4gICAgICAgICAgICByb29rLmhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocGllY2VUb01vdmUudHlwZSA9PT0gUGllY2VUeXBlLktJTkcpIHtcbiAgICAgICAgaWYgKHBpZWNlVG9Nb3ZlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFKSB7IHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkud2hpdGVLaW5nU2lkZSA9IGZhbHNlOyB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LndoaXRlUXVlZW5TaWRlID0gZmFsc2U7IH0gXG4gICAgICAgIGVsc2UgeyB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LmJsYWNrS2luZ1NpZGUgPSBmYWxzZTsgdGhpcy5jYXN0bGluZ0F2YWlsYWJpbGl0eS5ibGFja1F1ZWVuU2lkZSA9IGZhbHNlOyB9XG4gICAgfVxuICAgIGlmIChwaWVjZVRvTW92ZS50eXBlID09PSBQaWVjZVR5cGUuUk9PSykge1xuICAgICAgICBpZiAocGllY2VUb01vdmUuY29sb3IgPT09IFBpZWNlQ29sb3IuV0hJVEUpIHtcbiAgICAgICAgICAgIGlmIChtb3ZlLmZyb20gPT09IElOSVRJQUxfUk9PS19QT1NJVElPTlMud2hpdGUua2luZ1NpZGUpIHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkud2hpdGVLaW5nU2lkZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG1vdmUuZnJvbSA9PT0gSU5JVElBTF9ST09LX1BPU0lUSU9OUy53aGl0ZS5xdWVlblNpZGUpIHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkud2hpdGVRdWVlblNpZGUgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtb3ZlLmZyb20gPT09IElOSVRJQUxfUk9PS19QT1NJVElPTlMuYmxhY2sua2luZ1NpZGUpIHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkuYmxhY2tLaW5nU2lkZSA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG1vdmUuZnJvbSA9PT0gSU5JVElBTF9ST09LX1BPU0lUSU9OUy5ibGFjay5xdWVlblNpZGUpIHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkuYmxhY2tRdWVlblNpZGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2FwdHVyZWRQaWVjZSAmJiBjYXB0dXJlZFBpZWNlLnR5cGUgPT09IFBpZWNlVHlwZS5ST09LKSB7XG4gICAgICAgIGlmIChtb3ZlLnRvID09PSBJTklUSUFMX1JPT0tfUE9TSVRJT05TLndoaXRlLmtpbmdTaWRlKSB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LndoaXRlS2luZ1NpZGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1vdmUudG8gPT09IElOSVRJQUxfUk9PS19QT1NJVElPTlMud2hpdGUucXVlZW5TaWRlKSB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LndoaXRlUXVlZW5TaWRlID0gZmFsc2U7XG4gICAgICAgIGlmIChtb3ZlLnRvID09PSBJTklUSUFMX1JPT0tfUE9TSVRJT05TLmJsYWNrLmtpbmdTaWRlKSB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LmJsYWNrS2luZ1NpZGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1vdmUudG8gPT09IElOSVRJQUxfUk9PS19QT1NJVElPTlMuYmxhY2sucXVlZW5TaWRlKSB0aGlzLmNhc3RsaW5nQXZhaWxhYmlsaXR5LmJsYWNrUXVlZW5TaWRlID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudFBsYXllciA9IHRoaXMuY3VycmVudFBsYXllciA9PT0gUGllY2VDb2xvci5XSElURSA/IFBpZWNlQ29sb3IuQkxBQ0sgOiBQaWVjZUNvbG9yLldISVRFO1xuICAgIGlmICh0aGlzLmN1cnJlbnRQbGF5ZXIgPT09IFBpZWNlQ29sb3IuV0hJVEUpIHRoaXMuZnVsbE1vdmVOdW1iZXIrKztcbiAgICB0aGlzLm1vdmVIaXN0b3J5LnB1c2gobW92ZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBnZXRBbGxWYWxpZE1vdmVzRm9yUGxheWVyKHBsYXllckNvbG9yOiBQaWVjZUNvbG9yKTogTW92ZVtdIHtcbiAgICBjb25zdCBhbGxNb3ZlczogTW92ZVtdID0gW107XG4gICAgaWYgKHBsYXllckNvbG9yICE9PSB0aGlzLmN1cnJlbnRQbGF5ZXIpIHJldHVybiBbXTsgXG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBCT0FSRF9ST1dTOyByKyspIHtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgQk9BUkRfQ09MUzsgYysrKSB7XG4gICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5ib2FyZFtyXVtjXTtcbiAgICAgICAgaWYgKHBpZWNlICYmIHBpZWNlLmNvbG9yID09PSBwbGF5ZXJDb2xvcikge1xuICAgICAgICAgIGNvbnN0IGZyb21TcXVhcmVJZCA9IGdldFNxdWFyZUlkKHIsIGMpITtcbiAgICAgICAgICBjb25zdCB2YWxpZFRhcmdldFNxdWFyZXMgPSB0aGlzLmdldFZhbGlkTW92ZXNGb3JQaWVjZShmcm9tU3F1YXJlSWQpO1xuICAgICAgICAgIHZhbGlkVGFyZ2V0U3F1YXJlcy5mb3JFYWNoKHRhcmdldFNxdWFyZUlkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvQ29vcmRzID0gZ2V0U3F1YXJlQ29vcmRpbmF0ZXModGFyZ2V0U3F1YXJlSWQpITtcbiAgICAgICAgICAgIGlmIChwaWVjZS50eXBlID09PSBQaWVjZVR5cGUuUEFXTiAmJiAoKHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLldISVRFICYmIHRvQ29vcmRzLnJvdyA9PT0gMCkgfHwgKHBpZWNlLmNvbG9yID09PSBQaWVjZUNvbG9yLkJMQUNLICYmIHRvQ29vcmRzLnJvdyA9PT0gQk9BUkRfUk9XUyAtIDEpKSkge1xuICAgICAgICAgICAgICBQUk9NT1RJT05fUElFQ0VTLmZvckVhY2gocHJvbW9UeXBlID0+IGFsbE1vdmVzLnB1c2goeyBmcm9tOiBmcm9tU3F1YXJlSWQsIHRvOiB0YXJnZXRTcXVhcmVJZCwgcHJvbW90aW9uOiBwcm9tb1R5cGUgfSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYWxsTW92ZXMucHVzaCh7IGZyb206IGZyb21TcXVhcmVJZCwgdG86IHRhcmdldFNxdWFyZUlkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxNb3ZlcztcbiAgfVxuXG4gIGlzQ2hlY2ttYXRlKHBsYXllckNvbG9yOiBQaWVjZUNvbG9yKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmlzS2luZ0luQ2hlY2socGxheWVyQ29sb3IsIHRoaXMuYm9hcmQpKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsVmFsaWRNb3Zlc0ZvclBsYXllcihwbGF5ZXJDb2xvcikubGVuZ3RoID09PSAwO1xuICB9XG5cbiAgaXNTdGFsZW1hdGUocGxheWVyQ29sb3I6IFBpZWNlQ29sb3IpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5pc0tpbmdJbkNoZWNrKHBsYXllckNvbG9yLCB0aGlzLmJvYXJkKSkgcmV0dXJuIGZhbHNlOyBcbiAgICByZXR1cm4gdGhpcy5nZXRBbGxWYWxpZE1vdmVzRm9yUGxheWVyKHBsYXllckNvbG9yKS5sZW5ndGggPT09IDA7XG4gIH1cbiAgXG4gIHByaXZhdGUgcGllY2VUb0ZlbkNoYXIocGllY2U6IFBpZWNlKTogc3RyaW5nIHtcbiAgICBsZXQgY2hhcjtcbiAgICBzd2l0Y2ggKHBpZWNlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBQaWVjZVR5cGUuUEFXTjogY2hhciA9ICdwJzsgYnJlYWs7IGNhc2UgUGllY2VUeXBlLktOSUdIVDogY2hhciA9ICduJzsgYnJlYWs7XG4gICAgICAgIGNhc2UgUGllY2VUeXBlLkJJU0hPUDogY2hhciA9ICdiJzsgYnJlYWs7IGNhc2UgUGllY2VUeXBlLlJPT0s6IGNoYXIgPSAncic7IGJyZWFrO1xuICAgICAgICBjYXNlIFBpZWNlVHlwZS5RVUVFTjogY2hhciA9ICdxJzsgYnJlYWs7IGNhc2UgUGllY2VUeXBlLktJTkc6IGNoYXIgPSAnayc7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiBwaWVjZS5jb2xvciA9PT0gUGllY2VDb2xvci5XSElURSA/IGNoYXIudG9VcHBlckNhc2UoKSA6IGNoYXI7XG4gIH1cblxuICBib2FyZFRvRkVOKCk6IHN0cmluZyB7XG4gICAgbGV0IGZlbiA9ICcnO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk9BUkRfUk9XUzsgcisrKSB7XG4gICAgICAgIGxldCBlbXB0eUNvdW50ID0gMDtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBCT0FSRF9DT0xTOyBjKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gdGhpcy5ib2FyZFtyXVtjXTtcbiAgICAgICAgICAgIGlmIChwaWVjZSkgeyBpZiAoZW1wdHlDb3VudCA+IDApIHsgZmVuICs9IGVtcHR5Q291bnQ7IGVtcHR5Q291bnQgPSAwOyB9IGZlbiArPSB0aGlzLnBpZWNlVG9GZW5DaGFyKHBpZWNlKTsgfSBcbiAgICAgICAgICAgIGVsc2UgZW1wdHlDb3VudCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbXB0eUNvdW50ID4gMCkgZmVuICs9IGVtcHR5Q291bnQ7XG4gICAgICAgIGlmIChyIDwgQk9BUkRfUk9XUyAtIDEpIGZlbiArPSAnLyc7XG4gICAgfVxuICAgIGZlbiArPSAnICc7XG4gICAgZmVuICs9IHRoaXMuY3VycmVudFBsYXllciA9PT0gUGllY2VDb2xvci5XSElURSA/ICd3JyA6ICdiJzsgZmVuICs9ICcgJztcbiAgICBsZXQgY2FzdGxlRmVuID0gJyc7XG4gICAgaWYgKHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkud2hpdGVLaW5nU2lkZSkgY2FzdGxlRmVuICs9ICdLJzsgaWYgKHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkud2hpdGVRdWVlblNpZGUpIGNhc3RsZUZlbiArPSAnUSc7XG4gICAgaWYgKHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkuYmxhY2tLaW5nU2lkZSkgY2FzdGxlRmVuICs9ICdrJzsgaWYgKHRoaXMuY2FzdGxpbmdBdmFpbGFiaWxpdHkuYmxhY2tRdWVlblNpZGUpIGNhc3RsZUZlbiArPSAncSc7XG4gICAgZmVuICs9IGNhc3RsZUZlbi5sZW5ndGggPiAwID8gY2FzdGxlRmVuIDogJy0nOyBmZW4gKz0gJyAnO1xuICAgIGZlbiArPSB0aGlzLmVuUGFzc2FudFRhcmdldCA/IHRoaXMuZW5QYXNzYW50VGFyZ2V0IDogJy0nOyBmZW4gKz0gJyAnO1xuICAgIGZlbiArPSB0aGlzLmhhbGZNb3ZlQ2xvY2s7IGZlbiArPSAnICc7XG4gICAgZmVuICs9IHRoaXMuZnVsbE1vdmVOdW1iZXI7XG4gICAgcmV0dXJuIGZlbjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBpZWNlVHlwZSIsIlBpZWNlQ29sb3IiLCJCT0FSRF9ST1dTIiwiQk9BUkRfQ09MUyIsIklOSVRJQUxfUk9PS19QT1NJVElPTlMiLCJQUk9NT1RJT05fUElFQ0VTIiwiZ2V0U3F1YXJlQ29vcmRpbmF0ZXMiLCJnZXRTcXVhcmVJZCIsImNyZWF0ZUluaXRpYWxCb2FyZCIsImNyZWF0ZUluaXRpYWxQaWVjZUFycmF5IiwiQ2hlc3NMb2dpYyIsImlzVmFsaWRTcXVhcmUiLCJyb3ciLCJjb2wiLCJnZXRCb2FyZCIsImJvYXJkIiwibWFwIiwicGllY2UiLCJnZXRDdXJyZW50UGxheWVyIiwiY3VycmVudFBsYXllciIsImdldENhc3RsaW5nQXZhaWxhYmlsaXR5IiwiY2FzdGxpbmdBdmFpbGFiaWxpdHkiLCJnZXRFblBhc3NhbnRUYXJnZXQiLCJlblBhc3NhbnRUYXJnZXQiLCJnZXRNb3ZlTnVtYmVyIiwiZnVsbE1vdmVOdW1iZXIiLCJnZXRIYWxmTW92ZUNsb2NrIiwiaGFsZk1vdmVDbG9jayIsImdldFBpZWNlQXQiLCJzcXVhcmVJZCIsImNvb3JkcyIsImlzU3F1YXJlQXR0YWNrZWQiLCJhdHRhY2tlckNvbG9yIiwidGFyZ2V0Q29vcmRzIiwiciIsImMiLCJjb2xvciIsImZyb21Db29yZHMiLCJ0eXBlIiwiUEFXTiIsImRpcmVjdGlvbiIsIldISVRFIiwicHNldWRvTW92ZXMiLCJnZW5lcmF0ZVBzZXVkb0xlZ2FsTW92ZXNGb3JQaWVjZSIsInNvbWUiLCJtb3ZlVGFyZ2V0SWQiLCJpc0tpbmdJbkNoZWNrIiwia2luZ0NvbG9yIiwiYm9hcmRUb0NoZWNrIiwiY3VycmVudEJvYXJkIiwia2luZ1NxdWFyZUlkIiwiS0lORyIsIm9wcG9uZW50Q29sb3IiLCJCTEFDSyIsIm1vdmVzIiwidG9Db29yZHMiLCJ0b1NxSWQiLCJwdXNoIiwiaGFzTW92ZWQiLCJ0b1NxSWQyIiwiZm9yRWFjaCIsImNvbE9mZnNldCIsInRhcmdldFBpZWNlIiwidG9TcUlkQ2FuZCIsImVuUGFzc2FudFRhcmdldENvb3JkcyIsIktOSUdIVCIsImtuaWdodE1vdmVzIiwiZHIiLCJkYyIsIlJPT0siLCJCSVNIT1AiLCJRVUVFTiIsImRpcmVjdGlvbnMiLCJpIiwidG9Sb3ciLCJ0b0NvbCIsInRhcmdldFBpZWNlT25QYXRoIiwia2luZ01vdmVzIiwiZ2V0VmFsaWRNb3Zlc0ZvclBpZWNlIiwicHNldWRvTGVnYWxUYXJnZXRTcXVhcmVzIiwibGVnYWxNb3ZlcyIsInRhcmdldFNxdWFyZUlkIiwidGVtcEJvYXJkIiwicCIsIm1vdmVkUGllY2UiLCJjYXB0dXJlZFBhd25Sb3ciLCJjYXB0dXJlZFBhd25Db2wiLCJraW5nUm93Iiwid2hpdGVLaW5nU2lkZSIsImJsYWNrS2luZ1NpZGUiLCJyb29rU3F1YXJlSWQiLCJ3aGl0ZSIsImtpbmdTaWRlIiwiYmxhY2siLCJyb29rIiwia2luZ1N0YXJ0U3F1YXJlIiwia2luZ1BhdGhTcXVhcmUxIiwia2luZ1BhdGhTcXVhcmUyIiwid2hpdGVRdWVlblNpZGUiLCJibGFja1F1ZWVuU2lkZSIsInF1ZWVuU2lkZSIsIm1ha2VNb3ZlIiwibW92ZSIsImZyb20iLCJ0byIsInBpZWNlVG9Nb3ZlIiwiY2FwdHVyZWRQaWVjZSIsImlzUGF3bk1vdmUiLCJpc0NhcHR1cmUiLCJvbGRFblBhc3NhbnRUYXJnZXQiLCJwcm9tb3Rpb24iLCJNYXRoIiwiYWJzIiwiZW5QYXNzYW50Um93Iiwicm9va0Zyb21Db2wiLCJyb29rVG9Db2wiLCJtb3ZlSGlzdG9yeSIsImdldEFsbFZhbGlkTW92ZXNGb3JQbGF5ZXIiLCJwbGF5ZXJDb2xvciIsImFsbE1vdmVzIiwiZnJvbVNxdWFyZUlkIiwidmFsaWRUYXJnZXRTcXVhcmVzIiwicHJvbW9UeXBlIiwiaXNDaGVja21hdGUiLCJsZW5ndGgiLCJpc1N0YWxlbWF0ZSIsInBpZWNlVG9GZW5DaGFyIiwiY2hhciIsInRvVXBwZXJDYXNlIiwiYm9hcmRUb0ZFTiIsImZlbiIsImVtcHR5Q291bnQiLCJjYXN0bGVGZW4iLCJjb25zdHJ1Y3RvciIsImluaXRpYWxHYW1lU3RhdGUiLCJib2FyZFN0YXRlIiwic3EiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./services/chessLogic.ts\n"));

/***/ }),

/***/ "./services/geminiService.ts":
/*!***********************************!*\
  !*** ./services/geminiService.ts ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAIMove: function() { return /* binding */ getAIMove; }\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/types */ \"./types.ts\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"../../../Library/pnpm/global/5/.pnpm/process@0.11.10/node_modules/process/browser.js\");\n\n\n// For Next.js, environment variables prefixed with NEXT_PUBLIC_ are exposed to the browser.\n// Ensure your .env.local or environment settings define NEXT_PUBLIC_API_KEY\nconst API_KEY = process.env.NEXT_PUBLIC_API_KEY;\nlet ai = null;\nif (API_KEY) {\n    ai = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(API_KEY);\n} else {\n    console.warn(\"NEXT_PUBLIC_API_KEY environment variable not set. Gemini API calls will be disabled. AI will use random moves.\");\n}\n/**\n * Generates a system prompt for the Gemini AI based on the selected difficulty.\n * This guides the AI's chess-playing style.\n * @param difficulty The chosen difficulty level.\n * @returns A string containing the system instruction for the AI.\n */ const getSystemPrompt = (difficulty)=>{\n    let systemMessageBase = \"You are a chess AI. You will be given the current board state in FEN (Forsyth-Edwards Notation) and whose turn it is. \\nYour goal is to choose a valid chess move for the specified player. \\nOutput ONLY the move in UCI format (e.g., e2e4, e7e8q for promotion to Queen). Do not include any other text, reasoning, or apologies.\\nThe current player is indicated in the FEN string. If it's 'w', it's White's turn. If it's 'b', it's Black's turn.\";\n    switch(difficulty){\n        case 1:\n            systemMessageBase += \"\\nPlay as a beginner. Prefer simple pawn moves or developing knights and bishops. Try to capture opponent pieces if a safe capture is available. Avoid leaving your pieces where they can be captured for free (hanging pieces).\";\n            break;\n        case 2:\n            systemMessageBase += \"\\nPlay as an improving beginner. Focus on developing your pieces towards the center, ensuring your king is safe (consider castling), and capturing opponent's pieces. Look for simple one-move attacks or captures. Avoid obvious blunders and hanging your pieces.\";\n            break;\n        case 3:\n            systemMessageBase += \"\\nPlay as an intermediate club player. Aim for material advantage, control of central squares, and good piece coordination. Look for basic tactical opportunities like forks, pins, and skewers (1-2 moves ahead). Defend against your opponent's immediate threats. Consider pawn structure and open files.\";\n            break;\n        case 4:\n            systemMessageBase += \"\\nPlay as a strong, advanced chess player. Analyze the position for tactical combinations (forks, pins, skewers, discovered attacks) and strategic advantages (outposts, pawn weaknesses, space). Calculate variations carefully (2-3 moves ahead or more). Your goal is to play precise, strong chess, build up pressure, and convert advantages into a win. Be very mindful of king safety for both sides.\";\n            break;\n    }\n    return systemMessageBase;\n};\n/**\n * Determines the AI's temperature (creativity/randomness) based on difficulty.\n * Lower temperature means more deterministic/conservative moves.\n * @param difficulty The chosen difficulty level.\n * @returns A number representing the temperature (0.0 to 1.0).\n */ const getTemperatureForDifficulty = (difficulty)=>{\n    switch(difficulty){\n        case 1:\n            return 0.7; // More random\n        case 2:\n            return 0.5;\n        case 3:\n            return 0.3;\n        case 4:\n            return 0.1; // Less random, more focused\n        default:\n            return 0.5;\n    }\n};\n/**\n * Fetches an AI move from the Gemini API or falls back to a random move if API is not available or fails.\n * @param chessLogic The current ChessLogic instance to get FEN and player info.\n * @param difficulty The difficulty level for the AI.\n * @param validMovesForAI A list of valid UCI moves for the AI to choose from.\n * @returns A promise that resolves to the chosen AI move in UCI format, or null if no valid move can be made.\n */ const getAIMove = async (chessLogic, difficulty, validMovesForAI)=>{\n    if (!ai) {\n        console.warn(\"Gemini AI not initialized. Falling back to random move.\");\n        if (validMovesForAI.length > 0) {\n            return validMovesForAI[Math.floor(Math.random() * validMovesForAI.length)];\n        }\n        return null;\n    }\n    const fen = chessLogic.boardToFEN();\n    const currentPlayer = chessLogic.getCurrentPlayer();\n    const systemPrompt = getSystemPrompt(difficulty);\n    const temperature = getTemperatureForDifficulty(difficulty);\n    const userPrompt = \"Current board (FEN): \".concat(fen, \"\\nIt is \").concat(currentPlayer === _types__WEBPACK_IMPORTED_MODULE_1__.PieceColor.WHITE ? \"White (w)\" : \"Black (b)\", \"'s turn. Choose your move in UCI format. Valid moves include: \").concat(validMovesForAI.join(\", \"), \".\");\n    try {\n        var _result_response_candidates__content_parts_, _result_response_candidates__content_parts, _result_response_candidates__content, _result_response_candidates_, _result_response_candidates;\n        const model = ai.getGenerativeModel({\n            model: \"gemini-2.5-flash-preview-04-17\"\n        });\n        const result = await model.generateContent({\n            systemInstruction: systemPrompt,\n            contents: [\n                {\n                    role: \"user\",\n                    parts: [\n                        {\n                            text: userPrompt\n                        }\n                    ]\n                }\n            ],\n            generationConfig: {\n                temperature: temperature,\n                topP: 0.95\n            }\n        });\n        // CORRECTED: Access the text content from the response.\n        // The 'GenerateContentResponse' itself does not have a 'text' property.\n        // The actual text is found within candidates[0].content.parts[0].text\n        const aiMoveUci = (_result_response_candidates = result.response.candidates) === null || _result_response_candidates === void 0 ? void 0 : (_result_response_candidates_ = _result_response_candidates[0]) === null || _result_response_candidates_ === void 0 ? void 0 : (_result_response_candidates__content = _result_response_candidates_.content) === null || _result_response_candidates__content === void 0 ? void 0 : (_result_response_candidates__content_parts = _result_response_candidates__content.parts) === null || _result_response_candidates__content_parts === void 0 ? void 0 : (_result_response_candidates__content_parts_ = _result_response_candidates__content_parts[0]) === null || _result_response_candidates__content_parts_ === void 0 ? void 0 : _result_response_candidates__content_parts_.text;\n        // Ensure aiMoveUci is not null or undefined before proceeding\n        if (!aiMoveUci) {\n            console.warn(\"Gemini API did not return text content or content was empty. Falling back to random move.\");\n            if (validMovesForAI.length > 0) return validMovesForAI[Math.floor(Math.random() * validMovesForAI.length)];\n            return null;\n        }\n        const trimmedAiMoveUci = aiMoveUci.trim().toLowerCase();\n        const uciRegex = /^[a-h][1-8][a-h][1-8][qrnb]?$/;\n        // Validate AI's proposed move format\n        if (!uciRegex.test(trimmedAiMoveUci)) {\n            console.warn(\"Gemini proposed an invalidly formatted move:\", aiMoveUci, \"Falling back to random.\");\n            if (validMovesForAI.length > 0) return validMovesForAI[Math.floor(Math.random() * validMovesForAI.length)];\n            return null;\n        }\n        // Validate if AI's proposed move is actually a legal move from the pre-calculated list\n        if (validMovesForAI.includes(trimmedAiMoveUci)) {\n            return trimmedAiMoveUci;\n        } else {\n            console.warn(\"Gemini proposed a move not in the pre-calculated valid list:\", aiMoveUci, \"Valid moves:\", validMovesForAI, \"Falling back to random.\");\n            if (validMovesForAI.length > 0) return validMovesForAI[Math.floor(Math.random() * validMovesForAI.length)];\n            return null;\n        }\n    } catch (error) {\n        console.error(\"Error fetching AI move from Gemini:\", error);\n        if (validMovesForAI.length > 0) {\n            console.warn(\"Falling back to random move due to API error.\");\n            return validMovesForAI[Math.floor(Math.random() * validMovesForAI.length)];\n        }\n        return null;\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWdCQyxNQUFNLEVBQUU7WUFDMUcsT0FBTztRQUNUO1FBRUEsTUFBTTRCLG1CQUFtQkosVUFBVUssSUFBSSxHQUFHQyxXQUFXO1FBQ3JELE1BQU1DLFdBQVc7UUFFakIscUNBQXFDO1FBQ3JDLElBQUksQ0FBQ0EsU0FBU0MsSUFBSSxDQUFDSixtQkFBbUI7WUFDcENyQyxRQUFRQyxJQUFJLENBQUMsZ0RBQWdEZ0MsV0FBVztZQUN4RSxJQUFJekIsZ0JBQWdCQyxNQUFNLEdBQUcsR0FBRyxPQUFPRCxlQUFlLENBQUNFLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLSixnQkFBZ0JDLE1BQU0sRUFBRTtZQUMxRyxPQUFPO1FBQ1Q7UUFFQSx1RkFBdUY7UUFDdkYsSUFBSUQsZ0JBQWdCa0MsUUFBUSxDQUFDTCxtQkFBbUI7WUFDOUMsT0FBT0E7UUFDVCxPQUFPO1lBQ0xyQyxRQUFRQyxJQUFJLENBQUMsZ0VBQWdFZ0MsV0FBVyxnQkFBZ0J6QixpQkFBaUI7WUFDekgsSUFBSUEsZ0JBQWdCQyxNQUFNLEdBQUcsR0FBRyxPQUFPRCxlQUFlLENBQUNFLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLSixnQkFBZ0JDLE1BQU0sRUFBRTtZQUMxRyxPQUFPO1FBQ1Q7SUFFRixFQUFFLE9BQU9rQyxPQUFPO1FBQ2QzQyxRQUFRMkMsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsSUFBSW5DLGdCQUFnQkMsTUFBTSxHQUFHLEdBQUc7WUFDNUJULFFBQVFDLElBQUksQ0FBQztZQUNiLE9BQU9PLGVBQWUsQ0FBQ0UsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUtKLGdCQUFnQkMsTUFBTSxFQUFFO1FBQzlFO1FBQ0EsT0FBTztJQUNUO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zZXJ2aWNlcy9nZW1pbmlTZXJ2aWNlLnRzP2QyYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJLCBHZW5lcmF0ZUNvbnRlbnRSZXNwb25zZSB9IGZyb20gXCJAZ29vZ2xlL2dlbmVyYXRpdmUtYWlcIjtcbmltcG9ydCB7IFBpZWNlQ29sb3IsIERpZmZpY3VsdHkgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IENoZXNzTG9naWMgfSBmcm9tICcuL2NoZXNzTG9naWMnO1xuXG4vLyBGb3IgTmV4dC5qcywgZW52aXJvbm1lbnQgdmFyaWFibGVzIHByZWZpeGVkIHdpdGggTkVYVF9QVUJMSUNfIGFyZSBleHBvc2VkIHRvIHRoZSBicm93c2VyLlxuLy8gRW5zdXJlIHlvdXIgLmVudi5sb2NhbCBvciBlbnZpcm9ubWVudCBzZXR0aW5ncyBkZWZpbmUgTkVYVF9QVUJMSUNfQVBJX0tFWVxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9LRVk7XG5cbmxldCBhaTogR29vZ2xlR2VuZXJhdGl2ZUFJIHwgbnVsbCA9IG51bGw7XG5pZiAoQVBJX0tFWSkge1xuICBhaSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkoQVBJX0tFWSk7XG59IGVsc2Uge1xuICBjb25zb2xlLndhcm4oXCJORVhUX1BVQkxJQ19BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIG5vdCBzZXQuIEdlbWluaSBBUEkgY2FsbHMgd2lsbCBiZSBkaXNhYmxlZC4gQUkgd2lsbCB1c2UgcmFuZG9tIG1vdmVzLlwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgR2VtaW5pIEFJIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBkaWZmaWN1bHR5LlxuICogVGhpcyBndWlkZXMgdGhlIEFJJ3MgY2hlc3MtcGxheWluZyBzdHlsZS5cbiAqIEBwYXJhbSBkaWZmaWN1bHR5IFRoZSBjaG9zZW4gZGlmZmljdWx0eSBsZXZlbC5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHN5c3RlbSBpbnN0cnVjdGlvbiBmb3IgdGhlIEFJLlxuICovXG5jb25zdCBnZXRTeXN0ZW1Qcm9tcHQgPSAoZGlmZmljdWx0eTogRGlmZmljdWx0eSk6IHN0cmluZyA9PiB7XG4gIGxldCBzeXN0ZW1NZXNzYWdlQmFzZSA9IGBZb3UgYXJlIGEgY2hlc3MgQUkuIFlvdSB3aWxsIGJlIGdpdmVuIHRoZSBjdXJyZW50IGJvYXJkIHN0YXRlIGluIEZFTiAoRm9yc3l0aC1FZHdhcmRzIE5vdGF0aW9uKSBhbmQgd2hvc2UgdHVybiBpdCBpcy4gXG5Zb3VyIGdvYWwgaXMgdG8gY2hvb3NlIGEgdmFsaWQgY2hlc3MgbW92ZSBmb3IgdGhlIHNwZWNpZmllZCBwbGF5ZXIuIFxuT3V0cHV0IE9OTFkgdGhlIG1vdmUgaW4gVUNJIGZvcm1hdCAoZS5nLiwgZTJlNCwgZTdlOHEgZm9yIHByb21vdGlvbiB0byBRdWVlbikuIERvIG5vdCBpbmNsdWRlIGFueSBvdGhlciB0ZXh0LCByZWFzb25pbmcsIG9yIGFwb2xvZ2llcy5cblRoZSBjdXJyZW50IHBsYXllciBpcyBpbmRpY2F0ZWQgaW4gdGhlIEZFTiBzdHJpbmcuIElmIGl0J3MgJ3cnLCBpdCdzIFdoaXRlJ3MgdHVybi4gSWYgaXQncyAnYicsIGl0J3MgQmxhY2sncyB0dXJuLmA7XG5cbiAgc3dpdGNoIChkaWZmaWN1bHR5KSB7XG4gICAgY2FzZSAxOlxuICAgICAgc3lzdGVtTWVzc2FnZUJhc2UgKz0gXCJcXG5QbGF5IGFzIGEgYmVnaW5uZXIuIFByZWZlciBzaW1wbGUgcGF3biBtb3ZlcyBvciBkZXZlbG9waW5nIGtuaWdodHMgYW5kIGJpc2hvcHMuIFRyeSB0byBjYXB0dXJlIG9wcG9uZW50IHBpZWNlcyBpZiBhIHNhZmUgY2FwdHVyZSBpcyBhdmFpbGFibGUuIEF2b2lkIGxlYXZpbmcgeW91ciBwaWVjZXMgd2hlcmUgdGhleSBjYW4gYmUgY2FwdHVyZWQgZm9yIGZyZWUgKGhhbmdpbmcgcGllY2VzKS5cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHN5c3RlbU1lc3NhZ2VCYXNlICs9IFwiXFxuUGxheSBhcyBhbiBpbXByb3ZpbmcgYmVnaW5uZXIuIEZvY3VzIG9uIGRldmVsb3BpbmcgeW91ciBwaWVjZXMgdG93YXJkcyB0aGUgY2VudGVyLCBlbnN1cmluZyB5b3VyIGtpbmcgaXMgc2FmZSAoY29uc2lkZXIgY2FzdGxpbmcpLCBhbmQgY2FwdHVyaW5nIG9wcG9uZW50J3MgcGllY2VzLiBMb29rIGZvciBzaW1wbGUgb25lLW1vdmUgYXR0YWNrcyBvciBjYXB0dXJlcy4gQXZvaWQgb2J2aW91cyBibHVuZGVycyBhbmQgaGFuZ2luZyB5b3VyIHBpZWNlcy5cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIHN5c3RlbU1lc3NhZ2VCYXNlICs9IFwiXFxuUGxheSBhcyBhbiBpbnRlcm1lZGlhdGUgY2x1YiBwbGF5ZXIuIEFpbSBmb3IgbWF0ZXJpYWwgYWR2YW50YWdlLCBjb250cm9sIG9mIGNlbnRyYWwgc3F1YXJlcywgYW5kIGdvb2QgcGllY2UgY29vcmRpbmF0aW9uLiBMb29rIGZvciBiYXNpYyB0YWN0aWNhbCBvcHBvcnR1bml0aWVzIGxpa2UgZm9ya3MsIHBpbnMsIGFuZCBza2V3ZXJzICgxLTIgbW92ZXMgYWhlYWQpLiBEZWZlbmQgYWdhaW5zdCB5b3VyIG9wcG9uZW50J3MgaW1tZWRpYXRlIHRocmVhdHMuIENvbnNpZGVyIHBhd24gc3RydWN0dXJlIGFuZCBvcGVuIGZpbGVzLlwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgc3lzdGVtTWVzc2FnZUJhc2UgKz0gXCJcXG5QbGF5IGFzIGEgc3Ryb25nLCBhZHZhbmNlZCBjaGVzcyBwbGF5ZXIuIEFuYWx5emUgdGhlIHBvc2l0aW9uIGZvciB0YWN0aWNhbCBjb21iaW5hdGlvbnMgKGZvcmtzLCBwaW5zLCBza2V3ZXJzLCBkaXNjb3ZlcmVkIGF0dGFja3MpIGFuZCBzdHJhdGVnaWMgYWR2YW50YWdlcyAob3V0cG9zdHMsIHBhd24gd2Vha25lc3Nlcywgc3BhY2UpLiBDYWxjdWxhdGUgdmFyaWF0aW9ucyBjYXJlZnVsbHkgKDItMyBtb3ZlcyBhaGVhZCBvciBtb3JlKS4gWW91ciBnb2FsIGlzIHRvIHBsYXkgcHJlY2lzZSwgc3Ryb25nIGNoZXNzLCBidWlsZCB1cCBwcmVzc3VyZSwgYW5kIGNvbnZlcnQgYWR2YW50YWdlcyBpbnRvIGEgd2luLiBCZSB2ZXJ5IG1pbmRmdWwgb2Yga2luZyBzYWZldHkgZm9yIGJvdGggc2lkZXMuXCI7XG4gICAgICBicmVhaztcbiAgfVxuICByZXR1cm4gc3lzdGVtTWVzc2FnZUJhc2U7XG59O1xuXG4vKipcbiAqIERldGVybWluZXMgdGhlIEFJJ3MgdGVtcGVyYXR1cmUgKGNyZWF0aXZpdHkvcmFuZG9tbmVzcykgYmFzZWQgb24gZGlmZmljdWx0eS5cbiAqIExvd2VyIHRlbXBlcmF0dXJlIG1lYW5zIG1vcmUgZGV0ZXJtaW5pc3RpYy9jb25zZXJ2YXRpdmUgbW92ZXMuXG4gKiBAcGFyYW0gZGlmZmljdWx0eSBUaGUgY2hvc2VuIGRpZmZpY3VsdHkgbGV2ZWwuXG4gKiBAcmV0dXJucyBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIHRlbXBlcmF0dXJlICgwLjAgdG8gMS4wKS5cbiAqL1xuY29uc3QgZ2V0VGVtcGVyYXR1cmVGb3JEaWZmaWN1bHR5ID0gKGRpZmZpY3VsdHk6IERpZmZpY3VsdHkpOiBudW1iZXIgPT4ge1xuICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICBjYXNlIDE6IHJldHVybiAwLjc7IC8vIE1vcmUgcmFuZG9tXG4gICAgY2FzZSAyOiByZXR1cm4gMC41O1xuICAgIGNhc2UgMzogcmV0dXJuIDAuMztcbiAgICBjYXNlIDQ6IHJldHVybiAwLjE7IC8vIExlc3MgcmFuZG9tLCBtb3JlIGZvY3VzZWRcbiAgICBkZWZhdWx0OiByZXR1cm4gMC41O1xuICB9XG59XG5cbi8qKlxuICogRmV0Y2hlcyBhbiBBSSBtb3ZlIGZyb20gdGhlIEdlbWluaSBBUEkgb3IgZmFsbHMgYmFjayB0byBhIHJhbmRvbSBtb3ZlIGlmIEFQSSBpcyBub3QgYXZhaWxhYmxlIG9yIGZhaWxzLlxuICogQHBhcmFtIGNoZXNzTG9naWMgVGhlIGN1cnJlbnQgQ2hlc3NMb2dpYyBpbnN0YW5jZSB0byBnZXQgRkVOIGFuZCBwbGF5ZXIgaW5mby5cbiAqIEBwYXJhbSBkaWZmaWN1bHR5IFRoZSBkaWZmaWN1bHR5IGxldmVsIGZvciB0aGUgQUkuXG4gKiBAcGFyYW0gdmFsaWRNb3Zlc0ZvckFJIEEgbGlzdCBvZiB2YWxpZCBVQ0kgbW92ZXMgZm9yIHRoZSBBSSB0byBjaG9vc2UgZnJvbS5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBjaG9zZW4gQUkgbW92ZSBpbiBVQ0kgZm9ybWF0LCBvciBudWxsIGlmIG5vIHZhbGlkIG1vdmUgY2FuIGJlIG1hZGUuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBSU1vdmUgPSBhc3luYyAoXG4gIGNoZXNzTG9naWM6IENoZXNzTG9naWMsIFxuICBkaWZmaWN1bHR5OiBEaWZmaWN1bHR5LFxuICB2YWxpZE1vdmVzRm9yQUk6IHN0cmluZ1tdIFxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiA9PiB7XG4gIGlmICghYWkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJHZW1pbmkgQUkgbm90IGluaXRpYWxpemVkLiBGYWxsaW5nIGJhY2sgdG8gcmFuZG9tIG1vdmUuXCIpO1xuICAgIGlmICh2YWxpZE1vdmVzRm9yQUkubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHZhbGlkTW92ZXNGb3JBSVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZE1vdmVzRm9yQUkubGVuZ3RoKV07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZmVuID0gY2hlc3NMb2dpYy5ib2FyZFRvRkVOKCk7XG4gIGNvbnN0IGN1cnJlbnRQbGF5ZXIgPSBjaGVzc0xvZ2ljLmdldEN1cnJlbnRQbGF5ZXIoKTtcbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gZ2V0U3lzdGVtUHJvbXB0KGRpZmZpY3VsdHkpO1xuICBjb25zdCB0ZW1wZXJhdHVyZSA9IGdldFRlbXBlcmF0dXJlRm9yRGlmZmljdWx0eShkaWZmaWN1bHR5KTtcbiAgY29uc3QgdXNlclByb21wdCA9IGBDdXJyZW50IGJvYXJkIChGRU4pOiAke2Zlbn1cXG5JdCBpcyAke2N1cnJlbnRQbGF5ZXIgPT09IFBpZWNlQ29sb3IuV0hJVEUgPyAnV2hpdGUgKHcpJyA6ICdCbGFjayAoYiknfSdzIHR1cm4uIENob29zZSB5b3VyIG1vdmUgaW4gVUNJIGZvcm1hdC4gVmFsaWQgbW92ZXMgaW5jbHVkZTogJHt2YWxpZE1vdmVzRm9yQUkuam9pbignLCAnKX0uYDtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgbW9kZWwgPSBhaS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ2dlbWluaS0yLjUtZmxhc2gtcHJldmlldy0wNC0xNycgfSk7IFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudCh7IFxuICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHN5c3RlbVByb21wdCwgXG4gICAgICBjb250ZW50czogW3sgcm9sZTogJ3VzZXInLCBwYXJ0czogW3sgdGV4dDogdXNlclByb21wdCB9XSB9XSwgXG4gICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgIHRlbXBlcmF0dXJlOiB0ZW1wZXJhdHVyZSwgXG4gICAgICAgIHRvcFA6IDAuOTUsIFxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ09SUkVDVEVEOiBBY2Nlc3MgdGhlIHRleHQgY29udGVudCBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAvLyBUaGUgJ0dlbmVyYXRlQ29udGVudFJlc3BvbnNlJyBpdHNlbGYgZG9lcyBub3QgaGF2ZSBhICd0ZXh0JyBwcm9wZXJ0eS5cbiAgICAvLyBUaGUgYWN0dWFsIHRleHQgaXMgZm91bmQgd2l0aGluIGNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0XG4gICAgY29uc3QgYWlNb3ZlVWNpID0gcmVzdWx0LnJlc3BvbnNlLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dDsgXG5cbiAgICAvLyBFbnN1cmUgYWlNb3ZlVWNpIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZCBiZWZvcmUgcHJvY2VlZGluZ1xuICAgIGlmICghYWlNb3ZlVWNpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJHZW1pbmkgQVBJIGRpZCBub3QgcmV0dXJuIHRleHQgY29udGVudCBvciBjb250ZW50IHdhcyBlbXB0eS4gRmFsbGluZyBiYWNrIHRvIHJhbmRvbSBtb3ZlLlwiKTtcbiAgICAgIGlmICh2YWxpZE1vdmVzRm9yQUkubGVuZ3RoID4gMCkgcmV0dXJuIHZhbGlkTW92ZXNGb3JBSVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZE1vdmVzRm9yQUkubGVuZ3RoKV07XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB0cmltbWVkQWlNb3ZlVWNpID0gYWlNb3ZlVWNpLnRyaW0oKS50b0xvd2VyQ2FzZSgpOyBcbiAgICBjb25zdCB1Y2lSZWdleCA9IC9eW2EtaF1bMS04XVthLWhdWzEtOF1bcXJuYl0/JC87IFxuICAgIFxuICAgIC8vIFZhbGlkYXRlIEFJJ3MgcHJvcG9zZWQgbW92ZSBmb3JtYXRcbiAgICBpZiAoIXVjaVJlZ2V4LnRlc3QodHJpbW1lZEFpTW92ZVVjaSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkdlbWluaSBwcm9wb3NlZCBhbiBpbnZhbGlkbHkgZm9ybWF0dGVkIG1vdmU6XCIsIGFpTW92ZVVjaSwgXCJGYWxsaW5nIGJhY2sgdG8gcmFuZG9tLlwiKTtcbiAgICAgIGlmICh2YWxpZE1vdmVzRm9yQUkubGVuZ3RoID4gMCkgcmV0dXJuIHZhbGlkTW92ZXNGb3JBSVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZE1vdmVzRm9yQUkubGVuZ3RoKV07XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgaWYgQUkncyBwcm9wb3NlZCBtb3ZlIGlzIGFjdHVhbGx5IGEgbGVnYWwgbW92ZSBmcm9tIHRoZSBwcmUtY2FsY3VsYXRlZCBsaXN0XG4gICAgaWYgKHZhbGlkTW92ZXNGb3JBSS5pbmNsdWRlcyh0cmltbWVkQWlNb3ZlVWNpKSkge1xuICAgICAgcmV0dXJuIHRyaW1tZWRBaU1vdmVVY2k7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkdlbWluaSBwcm9wb3NlZCBhIG1vdmUgbm90IGluIHRoZSBwcmUtY2FsY3VsYXRlZCB2YWxpZCBsaXN0OlwiLCBhaU1vdmVVY2ksIFwiVmFsaWQgbW92ZXM6XCIsIHZhbGlkTW92ZXNGb3JBSSwgXCJGYWxsaW5nIGJhY2sgdG8gcmFuZG9tLlwiKTtcbiAgICAgIGlmICh2YWxpZE1vdmVzRm9yQUkubGVuZ3RoID4gMCkgcmV0dXJuIHZhbGlkTW92ZXNGb3JBSVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZE1vdmVzRm9yQUkubGVuZ3RoKV07XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgQUkgbW92ZSBmcm9tIEdlbWluaTpcIiwgZXJyb3IpO1xuICAgIGlmICh2YWxpZE1vdmVzRm9yQUkubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWxsaW5nIGJhY2sgdG8gcmFuZG9tIG1vdmUgZHVlIHRvIEFQSSBlcnJvci5cIik7XG4gICAgICAgIHJldHVybiB2YWxpZE1vdmVzRm9yQUlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsaWRNb3Zlc0ZvckFJLmxlbmd0aCldO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJQaWVjZUNvbG9yIiwiQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfS0VZIiwiYWkiLCJjb25zb2xlIiwid2FybiIsImdldFN5c3RlbVByb21wdCIsImRpZmZpY3VsdHkiLCJzeXN0ZW1NZXNzYWdlQmFzZSIsImdldFRlbXBlcmF0dXJlRm9yRGlmZmljdWx0eSIsImdldEFJTW92ZSIsImNoZXNzTG9naWMiLCJ2YWxpZE1vdmVzRm9yQUkiLCJsZW5ndGgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJmZW4iLCJib2FyZFRvRkVOIiwiY3VycmVudFBsYXllciIsImdldEN1cnJlbnRQbGF5ZXIiLCJzeXN0ZW1Qcm9tcHQiLCJ0ZW1wZXJhdHVyZSIsInVzZXJQcm9tcHQiLCJXSElURSIsImpvaW4iLCJyZXN1bHQiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdlbmVyYXRlQ29udGVudCIsInN5c3RlbUluc3RydWN0aW9uIiwiY29udGVudHMiLCJyb2xlIiwicGFydHMiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkNvbmZpZyIsInRvcFAiLCJhaU1vdmVVY2kiLCJyZXNwb25zZSIsImNhbmRpZGF0ZXMiLCJjb250ZW50IiwidHJpbW1lZEFpTW92ZVVjaSIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInVjaVJlZ2V4IiwidGVzdCIsImluY2x1ZGVzIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./services/geminiService.ts\n"));

/***/ }),

/***/ "./types.ts":
/*!******************!*\
  !*** ./types.ts ***!
  \******************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PieceColor: function() { return /* binding */ PieceColor; },\n/* harmony export */   PieceType: function() { return /* binding */ PieceType; }\n/* harmony export */ });\nvar PieceType;\n(function(PieceType) {\n    PieceType[\"PAWN\"] = \"PAWN\";\n    PieceType[\"ROOK\"] = \"ROOK\";\n    PieceType[\"KNIGHT\"] = \"KNIGHT\";\n    PieceType[\"BISHOP\"] = \"BISHOP\";\n    PieceType[\"QUEEN\"] = \"QUEEN\";\n    PieceType[\"KING\"] = \"KING\";\n})(PieceType || (PieceType = {}));\nvar PieceColor;\n(function(PieceColor) {\n    PieceColor[\"WHITE\"] = \"white\";\n    PieceColor[\"BLACK\"] = \"black\";\n})(PieceColor || (PieceColor = {}));\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7VUFDWUE7Ozs7Ozs7R0FBQUEsY0FBQUE7O1VBU0FDOzs7R0FBQUEsZUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vdHlwZXMudHM/NTY1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBlbnVtIFBpZWNlVHlwZSB7XG4gIFBBV04gPSAnUEFXTicsXG4gIFJPT0sgPSAnUk9PSycsXG4gIEtOSUdIVCA9ICdLTklHSFQnLFxuICBCSVNIT1AgPSAnQklTSE9QJyxcbiAgUVVFRU4gPSAnUVVFRU4nLFxuICBLSU5HID0gJ0tJTkcnLFxufVxuXG5leHBvcnQgZW51bSBQaWVjZUNvbG9yIHtcbiAgV0hJVEUgPSAnd2hpdGUnLFxuICBCTEFDSyA9ICdibGFjaycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2Uge1xuICB0eXBlOiBQaWVjZVR5cGU7XG4gIGNvbG9yOiBQaWVjZUNvbG9yO1xuICBoYXNNb3ZlZD86IGJvb2xlYW47IC8vIEZvciBjYXN0bGluZyBhbmQgcGF3bidzIGZpcnN0IG1vdmVcbn1cblxuZXhwb3J0IHR5cGUgU3F1YXJlSWQgPSBzdHJpbmc7IC8vIGUuZy4sIFwiYTFcIiwgXCJoOFwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3F1YXJlU3RhdGUge1xuICBpZDogU3F1YXJlSWQ7XG4gIHBpZWNlOiBQaWVjZSB8IG51bGw7XG4gIGlzSGlnaGxpZ2h0ZWQ/OiBib29sZWFuO1xuICBpc1ZhbGlkTW92ZT86IGJvb2xlYW47XG4gIGlzQ2hlY2s/OiBib29sZWFuO1xuICBpc1NlbGVjdGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgQm9hcmRTdGF0ZSA9IFNxdWFyZVN0YXRlW11bXTsgLy8gOHg4IGdyaWRcblxuZXhwb3J0IGludGVyZmFjZSBNb3ZlIHtcbiAgZnJvbTogU3F1YXJlSWQ7XG4gIHRvOiBTcXVhcmVJZDtcbiAgcHJvbW90aW9uPzogUGllY2VUeXBlOyAvLyBGb3IgcGF3biBwcm9tb3Rpb25cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXN0bGluZ0F2YWlsYWJpbGl0eSB7XG4gIHdoaXRlS2luZ1NpZGU6IGJvb2xlYW47XG4gIHdoaXRlUXVlZW5TaWRlOiBib29sZWFuO1xuICBibGFja0tpbmdTaWRlOiBib29sZWFuO1xuICBibGFja1F1ZWVuU2lkZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHYW1lU3RhdGUge1xuICBib2FyZFN0YXRlOiBCb2FyZFN0YXRlO1xuICBjdXJyZW50UGxheWVyOiBQaWVjZUNvbG9yO1xuICBjYXN0bGluZ0F2YWlsYWJpbGl0eTogQ2FzdGxpbmdBdmFpbGFiaWxpdHk7XG4gIGVuUGFzc2FudFRhcmdldDogU3F1YXJlSWQgfCBudWxsO1xuICBoYWxmTW92ZUNsb2NrOiBudW1iZXI7IC8vIEZvciA1MC1tb3ZlIHJ1bGVcbiAgZnVsbE1vdmVOdW1iZXI6IG51bWJlcjtcbiAgc2VsZWN0ZWRTcXVhcmU6IFNxdWFyZUlkIHwgbnVsbDtcbiAgdmFsaWRNb3ZlczogU3F1YXJlSWRbXTtcbiAgaXNDaGVjazogYm9vbGVhbjtcbiAgaXNDaGVja21hdGU6IGJvb2xlYW47XG4gIGlzU3RhbGVtYXRlOiBib29sZWFuO1xuICBpc0RyYXc6IGJvb2xlYW47IC8vIENvdWxkIGJlIGR1ZSB0byA1MC1tb3ZlLCB0aHJlZWZvbGQgcmVwZXRpdGlvbiwgaW5zdWZmaWNpZW50IG1hdGVyaWFsXG4gIHdpbm5lcjogUGllY2VDb2xvciB8IG51bGw7XG4gIHByb21vdGluZ1Bhd246IHsgZnJvbTogU3F1YXJlSWQsIHRvOiBTcXVhcmVJZCB9IHwgbnVsbDtcbiAgZ2FtZVN0YXR1c01lc3NhZ2U6IHN0cmluZztcbiAgbW92ZUhpc3Rvcnk6IE1vdmVbXTsgLy8gRm9yIEZFTiBoaXN0b3J5IGFuZCBwb3RlbnRpYWwgZnV0dXJlIGZlYXR1cmVzXG59XG5cbmV4cG9ydCB0eXBlIERpZmZpY3VsdHkgPSAxIHwgMiB8IDMgfCA0O1xuICAgICJdLCJuYW1lcyI6WyJQaWVjZVR5cGUiLCJQaWVjZUNvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./types.ts\n"));

/***/ }),

/***/ "./utils/boardUtils.ts":
/*!*****************************!*\
  !*** ./utils/boardUtils.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInitialBoard: function() { return /* binding */ createInitialBoard; },\n/* harmony export */   getSquareCoordinates: function() { return /* binding */ getSquareCoordinates; },\n/* harmony export */   getSquareId: function() { return /* binding */ getSquareId; }\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/types */ \"./types.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/constants */ \"./constants.ts\");\n\n\nconst getSquareCoordinates = (squareId)=>{\n    if (squareId.length !== 2) return null;\n    const colChar = squareId[0];\n    const rowChar = squareId[1];\n    const col = _constants__WEBPACK_IMPORTED_MODULE_1__.COLUMN_NAMES.indexOf(colChar);\n    const row = _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS - parseInt(rowChar, 10);\n    if (col === -1 || isNaN(row) || row < 0 || row >= _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS) return null;\n    return {\n        row,\n        col\n    };\n};\nconst getSquareId = (row, col)=>{\n    if (row < 0 || row >= _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS || col < 0 || col >= _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS) return null;\n    const colChar = _constants__WEBPACK_IMPORTED_MODULE_1__.COLUMN_NAMES[col];\n    const rowChar = (_constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS - row).toString();\n    return \"\".concat(colChar).concat(rowChar);\n};\nconst createInitialBoard = ()=>{\n    const board = Array(_constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_ROWS).fill(null).map(()=>Array(_constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS).fill(null));\n    const placePiece = (squareId, piece)=>{\n        const coords = getSquareCoordinates(squareId);\n        if (coords) {\n            board[coords.row][coords.col] = piece;\n        }\n    };\n    for(let i = 0; i < _constants__WEBPACK_IMPORTED_MODULE_1__.BOARD_COLS; i++){\n        placePiece(getSquareId(1, i), {\n            type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN,\n            color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK,\n            hasMoved: false\n        });\n        placePiece(getSquareId(6, i), {\n            type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.PAWN,\n            color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE,\n            hasMoved: false\n        });\n    }\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK].queenSide, {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK,\n        hasMoved: false\n    });\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK].kingSide, {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK,\n        hasMoved: false\n    });\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE].queenSide, {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE,\n        hasMoved: false\n    });\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_ROOK_POSITIONS[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE].kingSide, {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.ROOK,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE,\n        hasMoved: false\n    });\n    placePiece(\"b8\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK\n    });\n    placePiece(\"g8\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK\n    });\n    placePiece(\"b1\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE\n    });\n    placePiece(\"g1\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KNIGHT,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE\n    });\n    placePiece(\"c8\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK\n    });\n    placePiece(\"f8\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK\n    });\n    placePiece(\"c1\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE\n    });\n    placePiece(\"f1\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.BISHOP,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE\n    });\n    placePiece(\"d8\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK\n    });\n    placePiece(\"d1\", {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.QUEEN,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE\n    });\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_KING_POSITION[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK], {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.BLACK,\n        hasMoved: false\n    });\n    placePiece(_constants__WEBPACK_IMPORTED_MODULE_1__.INITIAL_KING_POSITION[_types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE], {\n        type: _types__WEBPACK_IMPORTED_MODULE_0__.PieceType.KING,\n        color: _types__WEBPACK_IMPORTED_MODULE_0__.PieceColor.WHITE,\n        hasMoved: false\n    });\n    return board;\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qiw2Q0FBU0EsQ0FBQ3dDLElBQUk7UUFBRVYsT0FBTzdCLDhDQUFVQSxDQUFDOEIsS0FBSztRQUFFQyxVQUFVO0lBQU07SUFDckhSLFdBQVdsQiw2REFBcUIsQ0FBQ0wsOENBQVVBLENBQUNnQyxLQUFLLENBQUMsRUFBRTtRQUFFTCxNQUFNNUIsNkNBQVNBLENBQUN3QyxJQUFJO1FBQUVWLE9BQU83Qiw4Q0FBVUEsQ0FBQ2dDLEtBQUs7UUFBRUQsVUFBVTtJQUFNO0lBRXJILE9BQU9aO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi91dGlscy9ib2FyZFV0aWxzLnRzP2Y5ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3F1YXJlSWQsIFBpZWNlLCBQaWVjZVR5cGUsIFBpZWNlQ29sb3IgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IEJPQVJEX1JPV1MsIEJPQVJEX0NPTFMsIENPTFVNTl9OQU1FUywgSU5JVElBTF9ST09LX1BPU0lUSU9OUywgSU5JVElBTF9LSU5HX1BPU0lUSU9OIH0gZnJvbSAnQC9jb25zdGFudHMnO1xuXG5leHBvcnQgY29uc3QgZ2V0U3F1YXJlQ29vcmRpbmF0ZXMgPSAoc3F1YXJlSWQ6IFNxdWFyZUlkKTogeyByb3c6IG51bWJlciwgY29sOiBudW1iZXIgfSB8IG51bGwgPT4ge1xuICBpZiAoc3F1YXJlSWQubGVuZ3RoICE9PSAyKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgY29sQ2hhciA9IHNxdWFyZUlkWzBdO1xuICBjb25zdCByb3dDaGFyID0gc3F1YXJlSWRbMV07XG4gIGNvbnN0IGNvbCA9IENPTFVNTl9OQU1FUy5pbmRleE9mKGNvbENoYXIpO1xuICBjb25zdCByb3cgPSBCT0FSRF9ST1dTIC0gcGFyc2VJbnQocm93Q2hhciwgMTApO1xuICBpZiAoY29sID09PSAtMSB8fCBpc05hTihyb3cpIHx8IHJvdyA8IDAgfHwgcm93ID49IEJPQVJEX1JPV1MpIHJldHVybiBudWxsO1xuICByZXR1cm4geyByb3csIGNvbCB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNxdWFyZUlkID0gKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcik6IFNxdWFyZUlkIHwgbnVsbCA9PiB7XG4gIGlmIChyb3cgPCAwIHx8IHJvdyA+PSBCT0FSRF9ST1dTIHx8IGNvbCA8IDAgfHwgY29sID49IEJPQVJEX0NPTFMpIHJldHVybiBudWxsO1xuICBjb25zdCBjb2xDaGFyID0gQ09MVU1OX05BTUVTW2NvbF07XG4gIGNvbnN0IHJvd0NoYXIgPSAoQk9BUkRfUk9XUyAtIHJvdykudG9TdHJpbmcoKTtcbiAgcmV0dXJuIGAke2NvbENoYXJ9JHtyb3dDaGFyfWA7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlSW5pdGlhbEJvYXJkID0gKCk6IChQaWVjZSB8IG51bGwpW11bXSA9PiB7XG4gIGNvbnN0IGJvYXJkOiAoUGllY2UgfCBudWxsKVtdW10gPSBBcnJheShCT0FSRF9ST1dTKS5maWxsKG51bGwpLm1hcCgoKSA9PiBBcnJheShCT0FSRF9DT0xTKS5maWxsKG51bGwpKTtcblxuICBjb25zdCBwbGFjZVBpZWNlID0gKHNxdWFyZUlkOiBTcXVhcmVJZCwgcGllY2U6IFBpZWNlKSA9PiB7XG4gICAgY29uc3QgY29vcmRzID0gZ2V0U3F1YXJlQ29vcmRpbmF0ZXMoc3F1YXJlSWQpO1xuICAgIGlmIChjb29yZHMpIHtcbiAgICAgIGJvYXJkW2Nvb3Jkcy5yb3ddW2Nvb3Jkcy5jb2xdID0gcGllY2U7XG4gICAgfVxuICB9O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgQk9BUkRfQ09MUzsgaSsrKSB7XG4gICAgcGxhY2VQaWVjZShnZXRTcXVhcmVJZCgxLCBpKSEsIHsgdHlwZTogUGllY2VUeXBlLlBBV04sIGNvbG9yOiBQaWVjZUNvbG9yLkJMQUNLLCBoYXNNb3ZlZDogZmFsc2UgfSk7XG4gICAgcGxhY2VQaWVjZShnZXRTcXVhcmVJZCg2LCBpKSEsIHsgdHlwZTogUGllY2VUeXBlLlBBV04sIGNvbG9yOiBQaWVjZUNvbG9yLldISVRFLCBoYXNNb3ZlZDogZmFsc2UgfSk7XG4gIH1cblxuICBwbGFjZVBpZWNlKElOSVRJQUxfUk9PS19QT1NJVElPTlNbUGllY2VDb2xvci5CTEFDS10ucXVlZW5TaWRlLCB7IHR5cGU6IFBpZWNlVHlwZS5ST09LLCBjb2xvcjogUGllY2VDb2xvci5CTEFDSywgaGFzTW92ZWQ6IGZhbHNlIH0pO1xuICBwbGFjZVBpZWNlKElOSVRJQUxfUk9PS19QT1NJVElPTlNbUGllY2VDb2xvci5CTEFDS10ua2luZ1NpZGUsIHsgdHlwZTogUGllY2VUeXBlLlJPT0ssIGNvbG9yOiBQaWVjZUNvbG9yLkJMQUNLLCBoYXNNb3ZlZDogZmFsc2UgfSk7XG4gIHBsYWNlUGllY2UoSU5JVElBTF9ST09LX1BPU0lUSU9OU1tQaWVjZUNvbG9yLldISVRFXS5xdWVlblNpZGUsIHsgdHlwZTogUGllY2VUeXBlLlJPT0ssIGNvbG9yOiBQaWVjZUNvbG9yLldISVRFLCBoYXNNb3ZlZDogZmFsc2UgfSk7XG4gIHBsYWNlUGllY2UoSU5JVElBTF9ST09LX1BPU0lUSU9OU1tQaWVjZUNvbG9yLldISVRFXS5raW5nU2lkZSwgeyB0eXBlOiBQaWVjZVR5cGUuUk9PSywgY29sb3I6IFBpZWNlQ29sb3IuV0hJVEUsIGhhc01vdmVkOiBmYWxzZSB9KTtcbiAgXG4gIHBsYWNlUGllY2UoJ2I4JywgeyB0eXBlOiBQaWVjZVR5cGUuS05JR0hULCBjb2xvcjogUGllY2VDb2xvci5CTEFDSyB9KTtcbiAgcGxhY2VQaWVjZSgnZzgnLCB7IHR5cGU6IFBpZWNlVHlwZS5LTklHSFQsIGNvbG9yOiBQaWVjZUNvbG9yLkJMQUNLIH0pO1xuICBwbGFjZVBpZWNlKCdiMScsIHsgdHlwZTogUGllY2VUeXBlLktOSUdIVCwgY29sb3I6IFBpZWNlQ29sb3IuV0hJVEUgfSk7XG4gIHBsYWNlUGllY2UoJ2cxJywgeyB0eXBlOiBQaWVjZVR5cGUuS05JR0hULCBjb2xvcjogUGllY2VDb2xvci5XSElURSB9KTtcblxuICBwbGFjZVBpZWNlKCdjOCcsIHsgdHlwZTogUGllY2VUeXBlLkJJU0hPUCwgY29sb3I6IFBpZWNlQ29sb3IuQkxBQ0sgfSk7XG4gIHBsYWNlUGllY2UoJ2Y4JywgeyB0eXBlOiBQaWVjZVR5cGUuQklTSE9QLCBjb2xvcjogUGllY2VDb2xvci5CTEFDSyB9KTtcbiAgcGxhY2VQaWVjZSgnYzEnLCB7IHR5cGU6IFBpZWNlVHlwZS5CSVNIT1AsIGNvbG9yOiBQaWVjZUNvbG9yLldISVRFIH0pO1xuICBwbGFjZVBpZWNlKCdmMScsIHsgdHlwZTogUGllY2VUeXBlLkJJU0hPUCwgY29sb3I6IFBpZWNlQ29sb3IuV0hJVEUgfSk7XG5cbiAgcGxhY2VQaWVjZSgnZDgnLCB7IHR5cGU6IFBpZWNlVHlwZS5RVUVFTiwgY29sb3I6IFBpZWNlQ29sb3IuQkxBQ0sgfSk7XG4gIHBsYWNlUGllY2UoJ2QxJywgeyB0eXBlOiBQaWVjZVR5cGUuUVVFRU4sIGNvbG9yOiBQaWVjZUNvbG9yLldISVRFIH0pO1xuICBcbiAgcGxhY2VQaWVjZShJTklUSUFMX0tJTkdfUE9TSVRJT05bUGllY2VDb2xvci5CTEFDS10sIHsgdHlwZTogUGllY2VUeXBlLktJTkcsIGNvbG9yOiBQaWVjZUNvbG9yLkJMQUNLLCBoYXNNb3ZlZDogZmFsc2UgfSk7XG4gIHBsYWNlUGllY2UoSU5JVElBTF9LSU5HX1BPU0lUSU9OW1BpZWNlQ29sb3IuV0hJVEVdLCB7IHR5cGU6IFBpZWNlVHlwZS5LSU5HLCBjb2xvcjogUGllY2VDb2xvci5XSElURSwgaGFzTW92ZWQ6IGZhbHNlIH0pO1xuXG4gIHJldHVybiBib2FyZDsgXG59O1xuIl0sIm5hbWVzIjpbIlBpZWNlVHlwZSIsIlBpZWNlQ29sb3IiLCJCT0FSRF9ST1dTIiwiQk9BUkRfQ09MUyIsIkNPTFVNTl9OQU1FUyIsIklOSVRJQUxfUk9PS19QT1NJVElPTlMiLCJJTklUSUFMX0tJTkdfUE9TSVRJT04iLCJnZXRTcXVhcmVDb29yZGluYXRlcyIsInNxdWFyZUlkIiwibGVuZ3RoIiwiY29sQ2hhciIsInJvd0NoYXIiLCJjb2wiLCJpbmRleE9mIiwicm93IiwicGFyc2VJbnQiLCJpc05hTiIsImdldFNxdWFyZUlkIiwidG9TdHJpbmciLCJjcmVhdGVJbml0aWFsQm9hcmQiLCJib2FyZCIsIkFycmF5IiwiZmlsbCIsIm1hcCIsInBsYWNlUGllY2UiLCJwaWVjZSIsImNvb3JkcyIsImkiLCJ0eXBlIiwiUEFXTiIsImNvbG9yIiwiQkxBQ0siLCJoYXNNb3ZlZCIsIldISVRFIiwicXVlZW5TaWRlIiwiUk9PSyIsImtpbmdTaWRlIiwiS05JR0hUIiwiQklTSE9QIiwiUVVFRU4iLCJLSU5HIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/boardUtils.ts\n"));

/***/ }),

/***/ "./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.js":
/*!**************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.js ***!
  \**************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("module.exports = __webpack_require__(/*! ./dist/client/link */ \"./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9saW5rLmpzIiwibWFwcGluZ3MiOiJBQUFBLG9MQUE4QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9saW5rLmpzPzJiYmIiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Rpc3QvY2xpZW50L2xpbmsnKVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.js\n"));

/***/ }),

/***/ "../../../Library/pnpm/global/5/.pnpm/process@0.11.10/node_modules/process/browser.js":
/*!********************************************************************************************!*\
  !*** ../../../Library/pnpm/global/5/.pnpm/process@0.11.10/node_modules/process/browser.js ***!
  \********************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vTGlicmFyeS9wbnBtL2dsb2JhbC81Ly5wbnBtL3Byb2Nlc3NAMC4xMS4xMC9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isc0JBQXNCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi9MaWJyYXJ5L3BucG0vZ2xvYmFsLzUvLnBucG0vcHJvY2Vzc0AwLjExLjEwL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanM/Y2U4YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../Library/pnpm/global/5/.pnpm/process@0.11.10/node_modules/process/browser.js\n"));

/***/ }),

/***/ "./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs ***!
  \***********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BlockReason: function() { return /* binding */ BlockReason; },\n/* harmony export */   ChatSession: function() { return /* binding */ ChatSession; },\n/* harmony export */   DynamicRetrievalMode: function() { return /* binding */ DynamicRetrievalMode; },\n/* harmony export */   ExecutableCodeLanguage: function() { return /* binding */ ExecutableCodeLanguage; },\n/* harmony export */   FinishReason: function() { return /* binding */ FinishReason; },\n/* harmony export */   FunctionCallingMode: function() { return /* binding */ FunctionCallingMode; },\n/* harmony export */   GenerativeModel: function() { return /* binding */ GenerativeModel; },\n/* harmony export */   GoogleGenerativeAI: function() { return /* binding */ GoogleGenerativeAI; },\n/* harmony export */   GoogleGenerativeAIAbortError: function() { return /* binding */ GoogleGenerativeAIAbortError; },\n/* harmony export */   GoogleGenerativeAIError: function() { return /* binding */ GoogleGenerativeAIError; },\n/* harmony export */   GoogleGenerativeAIFetchError: function() { return /* binding */ GoogleGenerativeAIFetchError; },\n/* harmony export */   GoogleGenerativeAIRequestInputError: function() { return /* binding */ GoogleGenerativeAIRequestInputError; },\n/* harmony export */   GoogleGenerativeAIResponseError: function() { return /* binding */ GoogleGenerativeAIResponseError; },\n/* harmony export */   HarmBlockThreshold: function() { return /* binding */ HarmBlockThreshold; },\n/* harmony export */   HarmCategory: function() { return /* binding */ HarmCategory; },\n/* harmony export */   HarmProbability: function() { return /* binding */ HarmProbability; },\n/* harmony export */   Outcome: function() { return /* binding */ Outcome; },\n/* harmony export */   POSSIBLE_ROLES: function() { return /* binding */ POSSIBLE_ROLES; },\n/* harmony export */   SchemaType: function() { return /* binding */ SchemaType; },\n/* harmony export */   TaskType: function() { return /* binding */ TaskType; }\n/* harmony export */ });\n/**\n * Contains the list of OpenAPI data types\n * as defined by https://swagger.io/docs/specification/data-models/data-types/\n * @public\n */\nvar SchemaType;\n(function (SchemaType) {\n    /** String type. */\n    SchemaType[\"STRING\"] = \"string\";\n    /** Number type. */\n    SchemaType[\"NUMBER\"] = \"number\";\n    /** Integer type. */\n    SchemaType[\"INTEGER\"] = \"integer\";\n    /** Boolean type. */\n    SchemaType[\"BOOLEAN\"] = \"boolean\";\n    /** Array type. */\n    SchemaType[\"ARRAY\"] = \"array\";\n    /** Object type. */\n    SchemaType[\"OBJECT\"] = \"object\";\n})(SchemaType || (SchemaType = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @public\n */\nvar ExecutableCodeLanguage;\n(function (ExecutableCodeLanguage) {\n    ExecutableCodeLanguage[\"LANGUAGE_UNSPECIFIED\"] = \"language_unspecified\";\n    ExecutableCodeLanguage[\"PYTHON\"] = \"python\";\n})(ExecutableCodeLanguage || (ExecutableCodeLanguage = {}));\n/**\n * Possible outcomes of code execution.\n * @public\n */\nvar Outcome;\n(function (Outcome) {\n    /**\n     * Unspecified status. This value should not be used.\n     */\n    Outcome[\"OUTCOME_UNSPECIFIED\"] = \"outcome_unspecified\";\n    /**\n     * Code execution completed successfully.\n     */\n    Outcome[\"OUTCOME_OK\"] = \"outcome_ok\";\n    /**\n     * Code execution finished but with a failure. `stderr` should contain the\n     * reason.\n     */\n    Outcome[\"OUTCOME_FAILED\"] = \"outcome_failed\";\n    /**\n     * Code execution ran for too long, and was cancelled. There may or may not\n     * be a partial output present.\n     */\n    Outcome[\"OUTCOME_DEADLINE_EXCEEDED\"] = \"outcome_deadline_exceeded\";\n})(Outcome || (Outcome = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Possible roles.\n * @public\n */\nconst POSSIBLE_ROLES = [\"user\", \"model\", \"function\", \"system\"];\n/**\n * Harm categories that would cause prompts or candidates to be blocked.\n * @public\n */\nvar HarmCategory;\n(function (HarmCategory) {\n    HarmCategory[\"HARM_CATEGORY_UNSPECIFIED\"] = \"HARM_CATEGORY_UNSPECIFIED\";\n    HarmCategory[\"HARM_CATEGORY_HATE_SPEECH\"] = \"HARM_CATEGORY_HATE_SPEECH\";\n    HarmCategory[\"HARM_CATEGORY_SEXUALLY_EXPLICIT\"] = \"HARM_CATEGORY_SEXUALLY_EXPLICIT\";\n    HarmCategory[\"HARM_CATEGORY_HARASSMENT\"] = \"HARM_CATEGORY_HARASSMENT\";\n    HarmCategory[\"HARM_CATEGORY_DANGEROUS_CONTENT\"] = \"HARM_CATEGORY_DANGEROUS_CONTENT\";\n    HarmCategory[\"HARM_CATEGORY_CIVIC_INTEGRITY\"] = \"HARM_CATEGORY_CIVIC_INTEGRITY\";\n})(HarmCategory || (HarmCategory = {}));\n/**\n * Threshold above which a prompt or candidate will be blocked.\n * @public\n */\nvar HarmBlockThreshold;\n(function (HarmBlockThreshold) {\n    /** Threshold is unspecified. */\n    HarmBlockThreshold[\"HARM_BLOCK_THRESHOLD_UNSPECIFIED\"] = \"HARM_BLOCK_THRESHOLD_UNSPECIFIED\";\n    /** Content with NEGLIGIBLE will be allowed. */\n    HarmBlockThreshold[\"BLOCK_LOW_AND_ABOVE\"] = \"BLOCK_LOW_AND_ABOVE\";\n    /** Content with NEGLIGIBLE and LOW will be allowed. */\n    HarmBlockThreshold[\"BLOCK_MEDIUM_AND_ABOVE\"] = \"BLOCK_MEDIUM_AND_ABOVE\";\n    /** Content with NEGLIGIBLE, LOW, and MEDIUM will be allowed. */\n    HarmBlockThreshold[\"BLOCK_ONLY_HIGH\"] = \"BLOCK_ONLY_HIGH\";\n    /** All content will be allowed. */\n    HarmBlockThreshold[\"BLOCK_NONE\"] = \"BLOCK_NONE\";\n})(HarmBlockThreshold || (HarmBlockThreshold = {}));\n/**\n * Probability that a prompt or candidate matches a harm category.\n * @public\n */\nvar HarmProbability;\n(function (HarmProbability) {\n    /** Probability is unspecified. */\n    HarmProbability[\"HARM_PROBABILITY_UNSPECIFIED\"] = \"HARM_PROBABILITY_UNSPECIFIED\";\n    /** Content has a negligible chance of being unsafe. */\n    HarmProbability[\"NEGLIGIBLE\"] = \"NEGLIGIBLE\";\n    /** Content has a low chance of being unsafe. */\n    HarmProbability[\"LOW\"] = \"LOW\";\n    /** Content has a medium chance of being unsafe. */\n    HarmProbability[\"MEDIUM\"] = \"MEDIUM\";\n    /** Content has a high chance of being unsafe. */\n    HarmProbability[\"HIGH\"] = \"HIGH\";\n})(HarmProbability || (HarmProbability = {}));\n/**\n * Reason that a prompt was blocked.\n * @public\n */\nvar BlockReason;\n(function (BlockReason) {\n    // A blocked reason was not specified.\n    BlockReason[\"BLOCKED_REASON_UNSPECIFIED\"] = \"BLOCKED_REASON_UNSPECIFIED\";\n    // Content was blocked by safety settings.\n    BlockReason[\"SAFETY\"] = \"SAFETY\";\n    // Content was blocked, but the reason is uncategorized.\n    BlockReason[\"OTHER\"] = \"OTHER\";\n})(BlockReason || (BlockReason = {}));\n/**\n * Reason that a candidate finished.\n * @public\n */\nvar FinishReason;\n(function (FinishReason) {\n    // Default value. This value is unused.\n    FinishReason[\"FINISH_REASON_UNSPECIFIED\"] = \"FINISH_REASON_UNSPECIFIED\";\n    // Natural stop point of the model or provided stop sequence.\n    FinishReason[\"STOP\"] = \"STOP\";\n    // The maximum number of tokens as specified in the request was reached.\n    FinishReason[\"MAX_TOKENS\"] = \"MAX_TOKENS\";\n    // The candidate content was flagged for safety reasons.\n    FinishReason[\"SAFETY\"] = \"SAFETY\";\n    // The candidate content was flagged for recitation reasons.\n    FinishReason[\"RECITATION\"] = \"RECITATION\";\n    // The candidate content was flagged for using an unsupported language.\n    FinishReason[\"LANGUAGE\"] = \"LANGUAGE\";\n    // Token generation stopped because the content contains forbidden terms.\n    FinishReason[\"BLOCKLIST\"] = \"BLOCKLIST\";\n    // Token generation stopped for potentially containing prohibited content.\n    FinishReason[\"PROHIBITED_CONTENT\"] = \"PROHIBITED_CONTENT\";\n    // Token generation stopped because the content potentially contains Sensitive Personally Identifiable Information (SPII).\n    FinishReason[\"SPII\"] = \"SPII\";\n    // The function call generated by the model is invalid.\n    FinishReason[\"MALFORMED_FUNCTION_CALL\"] = \"MALFORMED_FUNCTION_CALL\";\n    // Unknown reason.\n    FinishReason[\"OTHER\"] = \"OTHER\";\n})(FinishReason || (FinishReason = {}));\n/**\n * Task type for embedding content.\n * @public\n */\nvar TaskType;\n(function (TaskType) {\n    TaskType[\"TASK_TYPE_UNSPECIFIED\"] = \"TASK_TYPE_UNSPECIFIED\";\n    TaskType[\"RETRIEVAL_QUERY\"] = \"RETRIEVAL_QUERY\";\n    TaskType[\"RETRIEVAL_DOCUMENT\"] = \"RETRIEVAL_DOCUMENT\";\n    TaskType[\"SEMANTIC_SIMILARITY\"] = \"SEMANTIC_SIMILARITY\";\n    TaskType[\"CLASSIFICATION\"] = \"CLASSIFICATION\";\n    TaskType[\"CLUSTERING\"] = \"CLUSTERING\";\n})(TaskType || (TaskType = {}));\n/**\n * @public\n */\nvar FunctionCallingMode;\n(function (FunctionCallingMode) {\n    // Unspecified function calling mode. This value should not be used.\n    FunctionCallingMode[\"MODE_UNSPECIFIED\"] = \"MODE_UNSPECIFIED\";\n    // Default model behavior, model decides to predict either a function call\n    // or a natural language repspose.\n    FunctionCallingMode[\"AUTO\"] = \"AUTO\";\n    // Model is constrained to always predicting a function call only.\n    // If \"allowed_function_names\" are set, the predicted function call will be\n    // limited to any one of \"allowed_function_names\", else the predicted\n    // function call will be any one of the provided \"function_declarations\".\n    FunctionCallingMode[\"ANY\"] = \"ANY\";\n    // Model will not predict any function call. Model behavior is same as when\n    // not passing any function declarations.\n    FunctionCallingMode[\"NONE\"] = \"NONE\";\n})(FunctionCallingMode || (FunctionCallingMode = {}));\n/**\n * The mode of the predictor to be used in dynamic retrieval.\n * @public\n */\nvar DynamicRetrievalMode;\n(function (DynamicRetrievalMode) {\n    // Unspecified function calling mode. This value should not be used.\n    DynamicRetrievalMode[\"MODE_UNSPECIFIED\"] = \"MODE_UNSPECIFIED\";\n    // Run retrieval only when system decides it is necessary.\n    DynamicRetrievalMode[\"MODE_DYNAMIC\"] = \"MODE_DYNAMIC\";\n})(DynamicRetrievalMode || (DynamicRetrievalMode = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Basic error type for this SDK.\n * @public\n */\nclass GoogleGenerativeAIError extends Error {\n    constructor(message) {\n        super(`[GoogleGenerativeAI Error]: ${message}`);\n    }\n}\n/**\n * Errors in the contents of a response from the model. This includes parsing\n * errors, or responses including a safety block reason.\n * @public\n */\nclass GoogleGenerativeAIResponseError extends GoogleGenerativeAIError {\n    constructor(message, response) {\n        super(message);\n        this.response = response;\n    }\n}\n/**\n * Error class covering HTTP errors when calling the server. Includes HTTP\n * status, statusText, and optional details, if provided in the server response.\n * @public\n */\nclass GoogleGenerativeAIFetchError extends GoogleGenerativeAIError {\n    constructor(message, status, statusText, errorDetails) {\n        super(message);\n        this.status = status;\n        this.statusText = statusText;\n        this.errorDetails = errorDetails;\n    }\n}\n/**\n * Errors in the contents of a request originating from user input.\n * @public\n */\nclass GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError {\n}\n/**\n * Error thrown when a request is aborted, either due to a timeout or\n * intentional cancellation by the user.\n * @public\n */\nclass GoogleGenerativeAIAbortError extends GoogleGenerativeAIError {\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_BASE_URL = \"https://generativelanguage.googleapis.com\";\nconst DEFAULT_API_VERSION = \"v1beta\";\n/**\n * We can't `require` package.json if this runs on web. We will use rollup to\n * swap in the version number here at build time.\n */\nconst PACKAGE_VERSION = \"0.24.1\";\nconst PACKAGE_LOG_HEADER = \"genai-js\";\nvar Task;\n(function (Task) {\n    Task[\"GENERATE_CONTENT\"] = \"generateContent\";\n    Task[\"STREAM_GENERATE_CONTENT\"] = \"streamGenerateContent\";\n    Task[\"COUNT_TOKENS\"] = \"countTokens\";\n    Task[\"EMBED_CONTENT\"] = \"embedContent\";\n    Task[\"BATCH_EMBED_CONTENTS\"] = \"batchEmbedContents\";\n})(Task || (Task = {}));\nclass RequestUrl {\n    constructor(model, task, apiKey, stream, requestOptions) {\n        this.model = model;\n        this.task = task;\n        this.apiKey = apiKey;\n        this.stream = stream;\n        this.requestOptions = requestOptions;\n    }\n    toString() {\n        var _a, _b;\n        const apiVersion = ((_a = this.requestOptions) === null || _a === void 0 ? void 0 : _a.apiVersion) || DEFAULT_API_VERSION;\n        const baseUrl = ((_b = this.requestOptions) === null || _b === void 0 ? void 0 : _b.baseUrl) || DEFAULT_BASE_URL;\n        let url = `${baseUrl}/${apiVersion}/${this.model}:${this.task}`;\n        if (this.stream) {\n            url += \"?alt=sse\";\n        }\n        return url;\n    }\n}\n/**\n * Simple, but may become more complex if we add more versions to log.\n */\nfunction getClientHeaders(requestOptions) {\n    const clientHeaders = [];\n    if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.apiClient) {\n        clientHeaders.push(requestOptions.apiClient);\n    }\n    clientHeaders.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`);\n    return clientHeaders.join(\" \");\n}\nasync function getHeaders(url) {\n    var _a;\n    const headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    headers.append(\"x-goog-api-client\", getClientHeaders(url.requestOptions));\n    headers.append(\"x-goog-api-key\", url.apiKey);\n    let customHeaders = (_a = url.requestOptions) === null || _a === void 0 ? void 0 : _a.customHeaders;\n    if (customHeaders) {\n        if (!(customHeaders instanceof Headers)) {\n            try {\n                customHeaders = new Headers(customHeaders);\n            }\n            catch (e) {\n                throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(customHeaders)} to Headers: ${e.message}`);\n            }\n        }\n        for (const [headerName, headerValue] of customHeaders.entries()) {\n            if (headerName === \"x-goog-api-key\") {\n                throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${headerName}`);\n            }\n            else if (headerName === \"x-goog-api-client\") {\n                throw new GoogleGenerativeAIRequestInputError(`Header name ${headerName} can only be set using the apiClient field`);\n            }\n            headers.append(headerName, headerValue);\n        }\n    }\n    return headers;\n}\nasync function constructModelRequest(model, task, apiKey, stream, body, requestOptions) {\n    const url = new RequestUrl(model, task, apiKey, stream, requestOptions);\n    return {\n        url: url.toString(),\n        fetchOptions: Object.assign(Object.assign({}, buildFetchOptions(requestOptions)), { method: \"POST\", headers: await getHeaders(url), body }),\n    };\n}\nasync function makeModelRequest(model, task, apiKey, stream, body, requestOptions = {}, \n// Allows this to be stubbed for tests\nfetchFn = fetch) {\n    const { url, fetchOptions } = await constructModelRequest(model, task, apiKey, stream, body, requestOptions);\n    return makeRequest(url, fetchOptions, fetchFn);\n}\nasync function makeRequest(url, fetchOptions, fetchFn = fetch) {\n    let response;\n    try {\n        response = await fetchFn(url, fetchOptions);\n    }\n    catch (e) {\n        handleResponseError(e, url);\n    }\n    if (!response.ok) {\n        await handleResponseNotOk(response, url);\n    }\n    return response;\n}\nfunction handleResponseError(e, url) {\n    let err = e;\n    if (err.name === \"AbortError\") {\n        err = new GoogleGenerativeAIAbortError(`Request aborted when fetching ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n    }\n    else if (!(e instanceof GoogleGenerativeAIFetchError ||\n        e instanceof GoogleGenerativeAIRequestInputError)) {\n        err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n    }\n    throw err;\n}\nasync function handleResponseNotOk(response, url) {\n    let message = \"\";\n    let errorDetails;\n    try {\n        const json = await response.json();\n        message = json.error.message;\n        if (json.error.details) {\n            message += ` ${JSON.stringify(json.error.details)}`;\n            errorDetails = json.error.details;\n        }\n    }\n    catch (e) {\n        // ignored\n    }\n    throw new GoogleGenerativeAIFetchError(`Error fetching from ${url.toString()}: [${response.status} ${response.statusText}] ${message}`, response.status, response.statusText, errorDetails);\n}\n/**\n * Generates the request options to be passed to the fetch API.\n * @param requestOptions - The user-defined request options.\n * @returns The generated request options.\n */\nfunction buildFetchOptions(requestOptions) {\n    const fetchOptions = {};\n    if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) !== undefined || (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {\n        const controller = new AbortController();\n        if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {\n            setTimeout(() => controller.abort(), requestOptions.timeout);\n        }\n        if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) {\n            requestOptions.signal.addEventListener(\"abort\", () => {\n                controller.abort();\n            });\n        }\n        fetchOptions.signal = controller.signal;\n    }\n    return fetchOptions;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Adds convenience helper methods to a response object, including stream\n * chunks (as long as each chunk is a complete GenerateContentResponse JSON).\n */\nfunction addHelpers(response) {\n    response.text = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning text from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getText(response);\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return \"\";\n    };\n    /**\n     * TODO: remove at next major version\n     */\n    response.functionCall = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning function calls from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            console.warn(`response.functionCall() is deprecated. ` +\n                `Use response.functionCalls() instead.`);\n            return getFunctionCalls(response)[0];\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return undefined;\n    };\n    response.functionCalls = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning function calls from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getFunctionCalls(response);\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return undefined;\n    };\n    return response;\n}\n/**\n * Returns all text found in all parts of first candidate.\n */\nfunction getText(response) {\n    var _a, _b, _c, _d;\n    const textStrings = [];\n    if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {\n        for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {\n            if (part.text) {\n                textStrings.push(part.text);\n            }\n            if (part.executableCode) {\n                textStrings.push(\"\\n```\" +\n                    part.executableCode.language +\n                    \"\\n\" +\n                    part.executableCode.code +\n                    \"\\n```\\n\");\n            }\n            if (part.codeExecutionResult) {\n                textStrings.push(\"\\n```\\n\" + part.codeExecutionResult.output + \"\\n```\\n\");\n            }\n        }\n    }\n    if (textStrings.length > 0) {\n        return textStrings.join(\"\");\n    }\n    else {\n        return \"\";\n    }\n}\n/**\n * Returns functionCall of first candidate.\n */\nfunction getFunctionCalls(response) {\n    var _a, _b, _c, _d;\n    const functionCalls = [];\n    if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {\n        for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {\n            if (part.functionCall) {\n                functionCalls.push(part.functionCall);\n            }\n        }\n    }\n    if (functionCalls.length > 0) {\n        return functionCalls;\n    }\n    else {\n        return undefined;\n    }\n}\nconst badFinishReasons = [\n    FinishReason.RECITATION,\n    FinishReason.SAFETY,\n    FinishReason.LANGUAGE,\n];\nfunction hadBadFinishReason(candidate) {\n    return (!!candidate.finishReason &&\n        badFinishReasons.includes(candidate.finishReason));\n}\nfunction formatBlockErrorMessage(response) {\n    var _a, _b, _c;\n    let message = \"\";\n    if ((!response.candidates || response.candidates.length === 0) &&\n        response.promptFeedback) {\n        message += \"Response was blocked\";\n        if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {\n            message += ` due to ${response.promptFeedback.blockReason}`;\n        }\n        if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {\n            message += `: ${response.promptFeedback.blockReasonMessage}`;\n        }\n    }\n    else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {\n        const firstCandidate = response.candidates[0];\n        if (hadBadFinishReason(firstCandidate)) {\n            message += `Candidate was blocked due to ${firstCandidate.finishReason}`;\n            if (firstCandidate.finishMessage) {\n                message += `: ${firstCandidate.finishMessage}`;\n            }\n        }\n    }\n    return message;\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst responseLineRE = /^data\\: (.*)(?:\\n\\n|\\r\\r|\\r\\n\\r\\n)/;\n/**\n * Process a response.body stream from the backend and return an\n * iterator that provides one complete GenerateContentResponse at a time\n * and a promise that resolves with a single aggregated\n * GenerateContentResponse.\n *\n * @param response - Response from a fetch call\n */\nfunction processStream(response) {\n    const inputStream = response.body.pipeThrough(new TextDecoderStream(\"utf8\", { fatal: true }));\n    const responseStream = getResponseStream(inputStream);\n    const [stream1, stream2] = responseStream.tee();\n    return {\n        stream: generateResponseSequence(stream1),\n        response: getResponsePromise(stream2),\n    };\n}\nasync function getResponsePromise(stream) {\n    const allResponses = [];\n    const reader = stream.getReader();\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n            return addHelpers(aggregateResponses(allResponses));\n        }\n        allResponses.push(value);\n    }\n}\nfunction generateResponseSequence(stream) {\n    return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {\n        const reader = stream.getReader();\n        while (true) {\n            const { value, done } = yield __await(reader.read());\n            if (done) {\n                break;\n            }\n            yield yield __await(addHelpers(value));\n        }\n    });\n}\n/**\n * Reads a raw stream from the fetch response and join incomplete\n * chunks, returning a new stream that provides a single complete\n * GenerateContentResponse in each iteration.\n */\nfunction getResponseStream(inputStream) {\n    const reader = inputStream.getReader();\n    const stream = new ReadableStream({\n        start(controller) {\n            let currentText = \"\";\n            return pump();\n            function pump() {\n                return reader\n                    .read()\n                    .then(({ value, done }) => {\n                    if (done) {\n                        if (currentText.trim()) {\n                            controller.error(new GoogleGenerativeAIError(\"Failed to parse stream\"));\n                            return;\n                        }\n                        controller.close();\n                        return;\n                    }\n                    currentText += value;\n                    let match = currentText.match(responseLineRE);\n                    let parsedResponse;\n                    while (match) {\n                        try {\n                            parsedResponse = JSON.parse(match[1]);\n                        }\n                        catch (e) {\n                            controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: \"${match[1]}\"`));\n                            return;\n                        }\n                        controller.enqueue(parsedResponse);\n                        currentText = currentText.substring(match[0].length);\n                        match = currentText.match(responseLineRE);\n                    }\n                    return pump();\n                })\n                    .catch((e) => {\n                    let err = e;\n                    err.stack = e.stack;\n                    if (err.name === \"AbortError\") {\n                        err = new GoogleGenerativeAIAbortError(\"Request aborted when reading from the stream\");\n                    }\n                    else {\n                        err = new GoogleGenerativeAIError(\"Error reading from the stream\");\n                    }\n                    throw err;\n                });\n            }\n        },\n    });\n    return stream;\n}\n/**\n * Aggregates an array of `GenerateContentResponse`s into a single\n * GenerateContentResponse.\n */\nfunction aggregateResponses(responses) {\n    const lastResponse = responses[responses.length - 1];\n    const aggregatedResponse = {\n        promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback,\n    };\n    for (const response of responses) {\n        if (response.candidates) {\n            let candidateIndex = 0;\n            for (const candidate of response.candidates) {\n                if (!aggregatedResponse.candidates) {\n                    aggregatedResponse.candidates = [];\n                }\n                if (!aggregatedResponse.candidates[candidateIndex]) {\n                    aggregatedResponse.candidates[candidateIndex] = {\n                        index: candidateIndex,\n                    };\n                }\n                // Keep overwriting, the last one will be final\n                aggregatedResponse.candidates[candidateIndex].citationMetadata =\n                    candidate.citationMetadata;\n                aggregatedResponse.candidates[candidateIndex].groundingMetadata =\n                    candidate.groundingMetadata;\n                aggregatedResponse.candidates[candidateIndex].finishReason =\n                    candidate.finishReason;\n                aggregatedResponse.candidates[candidateIndex].finishMessage =\n                    candidate.finishMessage;\n                aggregatedResponse.candidates[candidateIndex].safetyRatings =\n                    candidate.safetyRatings;\n                /**\n                 * Candidates should always have content and parts, but this handles\n                 * possible malformed responses.\n                 */\n                if (candidate.content && candidate.content.parts) {\n                    if (!aggregatedResponse.candidates[candidateIndex].content) {\n                        aggregatedResponse.candidates[candidateIndex].content = {\n                            role: candidate.content.role || \"user\",\n                            parts: [],\n                        };\n                    }\n                    const newPart = {};\n                    for (const part of candidate.content.parts) {\n                        if (part.text) {\n                            newPart.text = part.text;\n                        }\n                        if (part.functionCall) {\n                            newPart.functionCall = part.functionCall;\n                        }\n                        if (part.executableCode) {\n                            newPart.executableCode = part.executableCode;\n                        }\n                        if (part.codeExecutionResult) {\n                            newPart.codeExecutionResult = part.codeExecutionResult;\n                        }\n                        if (Object.keys(newPart).length === 0) {\n                            newPart.text = \"\";\n                        }\n                        aggregatedResponse.candidates[candidateIndex].content.parts.push(newPart);\n                    }\n                }\n            }\n            candidateIndex++;\n        }\n        if (response.usageMetadata) {\n            aggregatedResponse.usageMetadata = response.usageMetadata;\n        }\n    }\n    return aggregatedResponse;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function generateContentStream(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.STREAM_GENERATE_CONTENT, apiKey, \n    /* stream */ true, JSON.stringify(params), requestOptions);\n    return processStream(response);\n}\nasync function generateContent(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.GENERATE_CONTENT, apiKey, \n    /* stream */ false, JSON.stringify(params), requestOptions);\n    const responseJson = await response.json();\n    const enhancedResponse = addHelpers(responseJson);\n    return {\n        response: enhancedResponse,\n    };\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction formatSystemInstruction(input) {\n    // null or undefined\n    if (input == null) {\n        return undefined;\n    }\n    else if (typeof input === \"string\") {\n        return { role: \"system\", parts: [{ text: input }] };\n    }\n    else if (input.text) {\n        return { role: \"system\", parts: [input] };\n    }\n    else if (input.parts) {\n        if (!input.role) {\n            return { role: \"system\", parts: input.parts };\n        }\n        else {\n            return input;\n        }\n    }\n}\nfunction formatNewContent(request) {\n    let newParts = [];\n    if (typeof request === \"string\") {\n        newParts = [{ text: request }];\n    }\n    else {\n        for (const partOrString of request) {\n            if (typeof partOrString === \"string\") {\n                newParts.push({ text: partOrString });\n            }\n            else {\n                newParts.push(partOrString);\n            }\n        }\n    }\n    return assignRoleToPartsAndValidateSendMessageRequest(newParts);\n}\n/**\n * When multiple Part types (i.e. FunctionResponsePart and TextPart) are\n * passed in a single Part array, we may need to assign different roles to each\n * part. Currently only FunctionResponsePart requires a role other than 'user'.\n * @private\n * @param parts Array of parts to pass to the model\n * @returns Array of content items\n */\nfunction assignRoleToPartsAndValidateSendMessageRequest(parts) {\n    const userContent = { role: \"user\", parts: [] };\n    const functionContent = { role: \"function\", parts: [] };\n    let hasUserContent = false;\n    let hasFunctionContent = false;\n    for (const part of parts) {\n        if (\"functionResponse\" in part) {\n            functionContent.parts.push(part);\n            hasFunctionContent = true;\n        }\n        else {\n            userContent.parts.push(part);\n            hasUserContent = true;\n        }\n    }\n    if (hasUserContent && hasFunctionContent) {\n        throw new GoogleGenerativeAIError(\"Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.\");\n    }\n    if (!hasUserContent && !hasFunctionContent) {\n        throw new GoogleGenerativeAIError(\"No content is provided for sending chat message.\");\n    }\n    if (hasUserContent) {\n        return userContent;\n    }\n    return functionContent;\n}\nfunction formatCountTokensInput(params, modelParams) {\n    var _a;\n    let formattedGenerateContentRequest = {\n        model: modelParams === null || modelParams === void 0 ? void 0 : modelParams.model,\n        generationConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.generationConfig,\n        safetySettings: modelParams === null || modelParams === void 0 ? void 0 : modelParams.safetySettings,\n        tools: modelParams === null || modelParams === void 0 ? void 0 : modelParams.tools,\n        toolConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.toolConfig,\n        systemInstruction: modelParams === null || modelParams === void 0 ? void 0 : modelParams.systemInstruction,\n        cachedContent: (_a = modelParams === null || modelParams === void 0 ? void 0 : modelParams.cachedContent) === null || _a === void 0 ? void 0 : _a.name,\n        contents: [],\n    };\n    const containsGenerateContentRequest = params.generateContentRequest != null;\n    if (params.contents) {\n        if (containsGenerateContentRequest) {\n            throw new GoogleGenerativeAIRequestInputError(\"CountTokensRequest must have one of contents or generateContentRequest, not both.\");\n        }\n        formattedGenerateContentRequest.contents = params.contents;\n    }\n    else if (containsGenerateContentRequest) {\n        formattedGenerateContentRequest = Object.assign(Object.assign({}, formattedGenerateContentRequest), params.generateContentRequest);\n    }\n    else {\n        // Array or string\n        const content = formatNewContent(params);\n        formattedGenerateContentRequest.contents = [content];\n    }\n    return { generateContentRequest: formattedGenerateContentRequest };\n}\nfunction formatGenerateContentInput(params) {\n    let formattedRequest;\n    if (params.contents) {\n        formattedRequest = params;\n    }\n    else {\n        // Array or string\n        const content = formatNewContent(params);\n        formattedRequest = { contents: [content] };\n    }\n    if (params.systemInstruction) {\n        formattedRequest.systemInstruction = formatSystemInstruction(params.systemInstruction);\n    }\n    return formattedRequest;\n}\nfunction formatEmbedContentInput(params) {\n    if (typeof params === \"string\" || Array.isArray(params)) {\n        const content = formatNewContent(params);\n        return { content };\n    }\n    return params;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// https://ai.google.dev/api/rest/v1beta/Content#part\nconst VALID_PART_FIELDS = [\n    \"text\",\n    \"inlineData\",\n    \"functionCall\",\n    \"functionResponse\",\n    \"executableCode\",\n    \"codeExecutionResult\",\n];\nconst VALID_PARTS_PER_ROLE = {\n    user: [\"text\", \"inlineData\"],\n    function: [\"functionResponse\"],\n    model: [\"text\", \"functionCall\", \"executableCode\", \"codeExecutionResult\"],\n    // System instructions shouldn't be in history anyway.\n    system: [\"text\"],\n};\nfunction validateChatHistory(history) {\n    let prevContent = false;\n    for (const currContent of history) {\n        const { role, parts } = currContent;\n        if (!prevContent && role !== \"user\") {\n            throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${role}`);\n        }\n        if (!POSSIBLE_ROLES.includes(role)) {\n            throw new GoogleGenerativeAIError(`Each item should include role field. Got ${role} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);\n        }\n        if (!Array.isArray(parts)) {\n            throw new GoogleGenerativeAIError(\"Content should have 'parts' property with an array of Parts\");\n        }\n        if (parts.length === 0) {\n            throw new GoogleGenerativeAIError(\"Each Content should have at least one part\");\n        }\n        const countFields = {\n            text: 0,\n            inlineData: 0,\n            functionCall: 0,\n            functionResponse: 0,\n            fileData: 0,\n            executableCode: 0,\n            codeExecutionResult: 0,\n        };\n        for (const part of parts) {\n            for (const key of VALID_PART_FIELDS) {\n                if (key in part) {\n                    countFields[key] += 1;\n                }\n            }\n        }\n        const validParts = VALID_PARTS_PER_ROLE[role];\n        for (const key of VALID_PART_FIELDS) {\n            if (!validParts.includes(key) && countFields[key] > 0) {\n                throw new GoogleGenerativeAIError(`Content with role '${role}' can't contain '${key}' part`);\n            }\n        }\n        prevContent = true;\n    }\n}\n/**\n * Returns true if the response is valid (could be appended to the history), flase otherwise.\n */\nfunction isValidResponse(response) {\n    var _a;\n    if (response.candidates === undefined || response.candidates.length === 0) {\n        return false;\n    }\n    const content = (_a = response.candidates[0]) === null || _a === void 0 ? void 0 : _a.content;\n    if (content === undefined) {\n        return false;\n    }\n    if (content.parts === undefined || content.parts.length === 0) {\n        return false;\n    }\n    for (const part of content.parts) {\n        if (part === undefined || Object.keys(part).length === 0) {\n            return false;\n        }\n        if (part.text !== undefined && part.text === \"\") {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Do not log a message for this error.\n */\nconst SILENT_ERROR = \"SILENT_ERROR\";\n/**\n * ChatSession class that enables sending chat messages and stores\n * history of sent and received messages so far.\n *\n * @public\n */\nclass ChatSession {\n    constructor(apiKey, model, params, _requestOptions = {}) {\n        this.model = model;\n        this.params = params;\n        this._requestOptions = _requestOptions;\n        this._history = [];\n        this._sendPromise = Promise.resolve();\n        this._apiKey = apiKey;\n        if (params === null || params === void 0 ? void 0 : params.history) {\n            validateChatHistory(params.history);\n            this._history = params.history;\n        }\n    }\n    /**\n     * Gets the chat history so far. Blocked prompts are not added to history.\n     * Blocked candidates are not added to history, nor are the prompts that\n     * generated them.\n     */\n    async getHistory() {\n        await this._sendPromise;\n        return this._history;\n    }\n    /**\n     * Sends a chat message and receives a non-streaming\n     * {@link GenerateContentResult}.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async sendMessage(request, requestOptions = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        await this._sendPromise;\n        const newContent = formatNewContent(request);\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,\n            toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,\n            systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,\n            cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,\n            contents: [...this._history, newContent],\n        };\n        const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        let finalResult;\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => generateContent(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions))\n            .then((result) => {\n            var _a;\n            if (isValidResponse(result.response)) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({ parts: [], \n                    // Response seems to come back without a role set.\n                    role: \"model\" }, (_a = result.response.candidates) === null || _a === void 0 ? void 0 : _a[0].content);\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(result.response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n            finalResult = result;\n        })\n            .catch((e) => {\n            // Resets _sendPromise to avoid subsequent calls failing and throw error.\n            this._sendPromise = Promise.resolve();\n            throw e;\n        });\n        await this._sendPromise;\n        return finalResult;\n    }\n    /**\n     * Sends a chat message and receives the response as a\n     * {@link GenerateContentStreamResult} containing an iterable stream\n     * and a response promise.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async sendMessageStream(request, requestOptions = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        await this._sendPromise;\n        const newContent = formatNewContent(request);\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,\n            toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,\n            systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,\n            cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,\n            contents: [...this._history, newContent],\n        };\n        const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions);\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => streamPromise)\n            // This must be handled to avoid unhandled rejection, but jump\n            // to the final catch block with a label to not log this error.\n            .catch((_ignored) => {\n            throw new Error(SILENT_ERROR);\n        })\n            .then((streamResult) => streamResult.response)\n            .then((response) => {\n            if (isValidResponse(response)) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({}, response.candidates[0].content);\n                // Response seems to come back without a role set.\n                if (!responseContent.role) {\n                    responseContent.role = \"model\";\n                }\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n        })\n            .catch((e) => {\n            // Errors in streamPromise are already catchable by the user as\n            // streamPromise is returned.\n            // Avoid duplicating the error message in logs.\n            if (e.message !== SILENT_ERROR) {\n                // Users do not have access to _sendPromise to catch errors\n                // downstream from streamPromise, so they should not throw.\n                console.error(e);\n            }\n        });\n        return streamPromise;\n    }\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function countTokens(apiKey, model, params, singleRequestOptions) {\n    const response = await makeModelRequest(model, Task.COUNT_TOKENS, apiKey, false, JSON.stringify(params), singleRequestOptions);\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function embedContent(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.EMBED_CONTENT, apiKey, false, JSON.stringify(params), requestOptions);\n    return response.json();\n}\nasync function batchEmbedContents(apiKey, model, params, requestOptions) {\n    const requestsWithModel = params.requests.map((request) => {\n        return Object.assign(Object.assign({}, request), { model });\n    });\n    const response = await makeModelRequest(model, Task.BATCH_EMBED_CONTENTS, apiKey, false, JSON.stringify({ requests: requestsWithModel }), requestOptions);\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Class for generative model APIs.\n * @public\n */\nclass GenerativeModel {\n    constructor(apiKey, modelParams, _requestOptions = {}) {\n        this.apiKey = apiKey;\n        this._requestOptions = _requestOptions;\n        if (modelParams.model.includes(\"/\")) {\n            // Models may be named \"models/model-name\" or \"tunedModels/model-name\"\n            this.model = modelParams.model;\n        }\n        else {\n            // If path is not included, assume it's a non-tuned model.\n            this.model = `models/${modelParams.model}`;\n        }\n        this.generationConfig = modelParams.generationConfig || {};\n        this.safetySettings = modelParams.safetySettings || [];\n        this.tools = modelParams.tools;\n        this.toolConfig = modelParams.toolConfig;\n        this.systemInstruction = formatSystemInstruction(modelParams.systemInstruction);\n        this.cachedContent = modelParams.cachedContent;\n    }\n    /**\n     * Makes a single non-streaming call to the model\n     * and returns an object containing a single {@link GenerateContentResponse}.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async generateContent(request, requestOptions = {}) {\n        var _a;\n        const formattedParams = formatGenerateContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return generateContent(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);\n    }\n    /**\n     * Makes a single streaming call to the model and returns an object\n     * containing an iterable stream that iterates over all chunks in the\n     * streaming response as well as a promise that returns the final\n     * aggregated response.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async generateContentStream(request, requestOptions = {}) {\n        var _a;\n        const formattedParams = formatGenerateContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return generateContentStream(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);\n    }\n    /**\n     * Gets a new {@link ChatSession} instance which can be used for\n     * multi-turn chats.\n     */\n    startChat(startChatParams) {\n        var _a;\n        return new ChatSession(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, startChatParams), this._requestOptions);\n    }\n    /**\n     * Counts the tokens in the provided request.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async countTokens(request, requestOptions = {}) {\n        const formattedParams = formatCountTokensInput(request, {\n            model: this.model,\n            generationConfig: this.generationConfig,\n            safetySettings: this.safetySettings,\n            tools: this.tools,\n            toolConfig: this.toolConfig,\n            systemInstruction: this.systemInstruction,\n            cachedContent: this.cachedContent,\n        });\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return countTokens(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);\n    }\n    /**\n     * Embeds the provided content.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async embedContent(request, requestOptions = {}) {\n        const formattedParams = formatEmbedContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return embedContent(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);\n    }\n    /**\n     * Embeds an array of {@link EmbedContentRequest}s.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async batchEmbedContents(batchEmbedContentRequest, requestOptions = {}) {\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest, generativeModelRequestOptions);\n    }\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Top-level class for this SDK\n * @public\n */\nclass GoogleGenerativeAI {\n    constructor(apiKey) {\n        this.apiKey = apiKey;\n    }\n    /**\n     * Gets a {@link GenerativeModel} instance for the provided model name.\n     */\n    getGenerativeModel(modelParams, requestOptions) {\n        if (!modelParams.model) {\n            throw new GoogleGenerativeAIError(`Must provide a model name. ` +\n                `Example: genai.getGenerativeModel({ model: 'my-model-name' })`);\n        }\n        return new GenerativeModel(this.apiKey, modelParams, requestOptions);\n    }\n    /**\n     * Creates a {@link GenerativeModel} instance from provided content cache.\n     */\n    getGenerativeModelFromCachedContent(cachedContent, modelParams, requestOptions) {\n        if (!cachedContent.name) {\n            throw new GoogleGenerativeAIRequestInputError(\"Cached content must contain a `name` field.\");\n        }\n        if (!cachedContent.model) {\n            throw new GoogleGenerativeAIRequestInputError(\"Cached content must contain a `model` field.\");\n        }\n        /**\n         * Not checking tools and toolConfig for now as it would require a deep\n         * equality comparison and isn't likely to be a common case.\n         */\n        const disallowedDuplicates = [\"model\", \"systemInstruction\"];\n        for (const key of disallowedDuplicates) {\n            if ((modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) &&\n                cachedContent[key] &&\n                (modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) !== cachedContent[key]) {\n                if (key === \"model\") {\n                    const modelParamsComp = modelParams.model.startsWith(\"models/\")\n                        ? modelParams.model.replace(\"models/\", \"\")\n                        : modelParams.model;\n                    const cachedContentComp = cachedContent.model.startsWith(\"models/\")\n                        ? cachedContent.model.replace(\"models/\", \"\")\n                        : cachedContent.model;\n                    if (modelParamsComp === cachedContentComp) {\n                        continue;\n                    }\n                }\n                throw new GoogleGenerativeAIRequestInputError(`Different value for \"${key}\" specified in modelParams` +\n                    ` (${modelParams[key]}) and cachedContent (${cachedContent[key]})`);\n            }\n        }\n        const modelParamsFromCache = Object.assign(Object.assign({}, modelParams), { model: cachedContent.model, tools: cachedContent.tools, toolConfig: cachedContent.toolConfig, systemInstruction: cachedContent.systemInstruction, cachedContent });\n        return new GenerativeModel(this.apiKey, modelParamsFromCache, requestOptions);\n    }\n}\n\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvLnBucG0vQGdvb2dsZStnZW5lcmF0aXZlLWFpQDAuMjQuMS9ub2RlX21vZHVsZXMvQGdvb2dsZS9nZW5lcmF0aXZlLWFpL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0RBQXdEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMEJBQTBCOztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9DQUFvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrQ0FBa0M7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9DQUFvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRCQUE0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtEQUFrRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0RBQW9EOztBQUVyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGFBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwR0FBMEcsU0FBUztBQUNuSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTBFO0FBQzFFLDRFQUE0RTtBQUM1RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVCQUF1QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx3QkFBd0I7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUJBQXVCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0ZBQXNGLElBQUk7QUFDMUYseUJBQXlCLGlCQUFpQix1QkFBdUIsbUJBQW1CO0FBQ3BGO0FBQ0E7QUFDQSxtRUFBbUUsa0JBQWtCLGlLQUFpSztBQUN0UDtBQUNBO0FBQ0E7O0FBRXVaO0FBQ3ZaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AZ29vZ2xlK2dlbmVyYXRpdmUtYWlAMC4yNC4xL25vZGVfbW9kdWxlcy9AZ29vZ2xlL2dlbmVyYXRpdmUtYWkvZGlzdC9pbmRleC5tanM/YTM1NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnRhaW5zIHRoZSBsaXN0IG9mIE9wZW5BUEkgZGF0YSB0eXBlc1xuICogYXMgZGVmaW5lZCBieSBodHRwczovL3N3YWdnZXIuaW8vZG9jcy9zcGVjaWZpY2F0aW9uL2RhdGEtbW9kZWxzL2RhdGEtdHlwZXMvXG4gKiBAcHVibGljXG4gKi9cbnZhciBTY2hlbWFUeXBlO1xuKGZ1bmN0aW9uIChTY2hlbWFUeXBlKSB7XG4gICAgLyoqIFN0cmluZyB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJTVFJJTkdcIl0gPSBcInN0cmluZ1wiO1xuICAgIC8qKiBOdW1iZXIgdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiTlVNQkVSXCJdID0gXCJudW1iZXJcIjtcbiAgICAvKiogSW50ZWdlciB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJJTlRFR0VSXCJdID0gXCJpbnRlZ2VyXCI7XG4gICAgLyoqIEJvb2xlYW4gdHlwZS4gKi9cbiAgICBTY2hlbWFUeXBlW1wiQk9PTEVBTlwiXSA9IFwiYm9vbGVhblwiO1xuICAgIC8qKiBBcnJheSB0eXBlLiAqL1xuICAgIFNjaGVtYVR5cGVbXCJBUlJBWVwiXSA9IFwiYXJyYXlcIjtcbiAgICAvKiogT2JqZWN0IHR5cGUuICovXG4gICAgU2NoZW1hVHlwZVtcIk9CSkVDVFwiXSA9IFwib2JqZWN0XCI7XG59KShTY2hlbWFUeXBlIHx8IChTY2hlbWFUeXBlID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQHB1YmxpY1xuICovXG52YXIgRXhlY3V0YWJsZUNvZGVMYW5ndWFnZTtcbihmdW5jdGlvbiAoRXhlY3V0YWJsZUNvZGVMYW5ndWFnZSkge1xuICAgIEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2VbXCJMQU5HVUFHRV9VTlNQRUNJRklFRFwiXSA9IFwibGFuZ3VhZ2VfdW5zcGVjaWZpZWRcIjtcbiAgICBFeGVjdXRhYmxlQ29kZUxhbmd1YWdlW1wiUFlUSE9OXCJdID0gXCJweXRob25cIjtcbn0pKEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UgfHwgKEV4ZWN1dGFibGVDb2RlTGFuZ3VhZ2UgPSB7fSkpO1xuLyoqXG4gKiBQb3NzaWJsZSBvdXRjb21lcyBvZiBjb2RlIGV4ZWN1dGlvbi5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIE91dGNvbWU7XG4oZnVuY3Rpb24gKE91dGNvbWUpIHtcbiAgICAvKipcbiAgICAgKiBVbnNwZWNpZmllZCBzdGF0dXMuIFRoaXMgdmFsdWUgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgICAqL1xuICAgIE91dGNvbWVbXCJPVVRDT01FX1VOU1BFQ0lGSUVEXCJdID0gXCJvdXRjb21lX3Vuc3BlY2lmaWVkXCI7XG4gICAgLyoqXG4gICAgICogQ29kZSBleGVjdXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgKi9cbiAgICBPdXRjb21lW1wiT1VUQ09NRV9PS1wiXSA9IFwib3V0Y29tZV9va1wiO1xuICAgIC8qKlxuICAgICAqIENvZGUgZXhlY3V0aW9uIGZpbmlzaGVkIGJ1dCB3aXRoIGEgZmFpbHVyZS4gYHN0ZGVycmAgc2hvdWxkIGNvbnRhaW4gdGhlXG4gICAgICogcmVhc29uLlxuICAgICAqL1xuICAgIE91dGNvbWVbXCJPVVRDT01FX0ZBSUxFRFwiXSA9IFwib3V0Y29tZV9mYWlsZWRcIjtcbiAgICAvKipcbiAgICAgKiBDb2RlIGV4ZWN1dGlvbiByYW4gZm9yIHRvbyBsb25nLCBhbmQgd2FzIGNhbmNlbGxlZC4gVGhlcmUgbWF5IG9yIG1heSBub3RcbiAgICAgKiBiZSBhIHBhcnRpYWwgb3V0cHV0IHByZXNlbnQuXG4gICAgICovXG4gICAgT3V0Y29tZVtcIk9VVENPTUVfREVBRExJTkVfRVhDRUVERURcIl0gPSBcIm91dGNvbWVfZGVhZGxpbmVfZXhjZWVkZWRcIjtcbn0pKE91dGNvbWUgfHwgKE91dGNvbWUgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQb3NzaWJsZSByb2xlcy5cbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgUE9TU0lCTEVfUk9MRVMgPSBbXCJ1c2VyXCIsIFwibW9kZWxcIiwgXCJmdW5jdGlvblwiLCBcInN5c3RlbVwiXTtcbi8qKlxuICogSGFybSBjYXRlZ29yaWVzIHRoYXQgd291bGQgY2F1c2UgcHJvbXB0cyBvciBjYW5kaWRhdGVzIHRvIGJlIGJsb2NrZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBIYXJtQ2F0ZWdvcnk7XG4oZnVuY3Rpb24gKEhhcm1DYXRlZ29yeSkge1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fQ0FURUdPUllfVU5TUEVDSUZJRURcIjtcbiAgICBIYXJtQ2F0ZWdvcnlbXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCJdID0gXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9TRVhVQUxMWV9FWFBMSUNJVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfSEFSQVNTTUVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9IQVJBU1NNRU5UXCI7XG4gICAgSGFybUNhdGVnb3J5W1wiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiXSA9IFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiO1xuICAgIEhhcm1DYXRlZ29yeVtcIkhBUk1fQ0FURUdPUllfQ0lWSUNfSU5URUdSSVRZXCJdID0gXCJIQVJNX0NBVEVHT1JZX0NJVklDX0lOVEVHUklUWVwiO1xufSkoSGFybUNhdGVnb3J5IHx8IChIYXJtQ2F0ZWdvcnkgPSB7fSkpO1xuLyoqXG4gKiBUaHJlc2hvbGQgYWJvdmUgd2hpY2ggYSBwcm9tcHQgb3IgY2FuZGlkYXRlIHdpbGwgYmUgYmxvY2tlZC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEhhcm1CbG9ja1RocmVzaG9sZDtcbihmdW5jdGlvbiAoSGFybUJsb2NrVGhyZXNob2xkKSB7XG4gICAgLyoqIFRocmVzaG9sZCBpcyB1bnNwZWNpZmllZC4gKi9cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJIQVJNX0JMT0NLX1RIUkVTSE9MRF9VTlNQRUNJRklFRFwiXSA9IFwiSEFSTV9CTE9DS19USFJFU0hPTERfVU5TUEVDSUZJRURcIjtcbiAgICAvKiogQ29udGVudCB3aXRoIE5FR0xJR0lCTEUgd2lsbCBiZSBhbGxvd2VkLiAqL1xuICAgIEhhcm1CbG9ja1RocmVzaG9sZFtcIkJMT0NLX0xPV19BTkRfQUJPVkVcIl0gPSBcIkJMT0NLX0xPV19BTkRfQUJPVkVcIjtcbiAgICAvKiogQ29udGVudCB3aXRoIE5FR0xJR0lCTEUgYW5kIExPVyB3aWxsIGJlIGFsbG93ZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfTUVESVVNX0FORF9BQk9WRVwiXSA9IFwiQkxPQ0tfTUVESVVNX0FORF9BQk9WRVwiO1xuICAgIC8qKiBDb250ZW50IHdpdGggTkVHTElHSUJMRSwgTE9XLCBhbmQgTUVESVVNIHdpbGwgYmUgYWxsb3dlZC4gKi9cbiAgICBIYXJtQmxvY2tUaHJlc2hvbGRbXCJCTE9DS19PTkxZX0hJR0hcIl0gPSBcIkJMT0NLX09OTFlfSElHSFwiO1xuICAgIC8qKiBBbGwgY29udGVudCB3aWxsIGJlIGFsbG93ZWQuICovXG4gICAgSGFybUJsb2NrVGhyZXNob2xkW1wiQkxPQ0tfTk9ORVwiXSA9IFwiQkxPQ0tfTk9ORVwiO1xufSkoSGFybUJsb2NrVGhyZXNob2xkIHx8IChIYXJtQmxvY2tUaHJlc2hvbGQgPSB7fSkpO1xuLyoqXG4gKiBQcm9iYWJpbGl0eSB0aGF0IGEgcHJvbXB0IG9yIGNhbmRpZGF0ZSBtYXRjaGVzIGEgaGFybSBjYXRlZ29yeS5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEhhcm1Qcm9iYWJpbGl0eTtcbihmdW5jdGlvbiAoSGFybVByb2JhYmlsaXR5KSB7XG4gICAgLyoqIFByb2JhYmlsaXR5IGlzIHVuc3BlY2lmaWVkLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIkhBUk1fUFJPQkFCSUxJVFlfVU5TUEVDSUZJRURcIl0gPSBcIkhBUk1fUFJPQkFCSUxJVFlfVU5TUEVDSUZJRURcIjtcbiAgICAvKiogQ29udGVudCBoYXMgYSBuZWdsaWdpYmxlIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTkVHTElHSUJMRVwiXSA9IFwiTkVHTElHSUJMRVwiO1xuICAgIC8qKiBDb250ZW50IGhhcyBhIGxvdyBjaGFuY2Ugb2YgYmVpbmcgdW5zYWZlLiAqL1xuICAgIEhhcm1Qcm9iYWJpbGl0eVtcIkxPV1wiXSA9IFwiTE9XXCI7XG4gICAgLyoqIENvbnRlbnQgaGFzIGEgbWVkaXVtIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiTUVESVVNXCJdID0gXCJNRURJVU1cIjtcbiAgICAvKiogQ29udGVudCBoYXMgYSBoaWdoIGNoYW5jZSBvZiBiZWluZyB1bnNhZmUuICovXG4gICAgSGFybVByb2JhYmlsaXR5W1wiSElHSFwiXSA9IFwiSElHSFwiO1xufSkoSGFybVByb2JhYmlsaXR5IHx8IChIYXJtUHJvYmFiaWxpdHkgPSB7fSkpO1xuLyoqXG4gKiBSZWFzb24gdGhhdCBhIHByb21wdCB3YXMgYmxvY2tlZC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIEJsb2NrUmVhc29uO1xuKGZ1bmN0aW9uIChCbG9ja1JlYXNvbikge1xuICAgIC8vIEEgYmxvY2tlZCByZWFzb24gd2FzIG5vdCBzcGVjaWZpZWQuXG4gICAgQmxvY2tSZWFzb25bXCJCTE9DS0VEX1JFQVNPTl9VTlNQRUNJRklFRFwiXSA9IFwiQkxPQ0tFRF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBDb250ZW50IHdhcyBibG9ja2VkIGJ5IHNhZmV0eSBzZXR0aW5ncy5cbiAgICBCbG9ja1JlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gQ29udGVudCB3YXMgYmxvY2tlZCwgYnV0IHRoZSByZWFzb24gaXMgdW5jYXRlZ29yaXplZC5cbiAgICBCbG9ja1JlYXNvbltcIk9USEVSXCJdID0gXCJPVEhFUlwiO1xufSkoQmxvY2tSZWFzb24gfHwgKEJsb2NrUmVhc29uID0ge30pKTtcbi8qKlxuICogUmVhc29uIHRoYXQgYSBjYW5kaWRhdGUgZmluaXNoZWQuXG4gKiBAcHVibGljXG4gKi9cbnZhciBGaW5pc2hSZWFzb247XG4oZnVuY3Rpb24gKEZpbmlzaFJlYXNvbikge1xuICAgIC8vIERlZmF1bHQgdmFsdWUuIFRoaXMgdmFsdWUgaXMgdW51c2VkLlxuICAgIEZpbmlzaFJlYXNvbltcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIl0gPSBcIkZJTklTSF9SRUFTT05fVU5TUEVDSUZJRURcIjtcbiAgICAvLyBOYXR1cmFsIHN0b3AgcG9pbnQgb2YgdGhlIG1vZGVsIG9yIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UuXG4gICAgRmluaXNoUmVhc29uW1wiU1RPUFwiXSA9IFwiU1RPUFwiO1xuICAgIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgYXMgc3BlY2lmaWVkIGluIHRoZSByZXF1ZXN0IHdhcyByZWFjaGVkLlxuICAgIEZpbmlzaFJlYXNvbltcIk1BWF9UT0tFTlNcIl0gPSBcIk1BWF9UT0tFTlNcIjtcbiAgICAvLyBUaGUgY2FuZGlkYXRlIGNvbnRlbnQgd2FzIGZsYWdnZWQgZm9yIHNhZmV0eSByZWFzb25zLlxuICAgIEZpbmlzaFJlYXNvbltcIlNBRkVUWVwiXSA9IFwiU0FGRVRZXCI7XG4gICAgLy8gVGhlIGNhbmRpZGF0ZSBjb250ZW50IHdhcyBmbGFnZ2VkIGZvciByZWNpdGF0aW9uIHJlYXNvbnMuXG4gICAgRmluaXNoUmVhc29uW1wiUkVDSVRBVElPTlwiXSA9IFwiUkVDSVRBVElPTlwiO1xuICAgIC8vIFRoZSBjYW5kaWRhdGUgY29udGVudCB3YXMgZmxhZ2dlZCBmb3IgdXNpbmcgYW4gdW5zdXBwb3J0ZWQgbGFuZ3VhZ2UuXG4gICAgRmluaXNoUmVhc29uW1wiTEFOR1VBR0VcIl0gPSBcIkxBTkdVQUdFXCI7XG4gICAgLy8gVG9rZW4gZ2VuZXJhdGlvbiBzdG9wcGVkIGJlY2F1c2UgdGhlIGNvbnRlbnQgY29udGFpbnMgZm9yYmlkZGVuIHRlcm1zLlxuICAgIEZpbmlzaFJlYXNvbltcIkJMT0NLTElTVFwiXSA9IFwiQkxPQ0tMSVNUXCI7XG4gICAgLy8gVG9rZW4gZ2VuZXJhdGlvbiBzdG9wcGVkIGZvciBwb3RlbnRpYWxseSBjb250YWluaW5nIHByb2hpYml0ZWQgY29udGVudC5cbiAgICBGaW5pc2hSZWFzb25bXCJQUk9ISUJJVEVEX0NPTlRFTlRcIl0gPSBcIlBST0hJQklURURfQ09OVEVOVFwiO1xuICAgIC8vIFRva2VuIGdlbmVyYXRpb24gc3RvcHBlZCBiZWNhdXNlIHRoZSBjb250ZW50IHBvdGVudGlhbGx5IGNvbnRhaW5zIFNlbnNpdGl2ZSBQZXJzb25hbGx5IElkZW50aWZpYWJsZSBJbmZvcm1hdGlvbiAoU1BJSSkuXG4gICAgRmluaXNoUmVhc29uW1wiU1BJSVwiXSA9IFwiU1BJSVwiO1xuICAgIC8vIFRoZSBmdW5jdGlvbiBjYWxsIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgaXMgaW52YWxpZC5cbiAgICBGaW5pc2hSZWFzb25bXCJNQUxGT1JNRURfRlVOQ1RJT05fQ0FMTFwiXSA9IFwiTUFMRk9STUVEX0ZVTkNUSU9OX0NBTExcIjtcbiAgICAvLyBVbmtub3duIHJlYXNvbi5cbiAgICBGaW5pc2hSZWFzb25bXCJPVEhFUlwiXSA9IFwiT1RIRVJcIjtcbn0pKEZpbmlzaFJlYXNvbiB8fCAoRmluaXNoUmVhc29uID0ge30pKTtcbi8qKlxuICogVGFzayB0eXBlIGZvciBlbWJlZGRpbmcgY29udGVudC5cbiAqIEBwdWJsaWNcbiAqL1xudmFyIFRhc2tUeXBlO1xuKGZ1bmN0aW9uIChUYXNrVHlwZSkge1xuICAgIFRhc2tUeXBlW1wiVEFTS19UWVBFX1VOU1BFQ0lGSUVEXCJdID0gXCJUQVNLX1RZUEVfVU5TUEVDSUZJRURcIjtcbiAgICBUYXNrVHlwZVtcIlJFVFJJRVZBTF9RVUVSWVwiXSA9IFwiUkVUUklFVkFMX1FVRVJZXCI7XG4gICAgVGFza1R5cGVbXCJSRVRSSUVWQUxfRE9DVU1FTlRcIl0gPSBcIlJFVFJJRVZBTF9ET0NVTUVOVFwiO1xuICAgIFRhc2tUeXBlW1wiU0VNQU5USUNfU0lNSUxBUklUWVwiXSA9IFwiU0VNQU5USUNfU0lNSUxBUklUWVwiO1xuICAgIFRhc2tUeXBlW1wiQ0xBU1NJRklDQVRJT05cIl0gPSBcIkNMQVNTSUZJQ0FUSU9OXCI7XG4gICAgVGFza1R5cGVbXCJDTFVTVEVSSU5HXCJdID0gXCJDTFVTVEVSSU5HXCI7XG59KShUYXNrVHlwZSB8fCAoVGFza1R5cGUgPSB7fSkpO1xuLyoqXG4gKiBAcHVibGljXG4gKi9cbnZhciBGdW5jdGlvbkNhbGxpbmdNb2RlO1xuKGZ1bmN0aW9uIChGdW5jdGlvbkNhbGxpbmdNb2RlKSB7XG4gICAgLy8gVW5zcGVjaWZpZWQgZnVuY3Rpb24gY2FsbGluZyBtb2RlLiBUaGlzIHZhbHVlIHNob3VsZCBub3QgYmUgdXNlZC5cbiAgICBGdW5jdGlvbkNhbGxpbmdNb2RlW1wiTU9ERV9VTlNQRUNJRklFRFwiXSA9IFwiTU9ERV9VTlNQRUNJRklFRFwiO1xuICAgIC8vIERlZmF1bHQgbW9kZWwgYmVoYXZpb3IsIG1vZGVsIGRlY2lkZXMgdG8gcHJlZGljdCBlaXRoZXIgYSBmdW5jdGlvbiBjYWxsXG4gICAgLy8gb3IgYSBuYXR1cmFsIGxhbmd1YWdlIHJlcHNwb3NlLlxuICAgIEZ1bmN0aW9uQ2FsbGluZ01vZGVbXCJBVVRPXCJdID0gXCJBVVRPXCI7XG4gICAgLy8gTW9kZWwgaXMgY29uc3RyYWluZWQgdG8gYWx3YXlzIHByZWRpY3RpbmcgYSBmdW5jdGlvbiBjYWxsIG9ubHkuXG4gICAgLy8gSWYgXCJhbGxvd2VkX2Z1bmN0aW9uX25hbWVzXCIgYXJlIHNldCwgdGhlIHByZWRpY3RlZCBmdW5jdGlvbiBjYWxsIHdpbGwgYmVcbiAgICAvLyBsaW1pdGVkIHRvIGFueSBvbmUgb2YgXCJhbGxvd2VkX2Z1bmN0aW9uX25hbWVzXCIsIGVsc2UgdGhlIHByZWRpY3RlZFxuICAgIC8vIGZ1bmN0aW9uIGNhbGwgd2lsbCBiZSBhbnkgb25lIG9mIHRoZSBwcm92aWRlZCBcImZ1bmN0aW9uX2RlY2xhcmF0aW9uc1wiLlxuICAgIEZ1bmN0aW9uQ2FsbGluZ01vZGVbXCJBTllcIl0gPSBcIkFOWVwiO1xuICAgIC8vIE1vZGVsIHdpbGwgbm90IHByZWRpY3QgYW55IGZ1bmN0aW9uIGNhbGwuIE1vZGVsIGJlaGF2aW9yIGlzIHNhbWUgYXMgd2hlblxuICAgIC8vIG5vdCBwYXNzaW5nIGFueSBmdW5jdGlvbiBkZWNsYXJhdGlvbnMuXG4gICAgRnVuY3Rpb25DYWxsaW5nTW9kZVtcIk5PTkVcIl0gPSBcIk5PTkVcIjtcbn0pKEZ1bmN0aW9uQ2FsbGluZ01vZGUgfHwgKEZ1bmN0aW9uQ2FsbGluZ01vZGUgPSB7fSkpO1xuLyoqXG4gKiBUaGUgbW9kZSBvZiB0aGUgcHJlZGljdG9yIHRvIGJlIHVzZWQgaW4gZHluYW1pYyByZXRyaWV2YWwuXG4gKiBAcHVibGljXG4gKi9cbnZhciBEeW5hbWljUmV0cmlldmFsTW9kZTtcbihmdW5jdGlvbiAoRHluYW1pY1JldHJpZXZhbE1vZGUpIHtcbiAgICAvLyBVbnNwZWNpZmllZCBmdW5jdGlvbiBjYWxsaW5nIG1vZGUuIFRoaXMgdmFsdWUgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICAgIER5bmFtaWNSZXRyaWV2YWxNb2RlW1wiTU9ERV9VTlNQRUNJRklFRFwiXSA9IFwiTU9ERV9VTlNQRUNJRklFRFwiO1xuICAgIC8vIFJ1biByZXRyaWV2YWwgb25seSB3aGVuIHN5c3RlbSBkZWNpZGVzIGl0IGlzIG5lY2Vzc2FyeS5cbiAgICBEeW5hbWljUmV0cmlldmFsTW9kZVtcIk1PREVfRFlOQU1JQ1wiXSA9IFwiTU9ERV9EWU5BTUlDXCI7XG59KShEeW5hbWljUmV0cmlldmFsTW9kZSB8fCAoRHluYW1pY1JldHJpZXZhbE1vZGUgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBCYXNpYyBlcnJvciB0eXBlIGZvciB0aGlzIFNESy5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihgW0dvb2dsZUdlbmVyYXRpdmVBSSBFcnJvcl06ICR7bWVzc2FnZX1gKTtcbiAgICB9XG59XG4vKipcbiAqIEVycm9ycyBpbiB0aGUgY29udGVudHMgb2YgYSByZXNwb25zZSBmcm9tIHRoZSBtb2RlbC4gVGhpcyBpbmNsdWRlcyBwYXJzaW5nXG4gKiBlcnJvcnMsIG9yIHJlc3BvbnNlcyBpbmNsdWRpbmcgYSBzYWZldHkgYmxvY2sgcmVhc29uLlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yIGV4dGVuZHMgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHJlc3BvbnNlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciBjbGFzcyBjb3ZlcmluZyBIVFRQIGVycm9ycyB3aGVuIGNhbGxpbmcgdGhlIHNlcnZlci4gSW5jbHVkZXMgSFRUUFxuICogc3RhdHVzLCBzdGF0dXNUZXh0LCBhbmQgb3B0aW9uYWwgZGV0YWlscywgaWYgcHJvdmlkZWQgaW4gdGhlIHNlcnZlciByZXNwb25zZS5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJRmV0Y2hFcnJvciBleHRlbmRzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXMsIHN0YXR1c1RleHQsIGVycm9yRGV0YWlscykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuc3RhdHVzVGV4dCA9IHN0YXR1c1RleHQ7XG4gICAgICAgIHRoaXMuZXJyb3JEZXRhaWxzID0gZXJyb3JEZXRhaWxzO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3JzIGluIHRoZSBjb250ZW50cyBvZiBhIHJlcXVlc3Qgb3JpZ2luYXRpbmcgZnJvbSB1c2VyIGlucHV0LlxuICogQHB1YmxpY1xuICovXG5jbGFzcyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvciBleHRlbmRzIEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSByZXF1ZXN0IGlzIGFib3J0ZWQsIGVpdGhlciBkdWUgdG8gYSB0aW1lb3V0IG9yXG4gKiBpbnRlbnRpb25hbCBjYW5jZWxsYXRpb24gYnkgdGhlIHVzZXIuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIEdvb2dsZUdlbmVyYXRpdmVBSUFib3J0RXJyb3IgZXh0ZW5kcyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciB7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBERUZBVUxUX0JBU0VfVVJMID0gXCJodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbVwiO1xuY29uc3QgREVGQVVMVF9BUElfVkVSU0lPTiA9IFwidjFiZXRhXCI7XG4vKipcbiAqIFdlIGNhbid0IGByZXF1aXJlYCBwYWNrYWdlLmpzb24gaWYgdGhpcyBydW5zIG9uIHdlYi4gV2Ugd2lsbCB1c2Ugcm9sbHVwIHRvXG4gKiBzd2FwIGluIHRoZSB2ZXJzaW9uIG51bWJlciBoZXJlIGF0IGJ1aWxkIHRpbWUuXG4gKi9cbmNvbnN0IFBBQ0tBR0VfVkVSU0lPTiA9IFwiMC4yNC4xXCI7XG5jb25zdCBQQUNLQUdFX0xPR19IRUFERVIgPSBcImdlbmFpLWpzXCI7XG52YXIgVGFzaztcbihmdW5jdGlvbiAoVGFzaykge1xuICAgIFRhc2tbXCJHRU5FUkFURV9DT05URU5UXCJdID0gXCJnZW5lcmF0ZUNvbnRlbnRcIjtcbiAgICBUYXNrW1wiU1RSRUFNX0dFTkVSQVRFX0NPTlRFTlRcIl0gPSBcInN0cmVhbUdlbmVyYXRlQ29udGVudFwiO1xuICAgIFRhc2tbXCJDT1VOVF9UT0tFTlNcIl0gPSBcImNvdW50VG9rZW5zXCI7XG4gICAgVGFza1tcIkVNQkVEX0NPTlRFTlRcIl0gPSBcImVtYmVkQ29udGVudFwiO1xuICAgIFRhc2tbXCJCQVRDSF9FTUJFRF9DT05URU5UU1wiXSA9IFwiYmF0Y2hFbWJlZENvbnRlbnRzXCI7XG59KShUYXNrIHx8IChUYXNrID0ge30pKTtcbmNsYXNzIFJlcXVlc3RVcmwge1xuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLnRhc2sgPSB0YXNrO1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgIHRoaXMucmVxdWVzdE9wdGlvbnMgPSByZXF1ZXN0T3B0aW9ucztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IGFwaVZlcnNpb24gPSAoKF9hID0gdGhpcy5yZXF1ZXN0T3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwaVZlcnNpb24pIHx8IERFRkFVTFRfQVBJX1ZFUlNJT047XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSAoKF9iID0gdGhpcy5yZXF1ZXN0T3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJhc2VVcmwpIHx8IERFRkFVTFRfQkFTRV9VUkw7XG4gICAgICAgIGxldCB1cmwgPSBgJHtiYXNlVXJsfS8ke2FwaVZlcnNpb259LyR7dGhpcy5tb2RlbH06JHt0aGlzLnRhc2t9YDtcbiAgICAgICAgaWYgKHRoaXMuc3RyZWFtKSB7XG4gICAgICAgICAgICB1cmwgKz0gXCI/YWx0PXNzZVwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxufVxuLyoqXG4gKiBTaW1wbGUsIGJ1dCBtYXkgYmVjb21lIG1vcmUgY29tcGxleCBpZiB3ZSBhZGQgbW9yZSB2ZXJzaW9ucyB0byBsb2cuXG4gKi9cbmZ1bmN0aW9uIGdldENsaWVudEhlYWRlcnMocmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCBjbGllbnRIZWFkZXJzID0gW107XG4gICAgaWYgKHJlcXVlc3RPcHRpb25zID09PSBudWxsIHx8IHJlcXVlc3RPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXF1ZXN0T3B0aW9ucy5hcGlDbGllbnQpIHtcbiAgICAgICAgY2xpZW50SGVhZGVycy5wdXNoKHJlcXVlc3RPcHRpb25zLmFwaUNsaWVudCk7XG4gICAgfVxuICAgIGNsaWVudEhlYWRlcnMucHVzaChgJHtQQUNLQUdFX0xPR19IRUFERVJ9LyR7UEFDS0FHRV9WRVJTSU9OfWApO1xuICAgIHJldHVybiBjbGllbnRIZWFkZXJzLmpvaW4oXCIgXCIpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZGVycyh1cmwpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIGhlYWRlcnMuYXBwZW5kKFwieC1nb29nLWFwaS1jbGllbnRcIiwgZ2V0Q2xpZW50SGVhZGVycyh1cmwucmVxdWVzdE9wdGlvbnMpKTtcbiAgICBoZWFkZXJzLmFwcGVuZChcIngtZ29vZy1hcGkta2V5XCIsIHVybC5hcGlLZXkpO1xuICAgIGxldCBjdXN0b21IZWFkZXJzID0gKF9hID0gdXJsLnJlcXVlc3RPcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY3VzdG9tSGVhZGVycztcbiAgICBpZiAoY3VzdG9tSGVhZGVycykge1xuICAgICAgICBpZiAoIShjdXN0b21IZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKGN1c3RvbUhlYWRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoYHVuYWJsZSB0byBjb252ZXJ0IGN1c3RvbUhlYWRlcnMgdmFsdWUgJHtKU09OLnN0cmluZ2lmeShjdXN0b21IZWFkZXJzKX0gdG8gSGVhZGVyczogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWVdIG9mIGN1c3RvbUhlYWRlcnMuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSA9PT0gXCJ4LWdvb2ctYXBpLWtleVwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKGBDYW5ub3Qgc2V0IHJlc2VydmVkIGhlYWRlciBuYW1lICR7aGVhZGVyTmFtZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlYWRlck5hbWUgPT09IFwieC1nb29nLWFwaS1jbGllbnRcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcihgSGVhZGVyIG5hbWUgJHtoZWFkZXJOYW1lfSBjYW4gb25seSBiZSBzZXQgdXNpbmcgdGhlIGFwaUNsaWVudCBmaWVsZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoaGVhZGVyTmFtZSwgaGVhZGVyVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoZWFkZXJzO1xufVxuYXN5bmMgZnVuY3Rpb24gY29uc3RydWN0TW9kZWxSZXF1ZXN0KG1vZGVsLCB0YXNrLCBhcGlLZXksIHN0cmVhbSwgYm9keSwgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgUmVxdWVzdFVybChtb2RlbCwgdGFzaywgYXBpS2V5LCBzdHJlYW0sIHJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmw6IHVybC50b1N0cmluZygpLFxuICAgICAgICBmZXRjaE9wdGlvbnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYnVpbGRGZXRjaE9wdGlvbnMocmVxdWVzdE9wdGlvbnMpKSwgeyBtZXRob2Q6IFwiUE9TVFwiLCBoZWFkZXJzOiBhd2FpdCBnZXRIZWFkZXJzKHVybCksIGJvZHkgfSksXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIHRhc2ssIGFwaUtleSwgc3RyZWFtLCBib2R5LCByZXF1ZXN0T3B0aW9ucyA9IHt9LCBcbi8vIEFsbG93cyB0aGlzIHRvIGJlIHN0dWJiZWQgZm9yIHRlc3RzXG5mZXRjaEZuID0gZmV0Y2gpIHtcbiAgICBjb25zdCB7IHVybCwgZmV0Y2hPcHRpb25zIH0gPSBhd2FpdCBjb25zdHJ1Y3RNb2RlbFJlcXVlc3QobW9kZWwsIHRhc2ssIGFwaUtleSwgc3RyZWFtLCBib2R5LCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIG1ha2VSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zLCBmZXRjaEZuKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KHVybCwgZmV0Y2hPcHRpb25zLCBmZXRjaEZuID0gZmV0Y2gpIHtcbiAgICBsZXQgcmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEZuKHVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaGFuZGxlUmVzcG9uc2VFcnJvcihlLCB1cmwpO1xuICAgIH1cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlTm90T2socmVzcG9uc2UsIHVybCk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbn1cbmZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlRXJyb3IoZSwgdXJsKSB7XG4gICAgbGV0IGVyciA9IGU7XG4gICAgaWYgKGVyci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xuICAgICAgICBlcnIgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJQWJvcnRFcnJvcihgUmVxdWVzdCBhYm9ydGVkIHdoZW4gZmV0Y2hpbmcgJHt1cmwudG9TdHJpbmcoKX06ICR7ZS5tZXNzYWdlfWApO1xuICAgICAgICBlcnIuc3RhY2sgPSBlLnN0YWNrO1xuICAgIH1cbiAgICBlbHNlIGlmICghKGUgaW5zdGFuY2VvZiBHb29nbGVHZW5lcmF0aXZlQUlGZXRjaEVycm9yIHx8XG4gICAgICAgIGUgaW5zdGFuY2VvZiBHb29nbGVHZW5lcmF0aXZlQUlSZXF1ZXN0SW5wdXRFcnJvcikpIHtcbiAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFcnJvciBmZXRjaGluZyBmcm9tICR7dXJsLnRvU3RyaW5nKCl9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgZXJyLnN0YWNrID0gZS5zdGFjaztcbiAgICB9XG4gICAgdGhyb3cgZXJyO1xufVxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2VOb3RPayhyZXNwb25zZSwgdXJsKSB7XG4gICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xuICAgIGxldCBlcnJvckRldGFpbHM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgbWVzc2FnZSA9IGpzb24uZXJyb3IubWVzc2FnZTtcbiAgICAgICAgaWYgKGpzb24uZXJyb3IuZGV0YWlscykge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgICR7SlNPTi5zdHJpbmdpZnkoanNvbi5lcnJvci5kZXRhaWxzKX1gO1xuICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0ganNvbi5lcnJvci5kZXRhaWxzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlnbm9yZWRcbiAgICB9XG4gICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUZldGNoRXJyb3IoYEVycm9yIGZldGNoaW5nIGZyb20gJHt1cmwudG9TdHJpbmcoKX06IFske3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fV0gJHttZXNzYWdlfWAsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCwgZXJyb3JEZXRhaWxzKTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSByZXF1ZXN0IG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIHRoZSBmZXRjaCBBUEkuXG4gKiBAcGFyYW0gcmVxdWVzdE9wdGlvbnMgLSBUaGUgdXNlci1kZWZpbmVkIHJlcXVlc3Qgb3B0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSBnZW5lcmF0ZWQgcmVxdWVzdCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBidWlsZEZldGNoT3B0aW9ucyhyZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHt9O1xuICAgIGlmICgocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnNpZ25hbCkgIT09IHVuZGVmaW5lZCB8fCAocmVxdWVzdE9wdGlvbnMgPT09IG51bGwgfHwgcmVxdWVzdE9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpID49IDApIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgaWYgKChyZXF1ZXN0T3B0aW9ucyA9PT0gbnVsbCB8fCByZXF1ZXN0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdE9wdGlvbnMudGltZW91dCkgPj0gMCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHJlcXVlc3RPcHRpb25zLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXF1ZXN0T3B0aW9ucyA9PT0gbnVsbCB8fCByZXF1ZXN0T3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVxdWVzdE9wdGlvbnMuc2lnbmFsKSB7XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmZXRjaE9wdGlvbnMuc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG4gICAgfVxuICAgIHJldHVybiBmZXRjaE9wdGlvbnM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFkZHMgY29udmVuaWVuY2UgaGVscGVyIG1ldGhvZHMgdG8gYSByZXNwb25zZSBvYmplY3QsIGluY2x1ZGluZyBzdHJlYW1cbiAqIGNodW5rcyAoYXMgbG9uZyBhcyBlYWNoIGNodW5rIGlzIGEgY29tcGxldGUgR2VuZXJhdGVDb250ZW50UmVzcG9uc2UgSlNPTikuXG4gKi9cbmZ1bmN0aW9uIGFkZEhlbHBlcnMocmVzcG9uc2UpIHtcbiAgICByZXNwb25zZS50ZXh0ID0gKCkgPT4ge1xuICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcyAmJiByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFRoaXMgcmVzcG9uc2UgaGFkICR7cmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGh9IGAgK1xuICAgICAgICAgICAgICAgICAgICBgY2FuZGlkYXRlcy4gUmV0dXJuaW5nIHRleHQgZnJvbSB0aGUgZmlyc3QgY2FuZGlkYXRlIG9ubHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQWNjZXNzIHJlc3BvbnNlLmNhbmRpZGF0ZXMgZGlyZWN0bHkgdG8gdXNlIHRoZSBvdGhlciBjYW5kaWRhdGVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihyZXNwb25zZS5jYW5kaWRhdGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGV4dChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UucHJvbXB0RmVlZGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGBUZXh0IG5vdCBhdmFpbGFibGUuICR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRPRE86IHJlbW92ZSBhdCBuZXh0IG1ham9yIHZlcnNpb25cbiAgICAgKi9cbiAgICByZXNwb25zZS5mdW5jdGlvbkNhbGwgPSAoKSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzICYmIHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhpcyByZXNwb25zZSBoYWQgJHtyZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aH0gYCArXG4gICAgICAgICAgICAgICAgICAgIGBjYW5kaWRhdGVzLiBSZXR1cm5pbmcgZnVuY3Rpb24gY2FsbHMgZnJvbSB0aGUgZmlyc3QgY2FuZGlkYXRlIG9ubHkuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgQWNjZXNzIHJlc3BvbnNlLmNhbmRpZGF0ZXMgZGlyZWN0bHkgdG8gdXNlIHRoZSBvdGhlciBjYW5kaWRhdGVzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihyZXNwb25zZS5jYW5kaWRhdGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGAke2Zvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKX1gLCByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHJlc3BvbnNlLmZ1bmN0aW9uQ2FsbCgpIGlzIGRlcHJlY2F0ZWQuIGAgK1xuICAgICAgICAgICAgICAgIGBVc2UgcmVzcG9uc2UuZnVuY3Rpb25DYWxscygpIGluc3RlYWQuYCk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0RnVuY3Rpb25DYWxscyhyZXNwb25zZSlbMF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzcG9uc2UucHJvbXB0RmVlZGJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlSZXNwb25zZUVycm9yKGBGdW5jdGlvbiBjYWxsIG5vdCBhdmFpbGFibGUuICR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmVzcG9uc2UuZnVuY3Rpb25DYWxscyA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgJiYgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGlzIHJlc3BvbnNlIGhhZCAke3Jlc3BvbnNlLmNhbmRpZGF0ZXMubGVuZ3RofSBgICtcbiAgICAgICAgICAgICAgICAgICAgYGNhbmRpZGF0ZXMuIFJldHVybmluZyBmdW5jdGlvbiBjYWxscyBmcm9tIHRoZSBmaXJzdCBjYW5kaWRhdGUgb25seS4gYCArXG4gICAgICAgICAgICAgICAgICAgIGBBY2Nlc3MgcmVzcG9uc2UuY2FuZGlkYXRlcyBkaXJlY3RseSB0byB1c2UgdGhlIG90aGVyIGNhbmRpZGF0ZXMuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFkQmFkRmluaXNoUmVhc29uKHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IoYCR7Zm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpfWAsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRGdW5jdGlvbkNhbGxzKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5wcm9tcHRGZWVkYmFjaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IoYEZ1bmN0aW9uIGNhbGwgbm90IGF2YWlsYWJsZS4gJHtmb3JtYXRCbG9ja0Vycm9yTWVzc2FnZShyZXNwb25zZSl9YCwgcmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG59XG4vKipcbiAqIFJldHVybnMgYWxsIHRleHQgZm91bmQgaW4gYWxsIHBhcnRzIG9mIGZpcnN0IGNhbmRpZGF0ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VGV4dChyZXNwb25zZSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCB0ZXh0U3RyaW5ncyA9IFtdO1xuICAgIGlmICgoX2IgPSAoX2EgPSByZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0uY29udGVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcnRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiAoX2QgPSAoX2MgPSByZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NbMF0uY29udGVudCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnBhcnRzKSB7XG4gICAgICAgICAgICBpZiAocGFydC50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGV4dFN0cmluZ3MucHVzaChwYXJ0LnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnQuZXhlY3V0YWJsZUNvZGUpIHtcbiAgICAgICAgICAgICAgICB0ZXh0U3RyaW5ncy5wdXNoKFwiXFxuYGBgXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJ0LmV4ZWN1dGFibGVDb2RlLmxhbmd1YWdlICtcbiAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIHBhcnQuZXhlY3V0YWJsZUNvZGUuY29kZSArXG4gICAgICAgICAgICAgICAgICAgIFwiXFxuYGBgXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRleHRTdHJpbmdzLnB1c2goXCJcXG5gYGBcXG5cIiArIHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdC5vdXRwdXQgKyBcIlxcbmBgYFxcblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGV4dFN0cmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGV4dFN0cmluZ3Muam9pbihcIlwiKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyBmdW5jdGlvbkNhbGwgb2YgZmlyc3QgY2FuZGlkYXRlLlxuICovXG5mdW5jdGlvbiBnZXRGdW5jdGlvbkNhbGxzKHJlc3BvbnNlKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbHMgPSBbXTtcbiAgICBpZiAoKF9iID0gKF9hID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5wYXJ0cykge1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgKF9kID0gKF9jID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jWzBdLmNvbnRlbnQpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5wYXJ0cykge1xuICAgICAgICAgICAgaWYgKHBhcnQuZnVuY3Rpb25DYWxsKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25DYWxscy5wdXNoKHBhcnQuZnVuY3Rpb25DYWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZnVuY3Rpb25DYWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbkNhbGxzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG5jb25zdCBiYWRGaW5pc2hSZWFzb25zID0gW1xuICAgIEZpbmlzaFJlYXNvbi5SRUNJVEFUSU9OLFxuICAgIEZpbmlzaFJlYXNvbi5TQUZFVFksXG4gICAgRmluaXNoUmVhc29uLkxBTkdVQUdFLFxuXTtcbmZ1bmN0aW9uIGhhZEJhZEZpbmlzaFJlYXNvbihjYW5kaWRhdGUpIHtcbiAgICByZXR1cm4gKCEhY2FuZGlkYXRlLmZpbmlzaFJlYXNvbiAmJlxuICAgICAgICBiYWRGaW5pc2hSZWFzb25zLmluY2x1ZGVzKGNhbmRpZGF0ZS5maW5pc2hSZWFzb24pKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3BvbnNlKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgbGV0IG1lc3NhZ2UgPSBcIlwiO1xuICAgIGlmICgoIXJlc3BvbnNlLmNhbmRpZGF0ZXMgfHwgcmVzcG9uc2UuY2FuZGlkYXRlcy5sZW5ndGggPT09IDApICYmXG4gICAgICAgIHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJSZXNwb25zZSB3YXMgYmxvY2tlZFwiO1xuICAgICAgICBpZiAoKF9hID0gcmVzcG9uc2UucHJvbXB0RmVlZGJhY2spID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ibG9ja1JlYXNvbikge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgIGR1ZSB0byAke3Jlc3BvbnNlLnByb21wdEZlZWRiYWNrLmJsb2NrUmVhc29ufWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChfYiA9IHJlc3BvbnNlLnByb21wdEZlZWRiYWNrKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmxvY2tSZWFzb25NZXNzYWdlKSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA6ICR7cmVzcG9uc2UucHJvbXB0RmVlZGJhY2suYmxvY2tSZWFzb25NZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKF9jID0gcmVzcG9uc2UuY2FuZGlkYXRlcykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jWzBdKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0Q2FuZGlkYXRlID0gcmVzcG9uc2UuY2FuZGlkYXRlc1swXTtcbiAgICAgICAgaWYgKGhhZEJhZEZpbmlzaFJlYXNvbihmaXJzdENhbmRpZGF0ZSkpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYENhbmRpZGF0ZSB3YXMgYmxvY2tlZCBkdWUgdG8gJHtmaXJzdENhbmRpZGF0ZS5maW5pc2hSZWFzb259YDtcbiAgICAgICAgICAgIGlmIChmaXJzdENhbmRpZGF0ZS5maW5pc2hNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgOiAke2ZpcnN0Q2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2V9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbnR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgcmVzcG9uc2VMaW5lUkUgPSAvXmRhdGFcXDogKC4qKSg/OlxcblxcbnxcXHJcXHJ8XFxyXFxuXFxyXFxuKS87XG4vKipcbiAqIFByb2Nlc3MgYSByZXNwb25zZS5ib2R5IHN0cmVhbSBmcm9tIHRoZSBiYWNrZW5kIGFuZCByZXR1cm4gYW5cbiAqIGl0ZXJhdG9yIHRoYXQgcHJvdmlkZXMgb25lIGNvbXBsZXRlIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIGF0IGEgdGltZVxuICogYW5kIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBzaW5nbGUgYWdncmVnYXRlZFxuICogR2VuZXJhdGVDb250ZW50UmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHJlc3BvbnNlIC0gUmVzcG9uc2UgZnJvbSBhIGZldGNoIGNhbGxcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1N0cmVhbShyZXNwb25zZSkge1xuICAgIGNvbnN0IGlucHV0U3RyZWFtID0gcmVzcG9uc2UuYm9keS5waXBlVGhyb3VnaChuZXcgVGV4dERlY29kZXJTdHJlYW0oXCJ1dGY4XCIsIHsgZmF0YWw6IHRydWUgfSkpO1xuICAgIGNvbnN0IHJlc3BvbnNlU3RyZWFtID0gZ2V0UmVzcG9uc2VTdHJlYW0oaW5wdXRTdHJlYW0pO1xuICAgIGNvbnN0IFtzdHJlYW0xLCBzdHJlYW0yXSA9IHJlc3BvbnNlU3RyZWFtLnRlZSgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHN0cmVhbTogZ2VuZXJhdGVSZXNwb25zZVNlcXVlbmNlKHN0cmVhbTEpLFxuICAgICAgICByZXNwb25zZTogZ2V0UmVzcG9uc2VQcm9taXNlKHN0cmVhbTIpLFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiBnZXRSZXNwb25zZVByb21pc2Uoc3RyZWFtKSB7XG4gICAgY29uc3QgYWxsUmVzcG9uc2VzID0gW107XG4gICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gYWRkSGVscGVycyhhZ2dyZWdhdGVSZXNwb25zZXMoYWxsUmVzcG9uc2VzKSk7XG4gICAgICAgIH1cbiAgICAgICAgYWxsUmVzcG9uc2VzLnB1c2godmFsdWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdlbmVyYXRlUmVzcG9uc2VTZXF1ZW5jZShzdHJlYW0pIHtcbiAgICByZXR1cm4gX19hc3luY0dlbmVyYXRvcih0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKiBnZW5lcmF0ZVJlc3BvbnNlU2VxdWVuY2VfMSgpIHtcbiAgICAgICAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0geWllbGQgX19hd2FpdChyZWFkZXIucmVhZCgpKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCB5aWVsZCBfX2F3YWl0KGFkZEhlbHBlcnModmFsdWUpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBSZWFkcyBhIHJhdyBzdHJlYW0gZnJvbSB0aGUgZmV0Y2ggcmVzcG9uc2UgYW5kIGpvaW4gaW5jb21wbGV0ZVxuICogY2h1bmtzLCByZXR1cm5pbmcgYSBuZXcgc3RyZWFtIHRoYXQgcHJvdmlkZXMgYSBzaW5nbGUgY29tcGxldGVcbiAqIEdlbmVyYXRlQ29udGVudFJlc3BvbnNlIGluIGVhY2ggaXRlcmF0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRSZXNwb25zZVN0cmVhbShpbnB1dFN0cmVhbSkge1xuICAgIGNvbnN0IHJlYWRlciA9IGlucHV0U3RyZWFtLmdldFJlYWRlcigpO1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgIHN0YXJ0KGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGV4dCA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm4gcHVtcCgpO1xuICAgICAgICAgICAgZnVuY3Rpb24gcHVtcCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyXG4gICAgICAgICAgICAgICAgICAgIC5yZWFkKClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHsgdmFsdWUsIGRvbmUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUZXh0LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZXJyb3IobmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbVwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0ICs9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBjdXJyZW50VGV4dC5tYXRjaChyZXNwb25zZUxpbmVSRSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFJlc3BvbnNlID0gSlNPTi5wYXJzZShtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuZXJyb3IobmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFcnJvciBwYXJzaW5nIEpTT04gcmVzcG9uc2U6IFwiJHttYXRjaFsxXX1cImApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUocGFyc2VkUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRleHQgPSBjdXJyZW50VGV4dC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gY3VycmVudFRleHQubWF0Y2gocmVzcG9uc2VMaW5lUkUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlcnIgPSBlO1xuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBlLnN0YWNrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJQWJvcnRFcnJvcihcIlJlcXVlc3QgYWJvcnRlZCB3aGVuIHJlYWRpbmcgZnJvbSB0aGUgc3RyZWFtXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRXJyb3IgcmVhZGluZyBmcm9tIHRoZSBzdHJlYW1cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBzdHJlYW07XG59XG4vKipcbiAqIEFnZ3JlZ2F0ZXMgYW4gYXJyYXkgb2YgYEdlbmVyYXRlQ29udGVudFJlc3BvbnNlYHMgaW50byBhIHNpbmdsZVxuICogR2VuZXJhdGVDb250ZW50UmVzcG9uc2UuXG4gKi9cbmZ1bmN0aW9uIGFnZ3JlZ2F0ZVJlc3BvbnNlcyhyZXNwb25zZXMpIHtcbiAgICBjb25zdCBsYXN0UmVzcG9uc2UgPSByZXNwb25zZXNbcmVzcG9uc2VzLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IGFnZ3JlZ2F0ZWRSZXNwb25zZSA9IHtcbiAgICAgICAgcHJvbXB0RmVlZGJhY2s6IGxhc3RSZXNwb25zZSA9PT0gbnVsbCB8fCBsYXN0UmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3RSZXNwb25zZS5wcm9tcHRGZWVkYmFjayxcbiAgICB9O1xuICAgIGZvciAoY29uc3QgcmVzcG9uc2Ugb2YgcmVzcG9uc2VzKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5jYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICBsZXQgY2FuZGlkYXRlSW5kZXggPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgcmVzcG9uc2UuY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFhZ2dyZWdhdGVkUmVzcG9uc2UuY2FuZGlkYXRlc1tjYW5kaWRhdGVJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGNhbmRpZGF0ZUluZGV4LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBLZWVwIG92ZXJ3cml0aW5nLCB0aGUgbGFzdCBvbmUgd2lsbCBiZSBmaW5hbFxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jaXRhdGlvbk1ldGFkYXRhID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmNpdGF0aW9uTWV0YWRhdGE7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmdyb3VuZGluZ01ldGFkYXRhID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmdyb3VuZGluZ01ldGFkYXRhO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5maW5pc2hSZWFzb24gPVxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuZmluaXNoUmVhc29uO1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5maW5pc2hNZXNzYWdlID1cbiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLmZpbmlzaE1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLnNhZmV0eVJhdGluZ3MgPVxuICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGUuc2FmZXR5UmF0aW5ncztcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDYW5kaWRhdGVzIHNob3VsZCBhbHdheXMgaGF2ZSBjb250ZW50IGFuZCBwYXJ0cywgYnV0IHRoaXMgaGFuZGxlc1xuICAgICAgICAgICAgICAgICAqIHBvc3NpYmxlIG1hbGZvcm1lZCByZXNwb25zZXMuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5jb250ZW50ICYmIGNhbmRpZGF0ZS5jb250ZW50LnBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS5jYW5kaWRhdGVzW2NhbmRpZGF0ZUluZGV4XS5jb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6IGNhbmRpZGF0ZS5jb250ZW50LnJvbGUgfHwgXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJ0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQudGV4dCA9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0LmZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuZnVuY3Rpb25DYWxsID0gcGFydC5mdW5jdGlvbkNhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5leGVjdXRhYmxlQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuZXhlY3V0YWJsZUNvZGUgPSBwYXJ0LmV4ZWN1dGFibGVDb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcnQuY29kZUV4ZWN1dGlvblJlc3VsdCA9IHBhcnQuY29kZUV4ZWN1dGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXdQYXJ0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYXJ0LnRleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWdncmVnYXRlZFJlc3BvbnNlLmNhbmRpZGF0ZXNbY2FuZGlkYXRlSW5kZXhdLmNvbnRlbnQucGFydHMucHVzaChuZXdQYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbmRpZGF0ZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc3BvbnNlLnVzYWdlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0ZWRSZXNwb25zZS51c2FnZU1ldGFkYXRhID0gcmVzcG9uc2UudXNhZ2VNZXRhZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWdncmVnYXRlZFJlc3BvbnNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDb250ZW50U3RyZWFtKGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suU1RSRUFNX0dFTkVSQVRFX0NPTlRFTlQsIGFwaUtleSwgXG4gICAgLyogc3RyZWFtICovIHRydWUsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4gcHJvY2Vzc1N0cmVhbShyZXNwb25zZSk7XG59XG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUNvbnRlbnQoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFrZU1vZGVsUmVxdWVzdChtb2RlbCwgVGFzay5HRU5FUkFURV9DT05URU5ULCBhcGlLZXksIFxuICAgIC8qIHN0cmVhbSAqLyBmYWxzZSwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zdCBlbmhhbmNlZFJlc3BvbnNlID0gYWRkSGVscGVycyhyZXNwb25zZUpzb24pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3BvbnNlOiBlbmhhbmNlZFJlc3BvbnNlLFxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBmb3JtYXRTeXN0ZW1JbnN0cnVjdGlvbihpbnB1dCkge1xuICAgIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICAgaWYgKGlucHV0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7IHJvbGU6IFwic3lzdGVtXCIsIHBhcnRzOiBbeyB0ZXh0OiBpbnB1dCB9XSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbnB1dC50ZXh0KSB7XG4gICAgICAgIHJldHVybiB7IHJvbGU6IFwic3lzdGVtXCIsIHBhcnRzOiBbaW5wdXRdIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGlucHV0LnBhcnRzKSB7XG4gICAgICAgIGlmICghaW5wdXQucm9sZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcm9sZTogXCJzeXN0ZW1cIiwgcGFydHM6IGlucHV0LnBhcnRzIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpIHtcbiAgICBsZXQgbmV3UGFydHMgPSBbXTtcbiAgICBpZiAodHlwZW9mIHJlcXVlc3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbmV3UGFydHMgPSBbeyB0ZXh0OiByZXF1ZXN0IH1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0T3JTdHJpbmcgb2YgcmVxdWVzdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJ0T3JTdHJpbmcgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBuZXdQYXJ0cy5wdXNoKHsgdGV4dDogcGFydE9yU3RyaW5nIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0T3JTdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhc3NpZ25Sb2xlVG9QYXJ0c0FuZFZhbGlkYXRlU2VuZE1lc3NhZ2VSZXF1ZXN0KG5ld1BhcnRzKTtcbn1cbi8qKlxuICogV2hlbiBtdWx0aXBsZSBQYXJ0IHR5cGVzIChpLmUuIEZ1bmN0aW9uUmVzcG9uc2VQYXJ0IGFuZCBUZXh0UGFydCkgYXJlXG4gKiBwYXNzZWQgaW4gYSBzaW5nbGUgUGFydCBhcnJheSwgd2UgbWF5IG5lZWQgdG8gYXNzaWduIGRpZmZlcmVudCByb2xlcyB0byBlYWNoXG4gKiBwYXJ0LiBDdXJyZW50bHkgb25seSBGdW5jdGlvblJlc3BvbnNlUGFydCByZXF1aXJlcyBhIHJvbGUgb3RoZXIgdGhhbiAndXNlcicuXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHBhcnRzIEFycmF5IG9mIHBhcnRzIHRvIHBhc3MgdG8gdGhlIG1vZGVsXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjb250ZW50IGl0ZW1zXG4gKi9cbmZ1bmN0aW9uIGFzc2lnblJvbGVUb1BhcnRzQW5kVmFsaWRhdGVTZW5kTWVzc2FnZVJlcXVlc3QocGFydHMpIHtcbiAgICBjb25zdCB1c2VyQ29udGVudCA9IHsgcm9sZTogXCJ1c2VyXCIsIHBhcnRzOiBbXSB9O1xuICAgIGNvbnN0IGZ1bmN0aW9uQ29udGVudCA9IHsgcm9sZTogXCJmdW5jdGlvblwiLCBwYXJ0czogW10gfTtcbiAgICBsZXQgaGFzVXNlckNvbnRlbnQgPSBmYWxzZTtcbiAgICBsZXQgaGFzRnVuY3Rpb25Db250ZW50ID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uUmVzcG9uc2VcIiBpbiBwYXJ0KSB7XG4gICAgICAgICAgICBmdW5jdGlvbkNvbnRlbnQucGFydHMucHVzaChwYXJ0KTtcbiAgICAgICAgICAgIGhhc0Z1bmN0aW9uQ29udGVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1c2VyQ29udGVudC5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgICAgICAgaGFzVXNlckNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNVc2VyQ29udGVudCAmJiBoYXNGdW5jdGlvbkNvbnRlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiV2l0aGluIGEgc2luZ2xlIG1lc3NhZ2UsIEZ1bmN0aW9uUmVzcG9uc2UgY2Fubm90IGJlIG1peGVkIHdpdGggb3RoZXIgdHlwZSBvZiBwYXJ0IGluIHRoZSByZXF1ZXN0IGZvciBzZW5kaW5nIGNoYXQgbWVzc2FnZS5cIik7XG4gICAgfVxuICAgIGlmICghaGFzVXNlckNvbnRlbnQgJiYgIWhhc0Z1bmN0aW9uQ29udGVudCkge1xuICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoXCJObyBjb250ZW50IGlzIHByb3ZpZGVkIGZvciBzZW5kaW5nIGNoYXQgbWVzc2FnZS5cIik7XG4gICAgfVxuICAgIGlmIChoYXNVc2VyQ29udGVudCkge1xuICAgICAgICByZXR1cm4gdXNlckNvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbkNvbnRlbnQ7XG59XG5mdW5jdGlvbiBmb3JtYXRDb3VudFRva2Vuc0lucHV0KHBhcmFtcywgbW9kZWxQYXJhbXMpIHtcbiAgICB2YXIgX2E7XG4gICAgbGV0IGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QgPSB7XG4gICAgICAgIG1vZGVsOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMubW9kZWwsXG4gICAgICAgIGdlbmVyYXRpb25Db25maWc6IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5nZW5lcmF0aW9uQ29uZmlnLFxuICAgICAgICBzYWZldHlTZXR0aW5nczogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLnNhZmV0eVNldHRpbmdzLFxuICAgICAgICB0b29sczogbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLnRvb2xzLFxuICAgICAgICB0b29sQ29uZmlnOiBtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXMudG9vbENvbmZpZyxcbiAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IG1vZGVsUGFyYW1zID09PSBudWxsIHx8IG1vZGVsUGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtb2RlbFBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbixcbiAgICAgICAgY2FjaGVkQ29udGVudDogKF9hID0gbW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lLFxuICAgICAgICBjb250ZW50czogW10sXG4gICAgfTtcbiAgICBjb25zdCBjb250YWluc0dlbmVyYXRlQ29udGVudFJlcXVlc3QgPSBwYXJhbXMuZ2VuZXJhdGVDb250ZW50UmVxdWVzdCAhPSBudWxsO1xuICAgIGlmIChwYXJhbXMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5zR2VuZXJhdGVDb250ZW50UmVxdWVzdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKFwiQ291bnRUb2tlbnNSZXF1ZXN0IG11c3QgaGF2ZSBvbmUgb2YgY29udGVudHMgb3IgZ2VuZXJhdGVDb250ZW50UmVxdWVzdCwgbm90IGJvdGguXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QuY29udGVudHMgPSBwYXJhbXMuY29udGVudHM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRhaW5zR2VuZXJhdGVDb250ZW50UmVxdWVzdCkge1xuICAgICAgICBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBmb3JtYXR0ZWRHZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0KSwgcGFyYW1zLmdlbmVyYXRlQ29udGVudFJlcXVlc3QpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQXJyYXkgb3Igc3RyaW5nXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHBhcmFtcyk7XG4gICAgICAgIGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QuY29udGVudHMgPSBbY29udGVudF07XG4gICAgfVxuICAgIHJldHVybiB7IGdlbmVyYXRlQ29udGVudFJlcXVlc3Q6IGZvcm1hdHRlZEdlbmVyYXRlQ29udGVudFJlcXVlc3QgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEdlbmVyYXRlQ29udGVudElucHV0KHBhcmFtcykge1xuICAgIGxldCBmb3JtYXR0ZWRSZXF1ZXN0O1xuICAgIGlmIChwYXJhbXMuY29udGVudHMpIHtcbiAgICAgICAgZm9ybWF0dGVkUmVxdWVzdCA9IHBhcmFtcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEFycmF5IG9yIHN0cmluZ1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZm9ybWF0TmV3Q29udGVudChwYXJhbXMpO1xuICAgICAgICBmb3JtYXR0ZWRSZXF1ZXN0ID0geyBjb250ZW50czogW2NvbnRlbnRdIH07XG4gICAgfVxuICAgIGlmIChwYXJhbXMuc3lzdGVtSW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgZm9ybWF0dGVkUmVxdWVzdC5zeXN0ZW1JbnN0cnVjdGlvbiA9IGZvcm1hdFN5c3RlbUluc3RydWN0aW9uKHBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBmb3JtYXR0ZWRSZXF1ZXN0O1xufVxuZnVuY3Rpb24gZm9ybWF0RW1iZWRDb250ZW50SW5wdXQocGFyYW1zKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShwYXJhbXMpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHBhcmFtcyk7XG4gICAgICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIGh0dHBzOi8vYWkuZ29vZ2xlLmRldi9hcGkvcmVzdC92MWJldGEvQ29udGVudCNwYXJ0XG5jb25zdCBWQUxJRF9QQVJUX0ZJRUxEUyA9IFtcbiAgICBcInRleHRcIixcbiAgICBcImlubGluZURhdGFcIixcbiAgICBcImZ1bmN0aW9uQ2FsbFwiLFxuICAgIFwiZnVuY3Rpb25SZXNwb25zZVwiLFxuICAgIFwiZXhlY3V0YWJsZUNvZGVcIixcbiAgICBcImNvZGVFeGVjdXRpb25SZXN1bHRcIixcbl07XG5jb25zdCBWQUxJRF9QQVJUU19QRVJfUk9MRSA9IHtcbiAgICB1c2VyOiBbXCJ0ZXh0XCIsIFwiaW5saW5lRGF0YVwiXSxcbiAgICBmdW5jdGlvbjogW1wiZnVuY3Rpb25SZXNwb25zZVwiXSxcbiAgICBtb2RlbDogW1widGV4dFwiLCBcImZ1bmN0aW9uQ2FsbFwiLCBcImV4ZWN1dGFibGVDb2RlXCIsIFwiY29kZUV4ZWN1dGlvblJlc3VsdFwiXSxcbiAgICAvLyBTeXN0ZW0gaW5zdHJ1Y3Rpb25zIHNob3VsZG4ndCBiZSBpbiBoaXN0b3J5IGFueXdheS5cbiAgICBzeXN0ZW06IFtcInRleHRcIl0sXG59O1xuZnVuY3Rpb24gdmFsaWRhdGVDaGF0SGlzdG9yeShoaXN0b3J5KSB7XG4gICAgbGV0IHByZXZDb250ZW50ID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCBjdXJyQ29udGVudCBvZiBoaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcm9sZSwgcGFydHMgfSA9IGN1cnJDb250ZW50O1xuICAgICAgICBpZiAoIXByZXZDb250ZW50ICYmIHJvbGUgIT09IFwidXNlclwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYEZpcnN0IGNvbnRlbnQgc2hvdWxkIGJlIHdpdGggcm9sZSAndXNlcicsIGdvdCAke3JvbGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFQT1NTSUJMRV9ST0xFUy5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKGBFYWNoIGl0ZW0gc2hvdWxkIGluY2x1ZGUgcm9sZSBmaWVsZC4gR290ICR7cm9sZX0gYnV0IHZhbGlkIHJvbGVzIGFyZTogJHtKU09OLnN0cmluZ2lmeShQT1NTSUJMRV9ST0xFUyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcnRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiQ29udGVudCBzaG91bGQgaGF2ZSAncGFydHMnIHByb3BlcnR5IHdpdGggYW4gYXJyYXkgb2YgUGFydHNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSUVycm9yKFwiRWFjaCBDb250ZW50IHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBwYXJ0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvdW50RmllbGRzID0ge1xuICAgICAgICAgICAgdGV4dDogMCxcbiAgICAgICAgICAgIGlubGluZURhdGE6IDAsXG4gICAgICAgICAgICBmdW5jdGlvbkNhbGw6IDAsXG4gICAgICAgICAgICBmdW5jdGlvblJlc3BvbnNlOiAwLFxuICAgICAgICAgICAgZmlsZURhdGE6IDAsXG4gICAgICAgICAgICBleGVjdXRhYmxlQ29kZTogMCxcbiAgICAgICAgICAgIGNvZGVFeGVjdXRpb25SZXN1bHQ6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgVkFMSURfUEFSVF9GSUVMRFMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnRGaWVsZHNba2V5XSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWxpZFBhcnRzID0gVkFMSURfUEFSVFNfUEVSX1JPTEVbcm9sZV07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFZBTElEX1BBUlRfRklFTERTKSB7XG4gICAgICAgICAgICBpZiAoIXZhbGlkUGFydHMuaW5jbHVkZXMoa2V5KSAmJiBjb3VudEZpZWxkc1trZXldID4gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHb29nbGVHZW5lcmF0aXZlQUlFcnJvcihgQ29udGVudCB3aXRoIHJvbGUgJyR7cm9sZX0nIGNhbid0IGNvbnRhaW4gJyR7a2V5fScgcGFydGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHByZXZDb250ZW50ID0gdHJ1ZTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVzcG9uc2UgaXMgdmFsaWQgKGNvdWxkIGJlIGFwcGVuZGVkIHRvIHRoZSBoaXN0b3J5KSwgZmxhc2Ugb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHJlc3BvbnNlLmNhbmRpZGF0ZXMgPT09IHVuZGVmaW5lZCB8fCByZXNwb25zZS5jYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGNvbnRlbnQgPSAoX2EgPSByZXNwb25zZS5jYW5kaWRhdGVzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udGVudDtcbiAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQucGFydHMgPT09IHVuZGVmaW5lZCB8fCBjb250ZW50LnBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgcGFydCBvZiBjb250ZW50LnBhcnRzKSB7XG4gICAgICAgIGlmIChwYXJ0ID09PSB1bmRlZmluZWQgfHwgT2JqZWN0LmtleXMocGFydCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnQudGV4dCAhPT0gdW5kZWZpbmVkICYmIHBhcnQudGV4dCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEbyBub3QgbG9nIGEgbWVzc2FnZSBmb3IgdGhpcyBlcnJvci5cbiAqL1xuY29uc3QgU0lMRU5UX0VSUk9SID0gXCJTSUxFTlRfRVJST1JcIjtcbi8qKlxuICogQ2hhdFNlc3Npb24gY2xhc3MgdGhhdCBlbmFibGVzIHNlbmRpbmcgY2hhdCBtZXNzYWdlcyBhbmQgc3RvcmVzXG4gKiBoaXN0b3J5IG9mIHNlbnQgYW5kIHJlY2VpdmVkIG1lc3NhZ2VzIHNvIGZhci5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIENoYXRTZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG1vZGVsLCBwYXJhbXMsIF9yZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuX3JlcXVlc3RPcHRpb25zID0gX3JlcXVlc3RPcHRpb25zO1xuICAgICAgICB0aGlzLl9oaXN0b3J5ID0gW107XG4gICAgICAgIHRoaXMuX3NlbmRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHRoaXMuX2FwaUtleSA9IGFwaUtleTtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5oaXN0b3J5KSB7XG4gICAgICAgICAgICB2YWxpZGF0ZUNoYXRIaXN0b3J5KHBhcmFtcy5oaXN0b3J5KTtcbiAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkgPSBwYXJhbXMuaGlzdG9yeTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjaGF0IGhpc3Rvcnkgc28gZmFyLiBCbG9ja2VkIHByb21wdHMgYXJlIG5vdCBhZGRlZCB0byBoaXN0b3J5LlxuICAgICAqIEJsb2NrZWQgY2FuZGlkYXRlcyBhcmUgbm90IGFkZGVkIHRvIGhpc3RvcnksIG5vciBhcmUgdGhlIHByb21wdHMgdGhhdFxuICAgICAqIGdlbmVyYXRlZCB0aGVtLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEhpc3RvcnkoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NlbmRQcm9taXNlO1xuICAgICAgICByZXR1cm4gdGhpcy5faGlzdG9yeTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjaGF0IG1lc3NhZ2UgYW5kIHJlY2VpdmVzIGEgbm9uLXN0cmVhbWluZ1xuICAgICAqIHtAbGluayBHZW5lcmF0ZUNvbnRlbnRSZXN1bHR9LlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2UocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiAoX2IgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICB0b29sczogKF9jID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b29scyxcbiAgICAgICAgICAgIHRvb2xDb25maWc6IChfZCA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudG9vbENvbmZpZyxcbiAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiAoX2UgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgICAgICAgY2FjaGVkQ29udGVudDogKF9mID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWNoZWRDb250ZW50LFxuICAgICAgICAgICAgY29udGVudHM6IFsuLi50aGlzLl9oaXN0b3J5LCBuZXdDb250ZW50XSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIGxldCBmaW5hbFJlc3VsdDtcbiAgICAgICAgLy8gQWRkIG9udG8gdGhlIGNoYWluLlxuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IHRoaXMuX3NlbmRQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiBnZW5lcmF0ZUNvbnRlbnQodGhpcy5fYXBpS2V5LCB0aGlzLm1vZGVsLCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LCBjaGF0U2Vzc2lvblJlcXVlc3RPcHRpb25zKSlcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkUmVzcG9uc2UocmVzdWx0LnJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnkucHVzaChuZXdDb250ZW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNvbnRlbnQgPSBPYmplY3QuYXNzaWduKHsgcGFydHM6IFtdLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzcG9uc2Ugc2VlbXMgdG8gY29tZSBiYWNrIHdpdGhvdXQgYSByb2xlIHNldC5cbiAgICAgICAgICAgICAgICAgICAgcm9sZTogXCJtb2RlbFwiIH0sIChfYSA9IHJlc3VsdC5yZXNwb25zZS5jYW5kaWRhdGVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKHJlc3BvbnNlQ29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBibG9ja0Vycm9yTWVzc2FnZSA9IGZvcm1hdEJsb2NrRXJyb3JNZXNzYWdlKHJlc3VsdC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrRXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihgc2VuZE1lc3NhZ2UoKSB3YXMgdW5zdWNjZXNzZnVsLiAke2Jsb2NrRXJyb3JNZXNzYWdlfS4gSW5zcGVjdCByZXNwb25zZSBvYmplY3QgZm9yIGRldGFpbHMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxSZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIC8vIFJlc2V0cyBfc2VuZFByb21pc2UgdG8gYXZvaWQgc3Vic2VxdWVudCBjYWxscyBmYWlsaW5nIGFuZCB0aHJvdyBlcnJvci5cbiAgICAgICAgICAgIHRoaXMuX3NlbmRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIHJldHVybiBmaW5hbFJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYSBjaGF0IG1lc3NhZ2UgYW5kIHJlY2VpdmVzIHRoZSByZXNwb25zZSBhcyBhXG4gICAgICoge0BsaW5rIEdlbmVyYXRlQ29udGVudFN0cmVhbVJlc3VsdH0gY29udGFpbmluZyBhbiBpdGVyYWJsZSBzdHJlYW1cbiAgICAgKiBhbmQgYSByZXNwb25zZSBwcm9taXNlLlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1lc3NhZ2VTdHJlYW0ocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2VuZFByb21pc2U7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBmb3JtYXROZXdDb250ZW50KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0ID0ge1xuICAgICAgICAgICAgc2FmZXR5U2V0dGluZ3M6IChfYSA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2FmZXR5U2V0dGluZ3MsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiAoX2IgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICB0b29sczogKF9jID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50b29scyxcbiAgICAgICAgICAgIHRvb2xDb25maWc6IChfZCA9IHRoaXMucGFyYW1zKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QudG9vbENvbmZpZyxcbiAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiAoX2UgPSB0aGlzLnBhcmFtcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN5c3RlbUluc3RydWN0aW9uLFxuICAgICAgICAgICAgY2FjaGVkQ29udGVudDogKF9mID0gdGhpcy5wYXJhbXMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWNoZWRDb250ZW50LFxuICAgICAgICAgICAgY29udGVudHM6IFsuLi50aGlzLl9oaXN0b3J5LCBuZXdDb250ZW50XSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2hhdFNlc3Npb25SZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHN0cmVhbVByb21pc2UgPSBnZW5lcmF0ZUNvbnRlbnRTdHJlYW0odGhpcy5fYXBpS2V5LCB0aGlzLm1vZGVsLCBnZW5lcmF0ZUNvbnRlbnRSZXF1ZXN0LCBjaGF0U2Vzc2lvblJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgLy8gQWRkIG9udG8gdGhlIGNoYWluLlxuICAgICAgICB0aGlzLl9zZW5kUHJvbWlzZSA9IHRoaXMuX3NlbmRQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiBzdHJlYW1Qcm9taXNlKVxuICAgICAgICAgICAgLy8gVGhpcyBtdXN0IGJlIGhhbmRsZWQgdG8gYXZvaWQgdW5oYW5kbGVkIHJlamVjdGlvbiwgYnV0IGp1bXBcbiAgICAgICAgICAgIC8vIHRvIHRoZSBmaW5hbCBjYXRjaCBibG9jayB3aXRoIGEgbGFiZWwgdG8gbm90IGxvZyB0aGlzIGVycm9yLlxuICAgICAgICAgICAgLmNhdGNoKChfaWdub3JlZCkgPT4ge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFNJTEVOVF9FUlJPUik7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoc3RyZWFtUmVzdWx0KSA9PiBzdHJlYW1SZXN1bHQucmVzcG9uc2UpXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkUmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeS5wdXNoKG5ld0NvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlQ29udGVudCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLmNhbmRpZGF0ZXNbMF0uY29udGVudCk7XG4gICAgICAgICAgICAgICAgLy8gUmVzcG9uc2Ugc2VlbXMgdG8gY29tZSBiYWNrIHdpdGhvdXQgYSByb2xlIHNldC5cbiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlQ29udGVudC5yb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudC5yb2xlID0gXCJtb2RlbFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5LnB1c2gocmVzcG9uc2VDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrRXJyb3JNZXNzYWdlID0gZm9ybWF0QmxvY2tFcnJvck1lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmIChibG9ja0Vycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYHNlbmRNZXNzYWdlU3RyZWFtKCkgd2FzIHVuc3VjY2Vzc2Z1bC4gJHtibG9ja0Vycm9yTWVzc2FnZX0uIEluc3BlY3QgcmVzcG9uc2Ugb2JqZWN0IGZvciBkZXRhaWxzLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgLy8gRXJyb3JzIGluIHN0cmVhbVByb21pc2UgYXJlIGFscmVhZHkgY2F0Y2hhYmxlIGJ5IHRoZSB1c2VyIGFzXG4gICAgICAgICAgICAvLyBzdHJlYW1Qcm9taXNlIGlzIHJldHVybmVkLlxuICAgICAgICAgICAgLy8gQXZvaWQgZHVwbGljYXRpbmcgdGhlIGVycm9yIG1lc3NhZ2UgaW4gbG9ncy5cbiAgICAgICAgICAgIGlmIChlLm1lc3NhZ2UgIT09IFNJTEVOVF9FUlJPUikge1xuICAgICAgICAgICAgICAgIC8vIFVzZXJzIGRvIG5vdCBoYXZlIGFjY2VzcyB0byBfc2VuZFByb21pc2UgdG8gY2F0Y2ggZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gZG93bnN0cmVhbSBmcm9tIHN0cmVhbVByb21pc2UsIHNvIHRoZXkgc2hvdWxkIG5vdCB0aHJvdy5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbVByb21pc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY291bnRUb2tlbnMoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCBzaW5nbGVSZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbWFrZU1vZGVsUmVxdWVzdChtb2RlbCwgVGFzay5DT1VOVF9UT0tFTlMsIGFwaUtleSwgZmFsc2UsIEpTT04uc3RyaW5naWZ5KHBhcmFtcyksIHNpbmdsZVJlcXVlc3RPcHRpb25zKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyNCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZW1iZWRDb250ZW50KGFwaUtleSwgbW9kZWwsIHBhcmFtcywgcmVxdWVzdE9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suRU1CRURfQ09OVEVOVCwgYXBpS2V5LCBmYWxzZSwgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5hc3luYyBmdW5jdGlvbiBiYXRjaEVtYmVkQ29udGVudHMoYXBpS2V5LCBtb2RlbCwgcGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgIGNvbnN0IHJlcXVlc3RzV2l0aE1vZGVsID0gcGFyYW1zLnJlcXVlc3RzLm1hcCgocmVxdWVzdCkgPT4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBtb2RlbCB9KTtcbiAgICB9KTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG1ha2VNb2RlbFJlcXVlc3QobW9kZWwsIFRhc2suQkFUQ0hfRU1CRURfQ09OVEVOVFMsIGFwaUtleSwgZmFsc2UsIEpTT04uc3RyaW5naWZ5KHsgcmVxdWVzdHM6IHJlcXVlc3RzV2l0aE1vZGVsIH0pLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjQgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ2xhc3MgZm9yIGdlbmVyYXRpdmUgbW9kZWwgQVBJcy5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR2VuZXJhdGl2ZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXksIG1vZGVsUGFyYW1zLCBfcmVxdWVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICAgICAgdGhpcy5fcmVxdWVzdE9wdGlvbnMgPSBfcmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIGlmIChtb2RlbFBhcmFtcy5tb2RlbC5pbmNsdWRlcyhcIi9cIikpIHtcbiAgICAgICAgICAgIC8vIE1vZGVscyBtYXkgYmUgbmFtZWQgXCJtb2RlbHMvbW9kZWwtbmFtZVwiIG9yIFwidHVuZWRNb2RlbHMvbW9kZWwtbmFtZVwiXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWxQYXJhbXMubW9kZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBwYXRoIGlzIG5vdCBpbmNsdWRlZCwgYXNzdW1lIGl0J3MgYSBub24tdHVuZWQgbW9kZWwuXG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gYG1vZGVscy8ke21vZGVsUGFyYW1zLm1vZGVsfWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uQ29uZmlnID0gbW9kZWxQYXJhbXMuZ2VuZXJhdGlvbkNvbmZpZyB8fCB7fTtcbiAgICAgICAgdGhpcy5zYWZldHlTZXR0aW5ncyA9IG1vZGVsUGFyYW1zLnNhZmV0eVNldHRpbmdzIHx8IFtdO1xuICAgICAgICB0aGlzLnRvb2xzID0gbW9kZWxQYXJhbXMudG9vbHM7XG4gICAgICAgIHRoaXMudG9vbENvbmZpZyA9IG1vZGVsUGFyYW1zLnRvb2xDb25maWc7XG4gICAgICAgIHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24gPSBmb3JtYXRTeXN0ZW1JbnN0cnVjdGlvbihtb2RlbFBhcmFtcy5zeXN0ZW1JbnN0cnVjdGlvbik7XG4gICAgICAgIHRoaXMuY2FjaGVkQ29udGVudCA9IG1vZGVsUGFyYW1zLmNhY2hlZENvbnRlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIG5vbi1zdHJlYW1pbmcgY2FsbCB0byB0aGUgbW9kZWxcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyBhIHNpbmdsZSB7QGxpbmsgR2VuZXJhdGVDb250ZW50UmVzcG9uc2V9LlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50KHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb250ZW50KHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBPYmplY3QuYXNzaWduKHsgZ2VuZXJhdGlvbkNvbmZpZzogdGhpcy5nZW5lcmF0aW9uQ29uZmlnLCBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncywgdG9vbHM6IHRoaXMudG9vbHMsIHRvb2xDb25maWc6IHRoaXMudG9vbENvbmZpZywgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sIGNhY2hlZENvbnRlbnQ6IChfYSA9IHRoaXMuY2FjaGVkQ29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUgfSwgZm9ybWF0dGVkUGFyYW1zKSwgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBzdHJlYW1pbmcgY2FsbCB0byB0aGUgbW9kZWwgYW5kIHJldHVybnMgYW4gb2JqZWN0XG4gICAgICogY29udGFpbmluZyBhbiBpdGVyYWJsZSBzdHJlYW0gdGhhdCBpdGVyYXRlcyBvdmVyIGFsbCBjaHVua3MgaW4gdGhlXG4gICAgICogc3RyZWFtaW5nIHJlc3BvbnNlIGFzIHdlbGwgYXMgYSBwcm9taXNlIHRoYXQgcmV0dXJucyB0aGUgZmluYWxcbiAgICAgKiBhZ2dyZWdhdGVkIHJlc3BvbnNlLlxuICAgICAqXG4gICAgICogRmllbGRzIHNldCBpbiB0aGUgb3B0aW9uYWwge0BsaW5rIFNpbmdsZVJlcXVlc3RPcHRpb25zfSBwYXJhbWV0ZXIgd2lsbFxuICAgICAqIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSB7QGxpbmsgUmVxdWVzdE9wdGlvbnN9IHZhbHVlcyBwcm92aWRlZCB0b1xuICAgICAqIHtAbGluayBHb29nbGVHZW5lcmF0aXZlQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsIH0uXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50U3RyZWFtKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbXMgPSBmb3JtYXRHZW5lcmF0ZUNvbnRlbnRJbnB1dChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb250ZW50U3RyZWFtKHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBPYmplY3QuYXNzaWduKHsgZ2VuZXJhdGlvbkNvbmZpZzogdGhpcy5nZW5lcmF0aW9uQ29uZmlnLCBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncywgdG9vbHM6IHRoaXMudG9vbHMsIHRvb2xDb25maWc6IHRoaXMudG9vbENvbmZpZywgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sIGNhY2hlZENvbnRlbnQ6IChfYSA9IHRoaXMuY2FjaGVkQ29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm5hbWUgfSwgZm9ybWF0dGVkUGFyYW1zKSwgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgbmV3IHtAbGluayBDaGF0U2Vzc2lvbn0gaW5zdGFuY2Ugd2hpY2ggY2FuIGJlIHVzZWQgZm9yXG4gICAgICogbXVsdGktdHVybiBjaGF0cy5cbiAgICAgKi9cbiAgICBzdGFydENoYXQoc3RhcnRDaGF0UGFyYW1zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0U2Vzc2lvbih0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgT2JqZWN0LmFzc2lnbih7IGdlbmVyYXRpb25Db25maWc6IHRoaXMuZ2VuZXJhdGlvbkNvbmZpZywgc2FmZXR5U2V0dGluZ3M6IHRoaXMuc2FmZXR5U2V0dGluZ3MsIHRvb2xzOiB0aGlzLnRvb2xzLCB0b29sQ29uZmlnOiB0aGlzLnRvb2xDb25maWcsIHN5c3RlbUluc3RydWN0aW9uOiB0aGlzLnN5c3RlbUluc3RydWN0aW9uLCBjYWNoZWRDb250ZW50OiAoX2EgPSB0aGlzLmNhY2hlZENvbnRlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uYW1lIH0sIHN0YXJ0Q2hhdFBhcmFtcyksIHRoaXMuX3JlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ291bnRzIHRoZSB0b2tlbnMgaW4gdGhlIHByb3ZpZGVkIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBGaWVsZHMgc2V0IGluIHRoZSBvcHRpb25hbCB7QGxpbmsgU2luZ2xlUmVxdWVzdE9wdGlvbnN9IHBhcmFtZXRlciB3aWxsXG4gICAgICogdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIHtAbGluayBSZXF1ZXN0T3B0aW9uc30gdmFsdWVzIHByb3ZpZGVkIHRvXG4gICAgICoge0BsaW5rIEdvb2dsZUdlbmVyYXRpdmVBSS5nZXRHZW5lcmF0aXZlTW9kZWwgfS5cbiAgICAgKi9cbiAgICBhc3luYyBjb3VudFRva2VucyhyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IGZvcm1hdENvdW50VG9rZW5zSW5wdXQocmVxdWVzdCwge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXG4gICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB0aGlzLmdlbmVyYXRpb25Db25maWcsXG4gICAgICAgICAgICBzYWZldHlTZXR0aW5nczogdGhpcy5zYWZldHlTZXR0aW5ncyxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLnRvb2xzLFxuICAgICAgICAgICAgdG9vbENvbmZpZzogdGhpcy50b29sQ29uZmlnLFxuICAgICAgICAgICAgc3lzdGVtSW5zdHJ1Y3Rpb246IHRoaXMuc3lzdGVtSW5zdHJ1Y3Rpb24sXG4gICAgICAgICAgICBjYWNoZWRDb250ZW50OiB0aGlzLmNhY2hlZENvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBjb3VudFRva2Vucyh0aGlzLmFwaUtleSwgdGhpcy5tb2RlbCwgZm9ybWF0dGVkUGFyYW1zLCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtYmVkcyB0aGUgcHJvdmlkZWQgY29udGVudC5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGVtYmVkQ29udGVudChyZXF1ZXN0LCByZXF1ZXN0T3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IGZvcm1hdEVtYmVkQ29udGVudElucHV0KHJlcXVlc3QpO1xuICAgICAgICBjb25zdCBnZW5lcmF0aXZlTW9kZWxSZXF1ZXN0T3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fcmVxdWVzdE9wdGlvbnMpLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBlbWJlZENvbnRlbnQodGhpcy5hcGlLZXksIHRoaXMubW9kZWwsIGZvcm1hdHRlZFBhcmFtcywgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWJlZHMgYW4gYXJyYXkgb2Yge0BsaW5rIEVtYmVkQ29udGVudFJlcXVlc3R9cy5cbiAgICAgKlxuICAgICAqIEZpZWxkcyBzZXQgaW4gdGhlIG9wdGlvbmFsIHtAbGluayBTaW5nbGVSZXF1ZXN0T3B0aW9uc30gcGFyYW1ldGVyIHdpbGxcbiAgICAgKiB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUge0BsaW5rIFJlcXVlc3RPcHRpb25zfSB2YWx1ZXMgcHJvdmlkZWQgdG9cbiAgICAgKiB7QGxpbmsgR29vZ2xlR2VuZXJhdGl2ZUFJLmdldEdlbmVyYXRpdmVNb2RlbCB9LlxuICAgICAqL1xuICAgIGFzeW5jIGJhdGNoRW1iZWRDb250ZW50cyhiYXRjaEVtYmVkQ29udGVudFJlcXVlc3QsIHJlcXVlc3RPcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZU1vZGVsUmVxdWVzdE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX3JlcXVlc3RPcHRpb25zKSwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gYmF0Y2hFbWJlZENvbnRlbnRzKHRoaXMuYXBpS2V5LCB0aGlzLm1vZGVsLCBiYXRjaEVtYmVkQ29udGVudFJlcXVlc3QsIGdlbmVyYXRpdmVNb2RlbFJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDI0IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRvcC1sZXZlbCBjbGFzcyBmb3IgdGhpcyBTREtcbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgR29vZ2xlR2VuZXJhdGl2ZUFJIHtcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXkpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB7QGxpbmsgR2VuZXJhdGl2ZU1vZGVsfSBpbnN0YW5jZSBmb3IgdGhlIHByb3ZpZGVkIG1vZGVsIG5hbWUuXG4gICAgICovXG4gICAgZ2V0R2VuZXJhdGl2ZU1vZGVsKG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICBpZiAoIW1vZGVsUGFyYW1zLm1vZGVsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJRXJyb3IoYE11c3QgcHJvdmlkZSBhIG1vZGVsIG5hbWUuIGAgK1xuICAgICAgICAgICAgICAgIGBFeGFtcGxlOiBnZW5haS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogJ215LW1vZGVsLW5hbWUnIH0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aXZlTW9kZWwodGhpcy5hcGlLZXksIG1vZGVsUGFyYW1zLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgR2VuZXJhdGl2ZU1vZGVsfSBpbnN0YW5jZSBmcm9tIHByb3ZpZGVkIGNvbnRlbnQgY2FjaGUuXG4gICAgICovXG4gICAgZ2V0R2VuZXJhdGl2ZU1vZGVsRnJvbUNhY2hlZENvbnRlbnQoY2FjaGVkQ29udGVudCwgbW9kZWxQYXJhbXMsIHJlcXVlc3RPcHRpb25zKSB7XG4gICAgICAgIGlmICghY2FjaGVkQ29udGVudC5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoXCJDYWNoZWQgY29udGVudCBtdXN0IGNvbnRhaW4gYSBgbmFtZWAgZmllbGQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2FjaGVkQ29udGVudC5tb2RlbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEdvb2dsZUdlbmVyYXRpdmVBSVJlcXVlc3RJbnB1dEVycm9yKFwiQ2FjaGVkIGNvbnRlbnQgbXVzdCBjb250YWluIGEgYG1vZGVsYCBmaWVsZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdCBjaGVja2luZyB0b29scyBhbmQgdG9vbENvbmZpZyBmb3Igbm93IGFzIGl0IHdvdWxkIHJlcXVpcmUgYSBkZWVwXG4gICAgICAgICAqIGVxdWFsaXR5IGNvbXBhcmlzb24gYW5kIGlzbid0IGxpa2VseSB0byBiZSBhIGNvbW1vbiBjYXNlLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgZGlzYWxsb3dlZER1cGxpY2F0ZXMgPSBbXCJtb2RlbFwiLCBcInN5c3RlbUluc3RydWN0aW9uXCJdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBkaXNhbGxvd2VkRHVwbGljYXRlcykge1xuICAgICAgICAgICAgaWYgKChtb2RlbFBhcmFtcyA9PT0gbnVsbCB8fCBtb2RlbFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbW9kZWxQYXJhbXNba2V5XSkgJiZcbiAgICAgICAgICAgICAgICBjYWNoZWRDb250ZW50W2tleV0gJiZcbiAgICAgICAgICAgICAgICAobW9kZWxQYXJhbXMgPT09IG51bGwgfHwgbW9kZWxQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1vZGVsUGFyYW1zW2tleV0pICE9PSBjYWNoZWRDb250ZW50W2tleV0pIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcIm1vZGVsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxQYXJhbXNDb21wID0gbW9kZWxQYXJhbXMubW9kZWwuc3RhcnRzV2l0aChcIm1vZGVscy9cIilcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kZWxQYXJhbXMubW9kZWwucmVwbGFjZShcIm1vZGVscy9cIiwgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbW9kZWxQYXJhbXMubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZENvbnRlbnRDb21wID0gY2FjaGVkQ29udGVudC5tb2RlbC5zdGFydHNXaXRoKFwibW9kZWxzL1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjYWNoZWRDb250ZW50Lm1vZGVsLnJlcGxhY2UoXCJtb2RlbHMvXCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNhY2hlZENvbnRlbnQubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlbFBhcmFtc0NvbXAgPT09IGNhY2hlZENvbnRlbnRDb21wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IoYERpZmZlcmVudCB2YWx1ZSBmb3IgXCIke2tleX1cIiBzcGVjaWZpZWQgaW4gbW9kZWxQYXJhbXNgICtcbiAgICAgICAgICAgICAgICAgICAgYCAoJHttb2RlbFBhcmFtc1trZXldfSkgYW5kIGNhY2hlZENvbnRlbnQgKCR7Y2FjaGVkQ29udGVudFtrZXldfSlgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbFBhcmFtc0Zyb21DYWNoZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbW9kZWxQYXJhbXMpLCB7IG1vZGVsOiBjYWNoZWRDb250ZW50Lm1vZGVsLCB0b29sczogY2FjaGVkQ29udGVudC50b29scywgdG9vbENvbmZpZzogY2FjaGVkQ29udGVudC50b29sQ29uZmlnLCBzeXN0ZW1JbnN0cnVjdGlvbjogY2FjaGVkQ29udGVudC5zeXN0ZW1JbnN0cnVjdGlvbiwgY2FjaGVkQ29udGVudCB9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmF0aXZlTW9kZWwodGhpcy5hcGlLZXksIG1vZGVsUGFyYW1zRnJvbUNhY2hlLCByZXF1ZXN0T3B0aW9ucyk7XG4gICAgfVxufVxuXG5leHBvcnQgeyBCbG9ja1JlYXNvbiwgQ2hhdFNlc3Npb24sIER5bmFtaWNSZXRyaWV2YWxNb2RlLCBFeGVjdXRhYmxlQ29kZUxhbmd1YWdlLCBGaW5pc2hSZWFzb24sIEZ1bmN0aW9uQ2FsbGluZ01vZGUsIEdlbmVyYXRpdmVNb2RlbCwgR29vZ2xlR2VuZXJhdGl2ZUFJLCBHb29nbGVHZW5lcmF0aXZlQUlBYm9ydEVycm9yLCBHb29nbGVHZW5lcmF0aXZlQUlFcnJvciwgR29vZ2xlR2VuZXJhdGl2ZUFJRmV0Y2hFcnJvciwgR29vZ2xlR2VuZXJhdGl2ZUFJUmVxdWVzdElucHV0RXJyb3IsIEdvb2dsZUdlbmVyYXRpdmVBSVJlc3BvbnNlRXJyb3IsIEhhcm1CbG9ja1RocmVzaG9sZCwgSGFybUNhdGVnb3J5LCBIYXJtUHJvYmFiaWxpdHksIE91dGNvbWUsIFBPU1NJQkxFX1JPTEVTLCBTY2hlbWFUeXBlLCBUYXNrVHlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs\n"));

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages/_app","main"], function() { return __webpack_exec__("./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fmauriceholda%2FDesktop%2FCoding%2Fnaga-codex-ai-chess-final%20(1)%2Fpages%2Findex.tsx&page=%2F!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);